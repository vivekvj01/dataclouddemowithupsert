import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _Object$defineProperties from "@babel/runtime-corejs3/core-js-stable/object/define-properties";
import _Object$getOwnPropertyDescriptors from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors";
import _forEachInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/for-each";
import _Object$getOwnPropertyDescriptor from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$getOwnPropertySymbols from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols";
import "core-js/modules/es.array.iterator";
import "core-js/modules/es.promise";
import "core-js/modules/es.string.replace";
import _WeakMap from "@babel/runtime-corejs3/core-js-stable/weak-map";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
import _Date$now from "@babel/runtime-corejs3/core-js-stable/date/now";
import _JSON$stringify from "@babel/runtime-corejs3/core-js-stable/json/stringify";
import _classPrivateFieldGet from "@babel/runtime-corejs3/helpers/classPrivateFieldGet";
import _classPrivateFieldSet from "@babel/runtime-corejs3/helpers/classPrivateFieldSet";
import _mapInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/map";
import _setTimeout from "@babel/runtime-corejs3/core-js-stable/set-timeout";
import _parseInt from "@babel/runtime-corejs3/core-js-stable/parse-int";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _objectWithoutProperties from "@babel/runtime-corejs3/helpers/objectWithoutProperties";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import _trimInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/trim";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { var _context5; _forEachInstanceProperty(_context5 = ownKeys(Object(source), true)).call(_context5, function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { var _context6; _forEachInstanceProperty(_context6 = ownKeys(Object(source))).call(_context6, function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }
/**
 * @file Manages Salesforce Bulk API related operations
 * @author Shinichi Tomita <shinichi.tomita@gmail.com>
 */
import { EventEmitter } from 'events';
import { Writable } from 'stream';
import joinStreams from 'multistream';
import { Serializable, Parsable } from '../record-stream';
import HttpApi from '../http-api';
import { registerModule } from '../jsforce';
import { concatStreamsAsDuplex } from '../util/stream';
import { isFunction, isObject } from '../util/function';

/*--------------------------------------------*/

/**
 * Class for Bulk API Job
 */
export class Job extends EventEmitter {
  /**
   *
   */
  constructor(bulk, type, operation, options, jobId) {
    super();
    _defineProperty(this, "type", void 0);
    _defineProperty(this, "operation", void 0);
    _defineProperty(this, "options", void 0);
    _defineProperty(this, "id", void 0);
    _defineProperty(this, "state", void 0);
    _defineProperty(this, "_bulk", void 0);
    _defineProperty(this, "_batches", void 0);
    _defineProperty(this, "_jobInfo", void 0);
    _defineProperty(this, "_error", void 0);
    this._bulk = bulk;
    this.type = type;
    this.operation = operation;
    this.options = options || {};
    this.id = jobId !== null && jobId !== void 0 ? jobId : null;
    this.state = this.id ? 'Open' : 'Unknown';
    this._batches = {};
    // default error handler to keep the latest error
    this.on('error', error => this._error = error);
  }

  /**
   * Return latest jobInfo from cache
   */
  info() {
    // if cache is not available, check the latest
    if (!this._jobInfo) {
      this._jobInfo = this.check();
    }
    return this._jobInfo;
  }

  /**
   * Open new job and get jobinfo
   */
  open() {
    const bulk = this._bulk;
    const options = this.options;

    // if sobject type / operation is not provided
    if (!this.type || !this.operation) {
      throw new Error('type / operation is required to open a new job');
    }

    // if not requested opening job
    if (!this._jobInfo) {
      var _context;
      let operation = this.operation.toLowerCase();
      if (operation === 'harddelete') {
        operation = 'hardDelete';
      }
      if (operation === 'queryall') {
        operation = 'queryAll';
      }
      const body = _trimInstanceProperty(_context = `
<?xml version="1.0" encoding="UTF-8"?>
<jobInfo  xmlns="http://www.force.com/2009/06/asyncapi/dataload">
  <operation>${operation}</operation>
  <object>${this.type}</object>
  ${options.extIdField ? `<externalIdFieldName>${options.extIdField}</externalIdFieldName>` : ''}
  ${options.concurrencyMode ? `<concurrencyMode>${options.concurrencyMode}</concurrencyMode>` : ''}
  ${options.assignmentRuleId ? `<assignmentRuleId>${options.assignmentRuleId}</assignmentRuleId>` : ''}
  <contentType>CSV</contentType>
</jobInfo>
      `).call(_context);
      this._jobInfo = (async () => {
        try {
          const res = await bulk._request({
            method: 'POST',
            path: '/job',
            body,
            headers: {
              'Content-Type': 'application/xml; charset=utf-8'
            },
            responseType: 'application/xml'
          });
          this.emit('open', res.jobInfo);
          this.id = res.jobInfo.id;
          this.state = res.jobInfo.state;
          return res.jobInfo;
        } catch (err) {
          this.emit('error', err);
          throw err;
        }
      })();
    }
    return this._jobInfo;
  }

  /**
   * Create a new batch instance in the job
   */
  createBatch() {
    const batch = new Batch(this);
    batch.on('queue', () => {
      this._batches[batch.id] = batch;
    });
    return batch;
  }

  /**
   * Get a batch instance specified by given batch ID
   */
  batch(batchId) {
    let batch = this._batches[batchId];
    if (!batch) {
      batch = new Batch(this, batchId);
      this._batches[batchId] = batch;
    }
    return batch;
  }

  /**
   * Check the latest job status from server
   */
  check() {
    const bulk = this._bulk;
    const logger = bulk._logger;
    this._jobInfo = (async () => {
      const jobId = await this.ready();
      const res = await bulk._request({
        method: 'GET',
        path: '/job/' + jobId,
        responseType: 'application/xml'
      });
      logger.debug(res.jobInfo);
      this.id = res.jobInfo.id;
      this.type = res.jobInfo.object;
      this.operation = res.jobInfo.operation;
      this.state = res.jobInfo.state;
      return res.jobInfo;
    })();
    return this._jobInfo;
  }

  /**
   * Wait till the job is assigned to server
   */
  ready() {
    return this.id ? _Promise.resolve(this.id) : this.open().then(({
      id
    }) => id);
  }

  /**
   * List all registered batch info in job
   */
  async list() {
    const bulk = this._bulk;
    const logger = bulk._logger;
    const jobId = await this.ready();
    const res = await bulk._request({
      method: 'GET',
      path: '/job/' + jobId + '/batch',
      responseType: 'application/xml'
    });
    logger.debug(res.batchInfoList.batchInfo);
    const batchInfoList = _Array$isArray(res.batchInfoList.batchInfo) ? res.batchInfoList.batchInfo : [res.batchInfoList.batchInfo];
    return batchInfoList;
  }

  /**
   * Close opened job
   */
  async close() {
    if (!this.id) {
      return;
    }
    try {
      const jobInfo = await this._changeState('Closed');
      this.id = null;
      this.emit('close', jobInfo);
      return jobInfo;
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * Set the status to abort
   */
  async abort() {
    if (!this.id) {
      return;
    }
    try {
      const jobInfo = await this._changeState('Aborted');
      this.id = null;
      this.emit('abort', jobInfo);
      return jobInfo;
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * @private
   */
  async _changeState(state) {
    const bulk = this._bulk;
    const logger = bulk._logger;
    this._jobInfo = (async () => {
      var _context2;
      const jobId = await this.ready();
      const body = _trimInstanceProperty(_context2 = ` 
<?xml version="1.0" encoding="UTF-8"?>
  <jobInfo xmlns="http://www.force.com/2009/06/asyncapi/dataload">
  <state>${state}</state>
</jobInfo>
      `).call(_context2);
      const res = await bulk._request({
        method: 'POST',
        path: '/job/' + jobId,
        body: body,
        headers: {
          'Content-Type': 'application/xml; charset=utf-8'
        },
        responseType: 'application/xml'
      });
      logger.debug(res.jobInfo);
      this.state = res.jobInfo.state;
      return res.jobInfo;
    })();
    return this._jobInfo;
  }
}

/*--------------------------------------------*/
class PollingTimeoutError extends Error {
  /**
   *
   */
  constructor(message, jobId, batchId) {
    super(message);
    _defineProperty(this, "jobId", void 0);
    _defineProperty(this, "batchId", void 0);
    this.name = 'PollingTimeout';
    this.jobId = jobId;
    this.batchId = batchId;
  }
}
class JobPollingTimeoutError extends Error {
  /**
   *
   */
  constructor(message, jobId) {
    super(message);
    _defineProperty(this, "jobId", void 0);
    this.name = 'JobPollingTimeout';
    this.jobId = jobId;
  }
}

/*--------------------------------------------*/
/**
 * Batch (extends Writable)
 */
export class Batch extends Writable {
  /**
   *
   */
  constructor(job, id) {
    super({
      objectMode: true
    });
    _defineProperty(this, "job", void 0);
    _defineProperty(this, "id", void 0);
    _defineProperty(this, "_bulk", void 0);
    _defineProperty(this, "_uploadStream", void 0);
    _defineProperty(this, "_downloadStream", void 0);
    _defineProperty(this, "_dataStream", void 0);
    _defineProperty(this, "_result", void 0);
    _defineProperty(this, "_error", void 0);
    _defineProperty(this, "run", this.execute);
    _defineProperty(this, "exec", this.execute);
    this.job = job;
    this.id = id;
    this._bulk = job._bulk;

    // default error handler to keep the latest error
    this.on('error', error => this._error = error);

    //
    // setup data streams
    //
    const converterOptions = {
      nullValue: '#N/A'
    };
    const uploadStream = this._uploadStream = new Serializable();
    const uploadDataStream = uploadStream.stream('csv', converterOptions);
    const downloadStream = this._downloadStream = new Parsable();
    const downloadDataStream = downloadStream.stream('csv', converterOptions);
    this.on('finish', () => uploadStream.end());
    uploadDataStream.once('readable', async () => {
      try {
        // ensure the job is opened in server or job id is already assigned
        await this.job.ready();
        // pipe upload data to batch API request stream
        uploadDataStream.pipe(this._createRequestStream());
      } catch (err) {
        this.emit('error', err);
      }
    });

    // duplex data stream, opened access to API programmers by Batch#stream()
    this._dataStream = concatStreamsAsDuplex(uploadDataStream, downloadDataStream);
  }

  /**
   * Connect batch API and create stream instance of request/response
   *
   * @private
   */
  _createRequestStream() {
    const bulk = this._bulk;
    const logger = bulk._logger;
    const req = bulk._request({
      method: 'POST',
      path: '/job/' + this.job.id + '/batch',
      headers: {
        'Content-Type': 'text/csv'
      },
      responseType: 'application/xml'
    });
    (async () => {
      try {
        const res = await req;
        logger.debug(res.batchInfo);
        this.id = res.batchInfo.id;
        this.emit('queue', res.batchInfo);
      } catch (err) {
        this.emit('error', err);
      }
    })();
    return req.stream();
  }

  /**
   * Implementation of Writable
   */
  _write(record_, enc, cb) {
    const {
        Id,
        type,
        attributes
      } = record_,
      rrec = _objectWithoutProperties(record_, ["Id", "type", "attributes"]);
    let record;
    switch (this.job.operation) {
      case 'insert':
        record = rrec;
        break;
      case 'delete':
      case 'hardDelete':
        record = {
          Id
        };
        break;
      default:
        record = _objectSpread({
          Id
        }, rrec);
    }
    this._uploadStream.write(record, enc, cb);
  }

  /**
   * Returns duplex stream which accepts CSV data input and batch result output
   */
  stream() {
    return this._dataStream;
  }

  /**
   * Execute batch operation
   */
  execute(input) {
    // if batch is already executed
    if (this._result) {
      throw new Error('Batch already executed.');
    }
    this._result = new _Promise((resolve, reject) => {
      this.once('response', resolve);
      this.once('error', reject);
    });
    if (isObject(input) && 'pipe' in input && isFunction(input.pipe)) {
      // if input has stream.Readable interface
      input.pipe(this._dataStream);
    } else {
      if (_Array$isArray(input)) {
        for (const record of input) {
          for (const key of _Object$keys(record)) {
            if (typeof record[key] === 'boolean') {
              record[key] = String(record[key]);
            }
          }
          this.write(record);
        }
        this.end();
      } else if (typeof input === 'string') {
        this._dataStream.write(input, 'utf8');
        this._dataStream.end();
      }
    }

    // return Batch instance for chaining
    return this;
  }
  /**
   * Promise/A+ interface
   * Delegate to promise, return promise instance for batch result
   */
  then(onResolved, onReject) {
    if (!this._result) {
      this.execute();
    }
    return this._result.then(onResolved, onReject);
  }

  /**
   * Check the latest batch status in server
   */
  async check() {
    const bulk = this._bulk;
    const logger = bulk._logger;
    const jobId = this.job.id;
    const batchId = this.id;
    if (!jobId || !batchId) {
      throw new Error('Batch not started.');
    }
    const res = await bulk._request({
      method: 'GET',
      path: '/job/' + jobId + '/batch/' + batchId,
      responseType: 'application/xml'
    });
    logger.debug(res.batchInfo);
    return res.batchInfo;
  }

  /**
   * Polling the batch result and retrieve
   */
  poll(interval, timeout) {
    const jobId = this.job.id;
    const batchId = this.id;
    if (!jobId || !batchId) {
      throw new Error('Batch not started.');
    }
    const startTime = new Date().getTime();
    const poll = async () => {
      const now = new Date().getTime();
      if (startTime + timeout < now) {
        const err = new PollingTimeoutError('Polling time out. Job Id = ' + jobId + ' , batch Id = ' + batchId, jobId, batchId);
        this.emit('error', err);
        return;
      }
      let res;
      try {
        res = await this.check();
      } catch (err) {
        this.emit('error', err);
        return;
      }
      if (res.state === 'Failed') {
        if (_parseInt(res.numberRecordsProcessed, 10) > 0) {
          this.retrieve();
        } else {
          this.emit('error', new Error(res.stateMessage));
        }
      } else if (res.state === 'Completed') {
        this.retrieve();
      } else {
        this.emit('progress', res);
        _setTimeout(poll, interval);
      }
    };
    _setTimeout(poll, interval);
  }

  /**
   * Retrieve batch result
   */
  async retrieve() {
    const bulk = this._bulk;
    const jobId = this.job.id;
    const job = this.job;
    const batchId = this.id;
    if (!jobId || !batchId) {
      throw new Error('Batch not started.');
    }
    try {
      const resp = await bulk._request({
        method: 'GET',
        path: '/job/' + jobId + '/batch/' + batchId + '/result'
      });
      let results;
      if (job.operation === 'query' || job.operation === 'queryAll') {
        var _context3;
        const res = resp;
        let resultId = res['result-list'].result;
        results = _mapInstanceProperty(_context3 = _Array$isArray(resultId) ? resultId : [resultId]).call(_context3, id => ({
          id,
          batchId,
          jobId
        }));
      } else {
        const res = resp;
        results = _mapInstanceProperty(res).call(res, ret => ({
          id: ret.Id || null,
          success: ret.Success === 'true',
          errors: ret.Error ? [ret.Error] : []
        }));
      }
      this.emit('response', results);
      return results;
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * Fetch query result as a record stream
   * @param {String} resultId - Result id
   * @returns {RecordStream} - Record stream, convertible to CSV data stream
   */
  result(resultId) {
    const jobId = this.job.id;
    const batchId = this.id;
    if (!jobId || !batchId) {
      throw new Error('Batch not started.');
    }
    const resultStream = new Parsable();
    const resultDataStream = resultStream.stream('csv');
    this._bulk._request({
      method: 'GET',
      path: '/job/' + jobId + '/batch/' + batchId + '/result/' + resultId,
      responseType: 'application/octet-stream'
    }).stream().pipe(resultDataStream);
    return resultStream;
  }
}

/*--------------------------------------------*/
/**
 *
 */
class BulkApi extends HttpApi {
  beforeSend(request) {
    var _this$_conn$accessTok;
    request.headers = _objectSpread(_objectSpread({}, request.headers), {}, {
      'X-SFDC-SESSION': (_this$_conn$accessTok = this._conn.accessToken) !== null && _this$_conn$accessTok !== void 0 ? _this$_conn$accessTok : ''
    });
  }
  isSessionExpired(response) {
    return response.statusCode === 400 && /<exceptionCode>InvalidSessionId<\/exceptionCode>/.test(response.body);
  }
  hasErrorInResponseBody(body) {
    return !!body.error;
  }
  parseError(body) {
    return {
      errorCode: body.error.exceptionCode,
      message: body.error.exceptionMessage
    };
  }
}
class BulkApiV2 extends HttpApi {
  hasErrorInResponseBody(body) {
    return _Array$isArray(body) && typeof body[0] === 'object' && 'errorCode' in body[0];
  }
  isSessionExpired(response) {
    return response.statusCode === 401 && /INVALID_SESSION_ID/.test(response.body);
  }
  parseError(body) {
    return {
      errorCode: body[0].errorCode,
      message: body[0].message
    };
  }
}

/*--------------------------------------------*/

/**
 * Class for Bulk API
 *
 * @class
 */
export class Bulk {
  /**
   * Polling interval in milliseconds
   */

  /**
   * Polling timeout in milliseconds
   * @type {Number}
   */

  /**
   *
   */
  constructor(conn) {
    _defineProperty(this, "_conn", void 0);
    _defineProperty(this, "_logger", void 0);
    _defineProperty(this, "pollInterval", 1000);
    _defineProperty(this, "pollTimeout", 10000);
    this._conn = conn;
    this._logger = conn._logger;
  }

  /**
   *
   */
  _request(request_) {
    const conn = this._conn;
    const {
        path,
        responseType
      } = request_,
      rreq = _objectWithoutProperties(request_, ["path", "responseType"]);
    const baseUrl = [conn.instanceUrl, 'services/async', conn.version].join('/');
    const request = _objectSpread(_objectSpread({}, rreq), {}, {
      url: baseUrl + path
    });
    return new BulkApi(this._conn, {
      responseType
    }).request(request);
  }

  /**
   * Create and start bulkload job and batch
   */

  load(type, operation, optionsOrInput, input) {
    let options = {};
    if (typeof optionsOrInput === 'string' || _Array$isArray(optionsOrInput) || isObject(optionsOrInput) && 'pipe' in optionsOrInput && typeof optionsOrInput.pipe === 'function') {
      // when options is not plain hash object, it is omitted
      input = optionsOrInput;
    } else {
      options = optionsOrInput;
    }
    const job = this.createJob(type, operation, options);
    const batch = job.createBatch();
    const cleanup = () => job.close();
    const cleanupOnError = err => {
      if (err.name !== 'PollingTimeout') {
        cleanup();
      }
    };
    batch.on('response', cleanup);
    batch.on('error', cleanupOnError);
    batch.on('queue', () => {
      batch === null || batch === void 0 ? void 0 : batch.poll(this.pollInterval, this.pollTimeout);
    });
    return batch.execute(input);
  }

  /**
   * Execute bulk query and get record stream
   */
  query(soql) {
    const m = soql.replace(/\([\s\S]+\)/g, '').match(/FROM\s+(\w+)/i);
    if (!m) {
      throw new Error('No sobject type found in query, maybe caused by invalid SOQL.');
    }
    const type = m[1];
    const recordStream = new Parsable();
    const dataStream = recordStream.stream('csv');
    (async () => {
      try {
        const results = await this.load(type, 'query', soql);
        const streams = _mapInstanceProperty(results).call(results, result => this.job(result.jobId).batch(result.batchId).result(result.id).stream());
        joinStreams(streams).pipe(dataStream);
      } catch (err) {
        recordStream.emit('error', err);
      }
    })();
    return recordStream;
  }

  /**
   * Create a new job instance
   */
  createJob(type, operation, options = {}) {
    return new Job(this, type, operation, options);
  }

  /**
   * Get a job instance specified by given job ID
   *
   * @param {String} jobId - Job ID
   * @returns {Bulk~Job}
   */
  job(jobId) {
    return new Job(this, null, null, null, jobId);
  }
}
var _connection = new _WeakMap();
export class BulkV2 {
  /**
   * Polling interval in milliseconds
   */

  /**
   * Polling timeout in milliseconds
   * @type {Number}
   */

  constructor(connection) {
    _connection.set(this, {
      writable: true,
      value: void 0
    });
    _defineProperty(this, "pollInterval", 1000);
    _defineProperty(this, "pollTimeout", 10000);
    _classPrivateFieldSet(this, _connection, connection);
  }

  /**
   * Create an instance of an ingest job object.
   *
   * @params {NewIngestJobOptions} options object
   * @returns {IngestJobV2} An ingest job instance
   * @example
   * // Upsert records to the Account object.
   *
   * const job = connection.bulk2.createJob({
   *   operation: 'insert'
   *   object: 'Account',
   * });
   *
   * // create the job in the org
   * await job.open()
   *
   * // upload data
   * await job.uploadData(csvFile)
   *
   * // finished uploading data, mark it as ready for processing
   * await job.close()
   */
  createJob(options) {
    return new IngestJobV2({
      connection: _classPrivateFieldGet(this, _connection),
      jobInfo: options,
      pollingOptions: this
    });
  }

  /**
   * Get a ingest job instance specified by a given job ID
   *
   * @param options Options object with a job ID
   * @returns IngestJobV2 An ingest job
   */
  job(options) {
    return new IngestJobV2({
      connection: _classPrivateFieldGet(this, _connection),
      jobInfo: options,
      pollingOptions: this
    });
  }

  /**
   * Create, upload, and start bulkload job
   */
  async loadAndWaitForResults(options) {
    if (!options.pollTimeout) options.pollTimeout = this.pollTimeout;
    if (!options.pollInterval) options.pollInterval = this.pollInterval;
    const job = this.createJob(options);
    try {
      await job.open();
      await job.uploadData(options.input);
      await job.close();
      await job.poll(options.pollInterval, options.pollTimeout);
      return await job.getAllResults();
    } catch (err) {
      if (err.name !== 'JobPollingTimeoutError') {
        // fires off one last attempt to clean up and ignores the result | error
        job.delete().catch(ignored => ignored);
      }
      throw err;
    }
  }

  /**
   * Execute bulk query and get records
   *
   * Default timeout: 10000ms
   *
   * @param soql SOQL query
   * @param BulkV2PollingOptions options object
   *
   * @returns Record[]
   */
  async query(soql, options) {
    const queryJob = new QueryJobV2({
      connection: _classPrivateFieldGet(this, _connection),
      operation: options !== null && options !== void 0 && options.scanAll ? 'queryAll' : 'query',
      query: soql,
      pollingOptions: this
    });
    try {
      await queryJob.open();
      await queryJob.poll(options === null || options === void 0 ? void 0 : options.pollInterval, options === null || options === void 0 ? void 0 : options.pollTimeout);
      return await queryJob.getResults();
    } catch (err) {
      if (err.name !== 'JobPollingTimeoutError') {
        // fires off one last attempt to clean up and ignores the result | error
        queryJob.delete().catch(ignored => ignored);
      }
      throw err;
    }
  }
}
var _connection2 = new _WeakMap();
var _operation = new _WeakMap();
var _query = new _WeakMap();
var _pollingOptions = new _WeakMap();
var _queryResults = new _WeakMap();
var _error = new _WeakMap();
export class QueryJobV2 extends EventEmitter {
  constructor(options) {
    super();
    _connection2.set(this, {
      writable: true,
      value: void 0
    });
    _operation.set(this, {
      writable: true,
      value: void 0
    });
    _query.set(this, {
      writable: true,
      value: void 0
    });
    _pollingOptions.set(this, {
      writable: true,
      value: void 0
    });
    _queryResults.set(this, {
      writable: true,
      value: void 0
    });
    _error.set(this, {
      writable: true,
      value: void 0
    });
    _defineProperty(this, "jobInfo", void 0);
    _defineProperty(this, "locator", void 0);
    _defineProperty(this, "finished", false);
    _classPrivateFieldSet(this, _connection2, options.connection);
    _classPrivateFieldSet(this, _operation, options.operation);
    _classPrivateFieldSet(this, _query, options.query);
    _classPrivateFieldSet(this, _pollingOptions, options.pollingOptions);
    // default error handler to keep the latest error
    this.on('error', error => _classPrivateFieldSet(this, _error, error));
  }

  /**
   * Creates a query job
   */
  async open() {
    try {
      this.jobInfo = await this.createQueryRequest({
        method: 'POST',
        path: '',
        body: _JSON$stringify({
          operation: _classPrivateFieldGet(this, _operation),
          query: _classPrivateFieldGet(this, _query)
        }),
        headers: {
          'Content-Type': 'application/json; charset=utf-8'
        },
        responseType: 'application/json'
      });
      this.emit('open');
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * Set the status to abort
   */
  async abort() {
    try {
      var _this$jobInfo;
      const state = 'Aborted';
      this.jobInfo = await this.createQueryRequest({
        method: 'PATCH',
        path: `/${(_this$jobInfo = this.jobInfo) === null || _this$jobInfo === void 0 ? void 0 : _this$jobInfo.id}`,
        body: _JSON$stringify({
          state
        }),
        headers: {
          'Content-Type': 'application/json; charset=utf-8'
        },
        responseType: 'application/json'
      });
      this.emit('aborted');
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * Poll for the state of the processing for the job.
   *
   * This method will only throw after a timeout. To capture a
   * job failure while polling you must set a listener for the
   * `failed` event before calling it:
   *
   * job.on('failed', (err) => console.error(err))
   * await job.poll()
   *
   * @param interval Polling interval in milliseconds
   * @param timeout Polling timeout in milliseconds
   * @returns {Promise<Record[]>} A promise that resolves to an array of records
   */
  async poll(interval = _classPrivateFieldGet(this, _pollingOptions).pollInterval, timeout = _classPrivateFieldGet(this, _pollingOptions).pollTimeout) {
    const jobId = getJobIdOrError(this.jobInfo);
    const startTime = _Date$now();
    while (startTime + timeout > _Date$now()) {
      try {
        const res = await this.check();
        switch (res.state) {
          case 'Open':
            throw new Error('Job has not been started');
          case 'Aborted':
            throw new Error('Job has been aborted');
          case 'UploadComplete':
          case 'InProgress':
            await delay(interval);
            break;
          case 'Failed':
            // unlike ingest jobs, the API doesn't return an error msg:
            // https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/query_get_one_job.htm
            this.emit('failed', new Error('Query job failed to complete.'));
            return;
          case 'JobComplete':
            this.emit('jobcomplete');
            return;
        }
      } catch (err) {
        this.emit('error', err);
        throw err;
      }
    }
    const timeoutError = new JobPollingTimeoutError(`Polling timed out after ${timeout}ms. Job Id = ${jobId}`, jobId);
    this.emit('error', timeoutError);
    throw timeoutError;
  }

  /**
   * Check the latest batch status in server
   */
  async check() {
    try {
      const jobInfo = await this.createQueryRequest({
        method: 'GET',
        path: `/${getJobIdOrError(this.jobInfo)}`,
        responseType: 'application/json'
      });
      this.jobInfo = jobInfo;
      return jobInfo;
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }
  request(request, options = {}) {
    // if request is simple string, regard it as url in GET method
    let request_ = typeof request === 'string' ? {
      method: 'GET',
      url: request
    } : request;
    const httpApi = new HttpApi(_classPrivateFieldGet(this, _connection2), options);
    httpApi.on('response', response => {
      this.locator = response.headers['sforce-locator'];
    });
    return httpApi.request(request_);
  }
  getResultsUrl() {
    const url = `${_classPrivateFieldGet(this, _connection2).instanceUrl}/services/data/v${_classPrivateFieldGet(this, _connection2).version}/jobs/query/${getJobIdOrError(this.jobInfo)}/results`;
    return this.locator ? `${url}?locator=${this.locator}` : url;
  }

  /**
   * Get the results for a query job.
   *
   * @returns {Promise<Record[]>} A promise that resolves to an array of records
   */
  async getResults() {
    if (this.finished && _classPrivateFieldGet(this, _queryResults)) {
      return _classPrivateFieldGet(this, _queryResults);
    }
    _classPrivateFieldSet(this, _queryResults, []);
    while (this.locator !== 'null') {
      var _context4;
      const nextResults = await this.request({
        method: 'GET',
        url: this.getResultsUrl(),
        headers: {
          Accept: 'text/csv'
        }
      });
      _classPrivateFieldSet(this, _queryResults, _concatInstanceProperty(_context4 = _classPrivateFieldGet(this, _queryResults)).call(_context4, nextResults));
    }
    this.finished = true;
    return _classPrivateFieldGet(this, _queryResults);
  }

  /**
   * Deletes a query job.
   */
  async delete() {
    return this.createQueryRequest({
      method: 'DELETE',
      path: `/${getJobIdOrError(this.jobInfo)}`
    });
  }
  createQueryRequest(request) {
    const {
      path,
      responseType
    } = request;
    const baseUrl = [_classPrivateFieldGet(this, _connection2).instanceUrl, 'services/data', `v${_classPrivateFieldGet(this, _connection2).version}`, 'jobs/query'].join('/');
    return new BulkApiV2(_classPrivateFieldGet(this, _connection2), {
      responseType
    }).request(_objectSpread(_objectSpread({}, request), {}, {
      url: baseUrl + path
    }));
  }
}

/**
 * Class for Bulk API V2 Ingest Job
 */
var _connection3 = new _WeakMap();
var _pollingOptions2 = new _WeakMap();
var _jobData = new _WeakMap();
var _bulkJobSuccessfulResults = new _WeakMap();
var _bulkJobFailedResults = new _WeakMap();
var _bulkJobUnprocessedRecords = new _WeakMap();
var _error2 = new _WeakMap();
export class IngestJobV2 extends EventEmitter {
  /**
   *
   */
  constructor(options) {
    super();
    _connection3.set(this, {
      writable: true,
      value: void 0
    });
    _pollingOptions2.set(this, {
      writable: true,
      value: void 0
    });
    _jobData.set(this, {
      writable: true,
      value: void 0
    });
    _bulkJobSuccessfulResults.set(this, {
      writable: true,
      value: void 0
    });
    _bulkJobFailedResults.set(this, {
      writable: true,
      value: void 0
    });
    _bulkJobUnprocessedRecords.set(this, {
      writable: true,
      value: void 0
    });
    _error2.set(this, {
      writable: true,
      value: void 0
    });
    _defineProperty(this, "jobInfo", void 0);
    _classPrivateFieldSet(this, _connection3, options.connection);
    _classPrivateFieldSet(this, _pollingOptions2, options.pollingOptions);
    this.jobInfo = options.jobInfo;
    _classPrivateFieldSet(this, _jobData, new JobDataV2({
      createRequest: request => this.createIngestRequest(request),
      job: this
    }));
    // default error handler to keep the latest error
    this.on('error', error => _classPrivateFieldSet(this, _error2, error));
  }
  get id() {
    return this.jobInfo.id;
  }

  /**
   * Create a job representing a bulk operation in the org
   */
  async open() {
    try {
      var _this$jobInfo2, _this$jobInfo3, _this$jobInfo4, _this$jobInfo5, _this$jobInfo6;
      this.jobInfo = await this.createIngestRequest({
        method: 'POST',
        path: '',
        body: _JSON$stringify({
          assignmentRuleId: (_this$jobInfo2 = this.jobInfo) === null || _this$jobInfo2 === void 0 ? void 0 : _this$jobInfo2.assignmentRuleId,
          externalIdFieldName: (_this$jobInfo3 = this.jobInfo) === null || _this$jobInfo3 === void 0 ? void 0 : _this$jobInfo3.externalIdFieldName,
          object: (_this$jobInfo4 = this.jobInfo) === null || _this$jobInfo4 === void 0 ? void 0 : _this$jobInfo4.object,
          operation: (_this$jobInfo5 = this.jobInfo) === null || _this$jobInfo5 === void 0 ? void 0 : _this$jobInfo5.operation,
          lineEnding: (_this$jobInfo6 = this.jobInfo) === null || _this$jobInfo6 === void 0 ? void 0 : _this$jobInfo6.lineEnding
        }),
        headers: {
          'Content-Type': 'application/json; charset=utf-8'
        },
        responseType: 'application/json'
      });
      this.emit('open');
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /** Upload data for a job in CSV format
   *
   *  @param input CSV as a string, or array of records or readable stream
   */
  async uploadData(input) {
    await _classPrivateFieldGet(this, _jobData).execute(input);
  }
  async getAllResults() {
    const [successfulResults, failedResults, unprocessedRecords] = await _Promise.all([this.getSuccessfulResults(), this.getFailedResults(), this.getUnprocessedRecords()]);
    return {
      successfulResults,
      failedResults,
      unprocessedRecords
    };
  }

  /**
   * Close opened job
   */
  async close() {
    try {
      const state = 'UploadComplete';
      this.jobInfo = await this.createIngestRequest({
        method: 'PATCH',
        path: `/${this.jobInfo.id}`,
        body: _JSON$stringify({
          state
        }),
        headers: {
          'Content-Type': 'application/json; charset=utf-8'
        },
        responseType: 'application/json'
      });
      this.emit('uploadcomplete');
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * Set the status to abort
   */
  async abort() {
    try {
      const state = 'Aborted';
      this.jobInfo = await this.createIngestRequest({
        method: 'PATCH',
        path: `/${this.jobInfo.id}`,
        body: _JSON$stringify({
          state
        }),
        headers: {
          'Content-Type': 'application/json; charset=utf-8'
        },
        responseType: 'application/json'
      });
      this.emit('aborted');
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }

  /**
   * Poll for the state of the processing for the job.
   *
   * This method will only throw after a timeout. To capture a
   * job failure while polling you must set a listener for the
   * `failed` event before calling it:
   *
   * job.on('failed', (err) => console.error(err))
   * await job.poll()
   *
   * @param interval Polling interval in milliseconds
   * @param timeout Polling timeout in milliseconds
   * @returns {Promise<void>} A promise that resolves when the job finishes successfully
   */
  async poll(interval = _classPrivateFieldGet(this, _pollingOptions2).pollInterval, timeout = _classPrivateFieldGet(this, _pollingOptions2).pollTimeout) {
    const jobId = getJobIdOrError(this.jobInfo);
    const startTime = _Date$now();
    while (startTime + timeout > _Date$now()) {
      try {
        const res = await this.check();
        switch (res.state) {
          case 'Open':
            throw new Error('Job has not been started');
          case 'Aborted':
            throw new Error('Job has been aborted');
          case 'UploadComplete':
          case 'InProgress':
            await delay(interval);
            break;
          case 'Failed':
            this.emit('failed', new Error('Ingest job failed to complete.'));
            return;
          case 'JobComplete':
            this.emit('jobcomplete');
            return;
        }
      } catch (err) {
        this.emit('error', err);
        throw err;
      }
    }
    const timeoutError = new JobPollingTimeoutError(`Polling timed out after ${timeout}ms. Job Id = ${jobId}`, jobId);
    this.emit('error', timeoutError);
    throw timeoutError;
  }

  /**
   * Check the latest batch status in server
   */
  async check() {
    try {
      const jobInfo = await this.createIngestRequest({
        method: 'GET',
        path: `/${getJobIdOrError(this.jobInfo)}`,
        responseType: 'application/json'
      });
      this.jobInfo = jobInfo;
      return jobInfo;
    } catch (err) {
      this.emit('error', err);
      throw err;
    }
  }
  async getSuccessfulResults() {
    if (_classPrivateFieldGet(this, _bulkJobSuccessfulResults)) {
      return _classPrivateFieldGet(this, _bulkJobSuccessfulResults);
    }
    const results = await this.createIngestRequest({
      method: 'GET',
      path: `/${getJobIdOrError(this.jobInfo)}/successfulResults`,
      responseType: 'text/csv'
    });
    _classPrivateFieldSet(this, _bulkJobSuccessfulResults, results !== null && results !== void 0 ? results : []);
    return _classPrivateFieldGet(this, _bulkJobSuccessfulResults);
  }
  async getFailedResults() {
    if (_classPrivateFieldGet(this, _bulkJobFailedResults)) {
      return _classPrivateFieldGet(this, _bulkJobFailedResults);
    }
    const results = await this.createIngestRequest({
      method: 'GET',
      path: `/${getJobIdOrError(this.jobInfo)}/failedResults`,
      responseType: 'text/csv'
    });
    _classPrivateFieldSet(this, _bulkJobFailedResults, results !== null && results !== void 0 ? results : []);
    return _classPrivateFieldGet(this, _bulkJobFailedResults);
  }
  async getUnprocessedRecords() {
    if (_classPrivateFieldGet(this, _bulkJobUnprocessedRecords)) {
      return _classPrivateFieldGet(this, _bulkJobUnprocessedRecords);
    }
    const results = await this.createIngestRequest({
      method: 'GET',
      path: `/${getJobIdOrError(this.jobInfo)}/unprocessedrecords`,
      responseType: 'text/csv'
    });
    _classPrivateFieldSet(this, _bulkJobUnprocessedRecords, results !== null && results !== void 0 ? results : []);
    return _classPrivateFieldGet(this, _bulkJobUnprocessedRecords);
  }

  /**
   * Deletes an ingest job.
   */
  async delete() {
    return this.createIngestRequest({
      method: 'DELETE',
      path: `/${getJobIdOrError(this.jobInfo)}`
    });
  }
  createIngestRequest(request) {
    const {
      path,
      responseType
    } = request;
    const baseUrl = [_classPrivateFieldGet(this, _connection3).instanceUrl, 'services/data', `v${_classPrivateFieldGet(this, _connection3).version}`, 'jobs/ingest'].join('/');
    return new BulkApiV2(_classPrivateFieldGet(this, _connection3), {
      responseType
    }).request(_objectSpread(_objectSpread({}, request), {}, {
      url: baseUrl + path
    }));
  }
}
var _job = new _WeakMap();
var _uploadStream = new _WeakMap();
var _downloadStream = new _WeakMap();
var _dataStream = new _WeakMap();
var _result = new _WeakMap();
class JobDataV2 extends Writable {
  /**
   *
   */
  constructor(options) {
    super({
      objectMode: true
    });
    _job.set(this, {
      writable: true,
      value: void 0
    });
    _uploadStream.set(this, {
      writable: true,
      value: void 0
    });
    _downloadStream.set(this, {
      writable: true,
      value: void 0
    });
    _dataStream.set(this, {
      writable: true,
      value: void 0
    });
    _result.set(this, {
      writable: true,
      value: void 0
    });
    const createRequest = options.createRequest;
    _classPrivateFieldSet(this, _job, options.job);
    _classPrivateFieldSet(this, _uploadStream, new Serializable());
    _classPrivateFieldSet(this, _downloadStream, new Parsable());
    const converterOptions = {
      nullValue: '#N/A'
    };
    const uploadDataStream = _classPrivateFieldGet(this, _uploadStream).stream('csv', converterOptions);
    const downloadDataStream = _classPrivateFieldGet(this, _downloadStream).stream('csv', converterOptions);
    _classPrivateFieldSet(this, _dataStream, concatStreamsAsDuplex(uploadDataStream, downloadDataStream));
    this.on('finish', () => _classPrivateFieldGet(this, _uploadStream).end());
    uploadDataStream.once('readable', () => {
      try {
        var _classPrivateFieldGet2;
        // pipe upload data to batch API request stream
        const req = createRequest({
          method: 'PUT',
          path: `/${(_classPrivateFieldGet2 = _classPrivateFieldGet(this, _job).jobInfo) === null || _classPrivateFieldGet2 === void 0 ? void 0 : _classPrivateFieldGet2.id}/batches`,
          headers: {
            'Content-Type': 'text/csv'
          },
          responseType: 'application/json'
        });
        (async () => {
          try {
            const res = await req;
            this.emit('response', res);
          } catch (err) {
            this.emit('error', err);
          }
        })();
        uploadDataStream.pipe(req.stream());
      } catch (err) {
        this.emit('error', err);
      }
    });
  }
  _write(record_, enc, cb) {
    const {
        Id,
        type,
        attributes
      } = record_,
      rrec = _objectWithoutProperties(record_, ["Id", "type", "attributes"]);
    let record;
    switch (_classPrivateFieldGet(this, _job).jobInfo.operation) {
      case 'insert':
        record = rrec;
        break;
      case 'delete':
      case 'hardDelete':
        record = {
          Id
        };
        break;
      default:
        record = _objectSpread({
          Id
        }, rrec);
    }
    _classPrivateFieldGet(this, _uploadStream).write(record, enc, cb);
  }

  /**
   * Returns duplex stream which accepts CSV data input and batch result output
   */
  stream() {
    return _classPrivateFieldGet(this, _dataStream);
  }

  /**
   * Execute batch operation
   */
  execute(input) {
    if (_classPrivateFieldGet(this, _result)) {
      throw new Error('Data can only be uploaded to a job once.');
    }
    _classPrivateFieldSet(this, _result, new _Promise((resolve, reject) => {
      this.once('response', () => resolve());
      this.once('error', reject);
    }));
    if (isObject(input) && 'pipe' in input && isFunction(input.pipe)) {
      // if input has stream.Readable interface
      input.pipe(_classPrivateFieldGet(this, _dataStream));
    } else {
      if (_Array$isArray(input)) {
        for (const record of input) {
          for (const key of _Object$keys(record)) {
            if (typeof record[key] === 'boolean') {
              record[key] = String(record[key]);
            }
          }
          this.write(record);
        }
        this.end();
      } else if (typeof input === 'string') {
        _classPrivateFieldGet(this, _dataStream).write(input, 'utf8');
        _classPrivateFieldGet(this, _dataStream).end();
      }
    }
    return this;
  }

  /**
   * Promise/A+ interface
   * Delegate to promise, return promise instance for batch result
   */
  then(onResolved, onReject) {
    if (_classPrivateFieldGet(this, _result) === undefined) {
      this.execute();
    }
    return _classPrivateFieldGet(this, _result).then(onResolved, onReject);
  }
}
function getJobIdOrError(jobInfo) {
  const jobId = jobInfo === null || jobInfo === void 0 ? void 0 : jobInfo.id;
  if (jobId === undefined) {
    throw new Error('No job id, maybe you need to call `job.open()` first.');
  }
  return jobId;
}
function delay(ms) {
  return new _Promise(resolve => _setTimeout(resolve, ms));
}

/*--------------------------------------------*/
/*
 * Register hook in connection instantiation for dynamically adding this API module features
 */
registerModule('bulk', conn => new Bulk(conn));
registerModule('bulk2', conn => new BulkV2(conn));
export default Bulk;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJXcml0YWJsZSIsImpvaW5TdHJlYW1zIiwiU2VyaWFsaXphYmxlIiwiUGFyc2FibGUiLCJIdHRwQXBpIiwicmVnaXN0ZXJNb2R1bGUiLCJjb25jYXRTdHJlYW1zQXNEdXBsZXgiLCJpc0Z1bmN0aW9uIiwiaXNPYmplY3QiLCJKb2IiLCJjb25zdHJ1Y3RvciIsImJ1bGsiLCJ0eXBlIiwib3BlcmF0aW9uIiwib3B0aW9ucyIsImpvYklkIiwiX2RlZmluZVByb3BlcnR5IiwiX2J1bGsiLCJpZCIsInN0YXRlIiwiX2JhdGNoZXMiLCJvbiIsImVycm9yIiwiX2Vycm9yIiwiaW5mbyIsIl9qb2JJbmZvIiwiY2hlY2siLCJvcGVuIiwiRXJyb3IiLCJfY29udGV4dCIsInRvTG93ZXJDYXNlIiwiYm9keSIsIl90cmltSW5zdGFuY2VQcm9wZXJ0eSIsImV4dElkRmllbGQiLCJjb25jdXJyZW5jeU1vZGUiLCJhc3NpZ25tZW50UnVsZUlkIiwiY2FsbCIsInJlcyIsIl9yZXF1ZXN0IiwibWV0aG9kIiwicGF0aCIsImhlYWRlcnMiLCJyZXNwb25zZVR5cGUiLCJlbWl0Iiwiam9iSW5mbyIsImVyciIsImNyZWF0ZUJhdGNoIiwiYmF0Y2giLCJCYXRjaCIsImJhdGNoSWQiLCJsb2dnZXIiLCJfbG9nZ2VyIiwicmVhZHkiLCJkZWJ1ZyIsIm9iamVjdCIsIl9Qcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJsaXN0IiwiYmF0Y2hJbmZvTGlzdCIsImJhdGNoSW5mbyIsIl9BcnJheSRpc0FycmF5IiwiY2xvc2UiLCJfY2hhbmdlU3RhdGUiLCJhYm9ydCIsIl9jb250ZXh0MiIsIlBvbGxpbmdUaW1lb3V0RXJyb3IiLCJtZXNzYWdlIiwibmFtZSIsIkpvYlBvbGxpbmdUaW1lb3V0RXJyb3IiLCJqb2IiLCJvYmplY3RNb2RlIiwiZXhlY3V0ZSIsImNvbnZlcnRlck9wdGlvbnMiLCJudWxsVmFsdWUiLCJ1cGxvYWRTdHJlYW0iLCJfdXBsb2FkU3RyZWFtIiwidXBsb2FkRGF0YVN0cmVhbSIsInN0cmVhbSIsImRvd25sb2FkU3RyZWFtIiwiX2Rvd25sb2FkU3RyZWFtIiwiZG93bmxvYWREYXRhU3RyZWFtIiwiZW5kIiwib25jZSIsInBpcGUiLCJfY3JlYXRlUmVxdWVzdFN0cmVhbSIsIl9kYXRhU3RyZWFtIiwicmVxIiwiX3dyaXRlIiwicmVjb3JkXyIsImVuYyIsImNiIiwiSWQiLCJhdHRyaWJ1dGVzIiwicnJlYyIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsInJlY29yZCIsIl9vYmplY3RTcHJlYWQiLCJ3cml0ZSIsImlucHV0IiwiX3Jlc3VsdCIsInJlamVjdCIsImtleSIsIl9PYmplY3Qka2V5cyIsIlN0cmluZyIsIm9uUmVzb2x2ZWQiLCJvblJlamVjdCIsInBvbGwiLCJpbnRlcnZhbCIsInRpbWVvdXQiLCJzdGFydFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsIm5vdyIsIl9wYXJzZUludCIsIm51bWJlclJlY29yZHNQcm9jZXNzZWQiLCJyZXRyaWV2ZSIsInN0YXRlTWVzc2FnZSIsIl9zZXRUaW1lb3V0IiwicmVzcCIsInJlc3VsdHMiLCJfY29udGV4dDMiLCJyZXN1bHRJZCIsInJlc3VsdCIsIl9tYXBJbnN0YW5jZVByb3BlcnR5IiwicmV0Iiwic3VjY2VzcyIsIlN1Y2Nlc3MiLCJlcnJvcnMiLCJyZXN1bHRTdHJlYW0iLCJyZXN1bHREYXRhU3RyZWFtIiwiQnVsa0FwaSIsImJlZm9yZVNlbmQiLCJyZXF1ZXN0IiwiX3RoaXMkX2Nvbm4kYWNjZXNzVG9rIiwiX2Nvbm4iLCJhY2Nlc3NUb2tlbiIsImlzU2Vzc2lvbkV4cGlyZWQiLCJyZXNwb25zZSIsInN0YXR1c0NvZGUiLCJ0ZXN0IiwiaGFzRXJyb3JJblJlc3BvbnNlQm9keSIsInBhcnNlRXJyb3IiLCJlcnJvckNvZGUiLCJleGNlcHRpb25Db2RlIiwiZXhjZXB0aW9uTWVzc2FnZSIsIkJ1bGtBcGlWMiIsIkJ1bGsiLCJjb25uIiwicmVxdWVzdF8iLCJycmVxIiwiYmFzZVVybCIsImluc3RhbmNlVXJsIiwidmVyc2lvbiIsImpvaW4iLCJ1cmwiLCJsb2FkIiwib3B0aW9uc09ySW5wdXQiLCJjcmVhdGVKb2IiLCJjbGVhbnVwIiwiY2xlYW51cE9uRXJyb3IiLCJwb2xsSW50ZXJ2YWwiLCJwb2xsVGltZW91dCIsInF1ZXJ5Iiwic29xbCIsIm0iLCJyZXBsYWNlIiwibWF0Y2giLCJyZWNvcmRTdHJlYW0iLCJkYXRhU3RyZWFtIiwic3RyZWFtcyIsIl9jb25uZWN0aW9uIiwiX1dlYWtNYXAiLCJCdWxrVjIiLCJjb25uZWN0aW9uIiwic2V0Iiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9jbGFzc1ByaXZhdGVGaWVsZFNldCIsIkluZ2VzdEpvYlYyIiwiX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IiwicG9sbGluZ09wdGlvbnMiLCJsb2FkQW5kV2FpdEZvclJlc3VsdHMiLCJ1cGxvYWREYXRhIiwiZ2V0QWxsUmVzdWx0cyIsImRlbGV0ZSIsImNhdGNoIiwiaWdub3JlZCIsInF1ZXJ5Sm9iIiwiUXVlcnlKb2JWMiIsInNjYW5BbGwiLCJnZXRSZXN1bHRzIiwiX2Nvbm5lY3Rpb24yIiwiX29wZXJhdGlvbiIsIl9xdWVyeSIsIl9wb2xsaW5nT3B0aW9ucyIsIl9xdWVyeVJlc3VsdHMiLCJjcmVhdGVRdWVyeVJlcXVlc3QiLCJfSlNPTiRzdHJpbmdpZnkiLCJfdGhpcyRqb2JJbmZvIiwiZ2V0Sm9iSWRPckVycm9yIiwiX0RhdGUkbm93IiwiZGVsYXkiLCJ0aW1lb3V0RXJyb3IiLCJodHRwQXBpIiwibG9jYXRvciIsImdldFJlc3VsdHNVcmwiLCJmaW5pc2hlZCIsIl9jb250ZXh0NCIsIm5leHRSZXN1bHRzIiwiQWNjZXB0IiwiX2NvbmNhdEluc3RhbmNlUHJvcGVydHkiLCJfY29ubmVjdGlvbjMiLCJfcG9sbGluZ09wdGlvbnMyIiwiX2pvYkRhdGEiLCJfYnVsa0pvYlN1Y2Nlc3NmdWxSZXN1bHRzIiwiX2J1bGtKb2JGYWlsZWRSZXN1bHRzIiwiX2J1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHMiLCJfZXJyb3IyIiwiSm9iRGF0YVYyIiwiY3JlYXRlUmVxdWVzdCIsImNyZWF0ZUluZ2VzdFJlcXVlc3QiLCJfdGhpcyRqb2JJbmZvMiIsIl90aGlzJGpvYkluZm8zIiwiX3RoaXMkam9iSW5mbzQiLCJfdGhpcyRqb2JJbmZvNSIsIl90aGlzJGpvYkluZm82IiwiZXh0ZXJuYWxJZEZpZWxkTmFtZSIsImxpbmVFbmRpbmciLCJzdWNjZXNzZnVsUmVzdWx0cyIsImZhaWxlZFJlc3VsdHMiLCJ1bnByb2Nlc3NlZFJlY29yZHMiLCJhbGwiLCJnZXRTdWNjZXNzZnVsUmVzdWx0cyIsImdldEZhaWxlZFJlc3VsdHMiLCJnZXRVbnByb2Nlc3NlZFJlY29yZHMiLCJfam9iIiwiX2NsYXNzUHJpdmF0ZUZpZWxkR2V0MiIsInVuZGVmaW5lZCIsIm1zIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2FwaS9idWxrLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgTWFuYWdlcyBTYWxlc2ZvcmNlIEJ1bGsgQVBJIHJlbGF0ZWQgb3BlcmF0aW9uc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBEdXBsZXgsIFJlYWRhYmxlLCBXcml0YWJsZSB9IGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgam9pblN0cmVhbXMgZnJvbSAnbXVsdGlzdHJlYW0nO1xuaW1wb3J0IENvbm5lY3Rpb24gZnJvbSAnLi4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIFBhcnNhYmxlIH0gZnJvbSAnLi4vcmVjb3JkLXN0cmVhbSc7XG5pbXBvcnQgSHR0cEFwaSBmcm9tICcuLi9odHRwLWFwaSc7XG5pbXBvcnQgeyBTdHJlYW1Qcm9taXNlIH0gZnJvbSAnLi4vdXRpbC9wcm9taXNlJztcbmltcG9ydCB7IHJlZ2lzdGVyTW9kdWxlIH0gZnJvbSAnLi4vanNmb3JjZSc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi91dGlsL2xvZ2dlcic7XG5pbXBvcnQgeyBjb25jYXRTdHJlYW1zQXNEdXBsZXggfSBmcm9tICcuLi91dGlsL3N0cmVhbSc7XG5pbXBvcnQge1xuICBIdHRwTWV0aG9kcyxcbiAgSHR0cFJlcXVlc3QsXG4gIEh0dHBSZXNwb25zZSxcbiAgUmVjb3JkLFxuICBTY2hlbWEsXG4gIE9wdGlvbmFsLFxufSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc09iamVjdCB9IGZyb20gJy4uL3V0aWwvZnVuY3Rpb24nO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZXhwb3J0IHR5cGUgQnVsa09wZXJhdGlvbiA9XG4gIHwgJ2luc2VydCdcbiAgfCAndXBkYXRlJ1xuICB8ICd1cHNlcnQnXG4gIHwgJ2RlbGV0ZSdcbiAgfCAnaGFyZERlbGV0ZSdcbiAgfCAncXVlcnknXG4gIHwgJ3F1ZXJ5QWxsJztcblxuZXhwb3J0IHR5cGUgSW5nZXN0T3BlcmF0aW9uID0gRXhjbHVkZTxCdWxrT3BlcmF0aW9uLCAncXVlcnknIHwgJ3F1ZXJ5QWxsJz47XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5T3BlcmF0aW9uID0gRXh0cmFjdDxCdWxrT3BlcmF0aW9uLCAncXVlcnknIHwgJ3F1ZXJ5QWxsJz47XG5cbmV4cG9ydCB0eXBlIEJ1bGtPcHRpb25zID0ge1xuICBleHRJZEZpZWxkPzogc3RyaW5nO1xuICBjb25jdXJyZW5jeU1vZGU/OiAnU2VyaWFsJyB8ICdQYXJhbGxlbCc7XG4gIGFzc2lnbm1lbnRSdWxlSWQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBKb2JTdGF0ZSA9ICdPcGVuJyB8ICdDbG9zZWQnIHwgJ0Fib3J0ZWQnIHwgJ0ZhaWxlZCcgfCAnVW5rbm93bic7XG5cbmV4cG9ydCB0eXBlIEpvYlN0YXRlVjIgPVxuICB8IEV4Y2x1ZGU8Sm9iU3RhdGUsICdDbG9zZWQnIHwgJ1Vua25vd24nPlxuICB8ICdVcGxvYWRDb21wbGV0ZSdcbiAgfCAnSW5Qcm9ncmVzcydcbiAgfCAnSm9iQ29tcGxldGUnO1xuXG5leHBvcnQgdHlwZSBKb2JJbmZvID0ge1xuICBpZDogc3RyaW5nO1xuICBvYmplY3Q6IHN0cmluZztcbiAgb3BlcmF0aW9uOiBCdWxrT3BlcmF0aW9uO1xuICBzdGF0ZTogSm9iU3RhdGU7XG59O1xuXG5leHBvcnQgdHlwZSBKb2JJbmZvVjIgPSB7XG4gIGFwaVZlcnNpb246IHN0cmluZztcbiAgYXNzaWdubWVudFJ1bGVJZD86IHN0cmluZztcbiAgY29sdW1uRGVsaW1pdGVyOlxuICAgIHwgJ0JBQ0tRVU9URSdcbiAgICB8ICdDQVJFVCdcbiAgICB8ICdDT01NQSdcbiAgICB8ICdQSVBFJ1xuICAgIHwgJ1NFTUlDT0xPTidcbiAgICB8ICdUQUInO1xuICBjb25jdXJyZW5jeU1vZGU6ICdQYXJhbGxlbCc7XG4gIGNvbnRlbnRUeXBlOiAnQ1NWJztcbiAgY29udGVudFVybDogc3RyaW5nO1xuICBjcmVhdGVkQnlJZDogc3RyaW5nO1xuICBjcmVhdGVkRGF0ZTogc3RyaW5nO1xuICBleHRlcm5hbElkRmllbGROYW1lPzogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICBqb2JUeXBlOiAnQmlnT2JqZWN0SW5nZXN0JyB8ICdDbGFzc2ljJyB8ICdWMkluZ2VzdCc7XG4gIGxpbmVFbmRpbmc6ICdMRicgfCAnQ1JMRic7XG4gIG9iamVjdDogc3RyaW5nO1xuICBvcGVyYXRpb246IEJ1bGtPcGVyYXRpb247XG4gIHN0YXRlOiBKb2JTdGF0ZVYyO1xuICBzeXN0ZW1Nb2RzdGFtcDogc3RyaW5nO1xuICBudW1iZXJSZWNvcmRzUHJvY2Vzc2VkPzogbnVtYmVyO1xuICBudW1iZXJSZWNvcmRzRmFpbGVkPzogbnVtYmVyO1xufTtcblxudHlwZSBKb2JJbmZvUmVzcG9uc2UgPSB7XG4gIGpvYkluZm86IEpvYkluZm87XG59O1xuXG5leHBvcnQgdHlwZSBCYXRjaFN0YXRlID1cbiAgfCAnUXVldWVkJ1xuICB8ICdJblByb2dyZXNzJ1xuICB8ICdDb21wbGV0ZWQnXG4gIHwgJ0ZhaWxlZCdcbiAgfCAnTm90UHJvY2Vzc2VkJztcblxuZXhwb3J0IHR5cGUgQmF0Y2hJbmZvID0ge1xuICBpZDogc3RyaW5nO1xuICBqb2JJZDogc3RyaW5nO1xuICBzdGF0ZTogQmF0Y2hTdGF0ZTtcbiAgc3RhdGVNZXNzYWdlOiBzdHJpbmc7XG4gIG51bWJlclJlY29yZHNQcm9jZXNzZWQ6IHN0cmluZztcbiAgbnVtYmVyUmVjb3Jkc0ZhaWxlZDogc3RyaW5nO1xuICB0b3RhbFByb2Nlc3NpbmdUaW1lOiBzdHJpbmc7XG59O1xuXG50eXBlIEJhdGNoSW5mb1Jlc3BvbnNlID0ge1xuICBiYXRjaEluZm86IEJhdGNoSW5mbztcbn07XG5cbnR5cGUgQmF0Y2hJbmZvTGlzdFJlc3BvbnNlID0ge1xuICBiYXRjaEluZm9MaXN0OiB7XG4gICAgYmF0Y2hJbmZvOiBCYXRjaEluZm8gfCBCYXRjaEluZm9bXTtcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIEJ1bGtRdWVyeUJhdGNoUmVzdWx0ID0gQXJyYXk8e1xuICBpZDogc3RyaW5nO1xuICBiYXRjaElkOiBzdHJpbmc7XG4gIGpvYklkOiBzdHJpbmc7XG59PjtcblxuZXhwb3J0IHR5cGUgQnVsa0luZ2VzdEJhdGNoUmVzdWx0ID0gQXJyYXk8e1xuICBpZDogc3RyaW5nIHwgbnVsbDtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbn0+O1xuXG5leHBvcnQgdHlwZSBCYXRjaFJlc3VsdDxPcHIgZXh0ZW5kcyBCdWxrT3BlcmF0aW9uPiA9IE9wciBleHRlbmRzXG4gIHwgJ3F1ZXJ5J1xuICB8ICdxdWVyeUFsbCdcbiAgPyBCdWxrUXVlcnlCYXRjaFJlc3VsdFxuICA6IEJ1bGtJbmdlc3RCYXRjaFJlc3VsdDtcblxudHlwZSBCdWxrSW5nZXN0UmVzdWx0UmVzcG9uc2UgPSBBcnJheTx7XG4gIElkOiBzdHJpbmc7XG4gIFN1Y2Nlc3M6IHN0cmluZztcbiAgRXJyb3I6IHN0cmluZztcbn0+O1xuXG50eXBlIEJ1bGtRdWVyeVJlc3VsdFJlc3BvbnNlID0ge1xuICAncmVzdWx0LWxpc3QnOiB7XG4gICAgcmVzdWx0OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgfTtcbn07XG5cbnR5cGUgQnVsa1JlcXVlc3QgPSB7XG4gIG1ldGhvZDogSHR0cE1ldGhvZHM7XG4gIHBhdGg6IHN0cmluZztcbiAgYm9keT86IHN0cmluZztcbiAgaGVhZGVycz86IHsgW25hbWU6IHN0cmluZ106IHN0cmluZyB9O1xuICByZXNwb25zZVR5cGU/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPFMgZXh0ZW5kcyBTY2hlbWE+ID0gQXJyYXk8XG4gIHtcbiAgICBzZl9fQ3JlYXRlZDogJ3RydWUnIHwgJ2ZhbHNlJztcbiAgICBzZl9fSWQ6IHN0cmluZztcbiAgfSAmIFNcbj47XG5cbmV4cG9ydCB0eXBlIEluZ2VzdEpvYlYyRmFpbGVkUmVzdWx0czxTIGV4dGVuZHMgU2NoZW1hPiA9IEFycmF5PFxuICB7XG4gICAgc2ZfX0Vycm9yOiBzdHJpbmc7XG4gICAgc2ZfX0lkOiBzdHJpbmc7XG4gIH0gJiBTXG4+O1xuXG5leHBvcnQgdHlwZSBJbmdlc3RKb2JWMlVucHJvY2Vzc2VkUmVjb3JkczxTIGV4dGVuZHMgU2NoZW1hPiA9IEFycmF5PFM+O1xuXG5leHBvcnQgdHlwZSBJbmdlc3RKb2JWMlJlc3VsdHM8UyBleHRlbmRzIFNjaGVtYT4gPSB7XG4gIHN1Y2Nlc3NmdWxSZXN1bHRzOiBJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPFM+O1xuICBmYWlsZWRSZXN1bHRzOiBJbmdlc3RKb2JWMkZhaWxlZFJlc3VsdHM8Uz47XG4gIHVucHJvY2Vzc2VkUmVjb3JkczogSW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM8Uz47XG59O1xuXG50eXBlIE5ld0luZ2VzdEpvYk9wdGlvbnMgPSBSZXF1aXJlZDxQaWNrPEpvYkluZm9WMiwgJ29iamVjdCcgfCAnb3BlcmF0aW9uJz4+ICZcbiAgUGFydGlhbDxcbiAgICBQaWNrPEpvYkluZm9WMiwgJ2Fzc2lnbm1lbnRSdWxlSWQnIHwgJ2V4dGVybmFsSWRGaWVsZE5hbWUnIHwgJ2xpbmVFbmRpbmcnPlxuICA+O1xuXG50eXBlIEV4aXN0aW5nSW5nZXN0Sm9iT3B0aW9ucyA9IFBpY2s8Sm9iSW5mb1YyLCAnaWQnPjtcblxudHlwZSBDcmVhdGVJbmdlc3RKb2JWMlJlcXVlc3QgPSA8VD4ocmVxdWVzdDogQnVsa1JlcXVlc3QpID0+IFN0cmVhbVByb21pc2U8VD47XG5cbnR5cGUgQ3JlYXRlSW5nZXN0Sm9iVjJPcHRpb25zPFMgZXh0ZW5kcyBTY2hlbWE+ID0ge1xuICBjb25uZWN0aW9uOiBDb25uZWN0aW9uPFM+O1xuICBqb2JJbmZvOiBOZXdJbmdlc3RKb2JPcHRpb25zIHwgRXhpc3RpbmdJbmdlc3RKb2JPcHRpb25zO1xuICBwb2xsaW5nT3B0aW9uczogQnVsa1YyUG9sbGluZ09wdGlvbnM7XG59O1xuXG50eXBlIENyZWF0ZUpvYkRhdGFWMk9wdGlvbnM8UyBleHRlbmRzIFNjaGVtYSwgT3ByIGV4dGVuZHMgSW5nZXN0T3BlcmF0aW9uPiA9IHtcbiAgam9iOiBJbmdlc3RKb2JWMjxTLCBPcHI+O1xuICBjcmVhdGVSZXF1ZXN0OiBDcmVhdGVJbmdlc3RKb2JWMlJlcXVlc3Q7XG59O1xuXG50eXBlIENyZWF0ZVF1ZXJ5Sm9iVjJPcHRpb25zPFMgZXh0ZW5kcyBTY2hlbWE+ID0ge1xuICBjb25uZWN0aW9uOiBDb25uZWN0aW9uPFM+O1xuICBvcGVyYXRpb246IFF1ZXJ5T3BlcmF0aW9uO1xuICBxdWVyeTogc3RyaW5nO1xuICBwb2xsaW5nT3B0aW9uczogQnVsa1YyUG9sbGluZ09wdGlvbnM7XG59O1xuXG50eXBlIEJ1bGtWMlBvbGxpbmdPcHRpb25zID0ge1xuICBwb2xsSW50ZXJ2YWw6IG51bWJlcjtcbiAgcG9sbFRpbWVvdXQ6IG51bWJlcjtcbn07XG5cbi8qKlxuICogQ2xhc3MgZm9yIEJ1bGsgQVBJIEpvYlxuICovXG5leHBvcnQgY2xhc3MgSm9iPFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBPcHIgZXh0ZW5kcyBCdWxrT3BlcmF0aW9uXG4+IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgdHlwZTogc3RyaW5nIHwgbnVsbDtcbiAgb3BlcmF0aW9uOiBPcHIgfCBudWxsO1xuICBvcHRpb25zOiBCdWxrT3B0aW9ucztcbiAgaWQ6IHN0cmluZyB8IG51bGw7XG4gIHN0YXRlOiBKb2JTdGF0ZTtcbiAgX2J1bGs6IEJ1bGs8Uz47XG4gIF9iYXRjaGVzOiB7IFtpZDogc3RyaW5nXTogQmF0Y2g8UywgT3ByPiB9O1xuICBfam9iSW5mbzogUHJvbWlzZTxKb2JJbmZvPiB8IHVuZGVmaW5lZDtcbiAgX2Vycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGJ1bGs6IEJ1bGs8Uz4sXG4gICAgdHlwZTogc3RyaW5nIHwgbnVsbCxcbiAgICBvcGVyYXRpb246IE9wciB8IG51bGwsXG4gICAgb3B0aW9uczogQnVsa09wdGlvbnMgfCBudWxsLFxuICAgIGpvYklkPzogc3RyaW5nLFxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2J1bGsgPSBidWxrO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzLmlkID0gam9iSWQgPz8gbnVsbDtcbiAgICB0aGlzLnN0YXRlID0gdGhpcy5pZCA/ICdPcGVuJyA6ICdVbmtub3duJztcbiAgICB0aGlzLl9iYXRjaGVzID0ge307XG4gICAgLy8gZGVmYXVsdCBlcnJvciBoYW5kbGVyIHRvIGtlZXAgdGhlIGxhdGVzdCBlcnJvclxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycm9yKSA9PiAodGhpcy5fZXJyb3IgPSBlcnJvcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBsYXRlc3Qgam9iSW5mbyBmcm9tIGNhY2hlXG4gICAqL1xuICBpbmZvKCkge1xuICAgIC8vIGlmIGNhY2hlIGlzIG5vdCBhdmFpbGFibGUsIGNoZWNrIHRoZSBsYXRlc3RcbiAgICBpZiAoIXRoaXMuX2pvYkluZm8pIHtcbiAgICAgIHRoaXMuX2pvYkluZm8gPSB0aGlzLmNoZWNrKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9qb2JJbmZvO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW4gbmV3IGpvYiBhbmQgZ2V0IGpvYmluZm9cbiAgICovXG4gIG9wZW4oKTogUHJvbWlzZTxKb2JJbmZvPiB7XG4gICAgY29uc3QgYnVsayA9IHRoaXMuX2J1bGs7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuICAgIC8vIGlmIHNvYmplY3QgdHlwZSAvIG9wZXJhdGlvbiBpcyBub3QgcHJvdmlkZWRcbiAgICBpZiAoIXRoaXMudHlwZSB8fCAhdGhpcy5vcGVyYXRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndHlwZSAvIG9wZXJhdGlvbiBpcyByZXF1aXJlZCB0byBvcGVuIGEgbmV3IGpvYicpO1xuICAgIH1cblxuICAgIC8vIGlmIG5vdCByZXF1ZXN0ZWQgb3BlbmluZyBqb2JcbiAgICBpZiAoIXRoaXMuX2pvYkluZm8pIHtcbiAgICAgIGxldCBvcGVyYXRpb24gPSB0aGlzLm9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2hhcmRkZWxldGUnKSB7XG4gICAgICAgIG9wZXJhdGlvbiA9ICdoYXJkRGVsZXRlJztcbiAgICAgIH1cbiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdxdWVyeWFsbCcpIHtcbiAgICAgICAgb3BlcmF0aW9uID0gJ3F1ZXJ5QWxsJztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvZHkgPSBgXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjxqb2JJbmZvICB4bWxucz1cImh0dHA6Ly93d3cuZm9yY2UuY29tLzIwMDkvMDYvYXN5bmNhcGkvZGF0YWxvYWRcIj5cbiAgPG9wZXJhdGlvbj4ke29wZXJhdGlvbn08L29wZXJhdGlvbj5cbiAgPG9iamVjdD4ke3RoaXMudHlwZX08L29iamVjdD5cbiAgJHtcbiAgICBvcHRpb25zLmV4dElkRmllbGRcbiAgICAgID8gYDxleHRlcm5hbElkRmllbGROYW1lPiR7b3B0aW9ucy5leHRJZEZpZWxkfTwvZXh0ZXJuYWxJZEZpZWxkTmFtZT5gXG4gICAgICA6ICcnXG4gIH1cbiAgJHtcbiAgICBvcHRpb25zLmNvbmN1cnJlbmN5TW9kZVxuICAgICAgPyBgPGNvbmN1cnJlbmN5TW9kZT4ke29wdGlvbnMuY29uY3VycmVuY3lNb2RlfTwvY29uY3VycmVuY3lNb2RlPmBcbiAgICAgIDogJydcbiAgfVxuICAke1xuICAgIG9wdGlvbnMuYXNzaWdubWVudFJ1bGVJZFxuICAgICAgPyBgPGFzc2lnbm1lbnRSdWxlSWQ+JHtvcHRpb25zLmFzc2lnbm1lbnRSdWxlSWR9PC9hc3NpZ25tZW50UnVsZUlkPmBcbiAgICAgIDogJydcbiAgfVxuICA8Y29udGVudFR5cGU+Q1NWPC9jb250ZW50VHlwZT5cbjwvam9iSW5mbz5cbiAgICAgIGAudHJpbSgpO1xuXG4gICAgICB0aGlzLl9qb2JJbmZvID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBidWxrLl9yZXF1ZXN0PEpvYkluZm9SZXNwb25zZT4oe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBwYXRoOiAnL2pvYicsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3htbDsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24veG1sJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmVtaXQoJ29wZW4nLCByZXMuam9iSW5mbyk7XG4gICAgICAgICAgdGhpcy5pZCA9IHJlcy5qb2JJbmZvLmlkO1xuICAgICAgICAgIHRoaXMuc3RhdGUgPSByZXMuam9iSW5mby5zdGF0ZTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpvYkluZm87XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgfSkoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2pvYkluZm87XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGJhdGNoIGluc3RhbmNlIGluIHRoZSBqb2JcbiAgICovXG4gIGNyZWF0ZUJhdGNoKCk6IEJhdGNoPFMsIE9wcj4ge1xuICAgIGNvbnN0IGJhdGNoID0gbmV3IEJhdGNoKHRoaXMpO1xuICAgIGJhdGNoLm9uKCdxdWV1ZScsICgpID0+IHtcbiAgICAgIHRoaXMuX2JhdGNoZXNbYmF0Y2guaWQhXSA9IGJhdGNoO1xuICAgIH0pO1xuICAgIHJldHVybiBiYXRjaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBiYXRjaCBpbnN0YW5jZSBzcGVjaWZpZWQgYnkgZ2l2ZW4gYmF0Y2ggSURcbiAgICovXG4gIGJhdGNoKGJhdGNoSWQ6IHN0cmluZyk6IEJhdGNoPFMsIE9wcj4ge1xuICAgIGxldCBiYXRjaCA9IHRoaXMuX2JhdGNoZXNbYmF0Y2hJZF07XG4gICAgaWYgKCFiYXRjaCkge1xuICAgICAgYmF0Y2ggPSBuZXcgQmF0Y2godGhpcywgYmF0Y2hJZCk7XG4gICAgICB0aGlzLl9iYXRjaGVzW2JhdGNoSWRdID0gYmF0Y2g7XG4gICAgfVxuICAgIHJldHVybiBiYXRjaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0aGUgbGF0ZXN0IGpvYiBzdGF0dXMgZnJvbSBzZXJ2ZXJcbiAgICovXG4gIGNoZWNrKCkge1xuICAgIGNvbnN0IGJ1bGsgPSB0aGlzLl9idWxrO1xuICAgIGNvbnN0IGxvZ2dlciA9IGJ1bGsuX2xvZ2dlcjtcblxuICAgIHRoaXMuX2pvYkluZm8gPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgam9iSWQgPSBhd2FpdCB0aGlzLnJlYWR5KCk7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBidWxrLl9yZXF1ZXN0PEpvYkluZm9SZXNwb25zZT4oe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiAnL2pvYi8nICsgam9iSWQsXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL3htbCcsXG4gICAgICB9KTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhyZXMuam9iSW5mbyk7XG4gICAgICB0aGlzLmlkID0gcmVzLmpvYkluZm8uaWQ7XG4gICAgICB0aGlzLnR5cGUgPSByZXMuam9iSW5mby5vYmplY3Q7XG4gICAgICB0aGlzLm9wZXJhdGlvbiA9IHJlcy5qb2JJbmZvLm9wZXJhdGlvbiBhcyBPcHI7XG4gICAgICB0aGlzLnN0YXRlID0gcmVzLmpvYkluZm8uc3RhdGU7XG4gICAgICByZXR1cm4gcmVzLmpvYkluZm87XG4gICAgfSkoKTtcblxuICAgIHJldHVybiB0aGlzLl9qb2JJbmZvO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgdGlsbCB0aGUgam9iIGlzIGFzc2lnbmVkIHRvIHNlcnZlclxuICAgKi9cbiAgcmVhZHkoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5pZFxuICAgICAgPyBQcm9taXNlLnJlc29sdmUodGhpcy5pZClcbiAgICAgIDogdGhpcy5vcGVuKCkudGhlbigoeyBpZCB9KSA9PiBpZCk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhbGwgcmVnaXN0ZXJlZCBiYXRjaCBpbmZvIGluIGpvYlxuICAgKi9cbiAgYXN5bmMgbGlzdCgpIHtcbiAgICBjb25zdCBidWxrID0gdGhpcy5fYnVsaztcbiAgICBjb25zdCBsb2dnZXIgPSBidWxrLl9sb2dnZXI7XG4gICAgY29uc3Qgam9iSWQgPSBhd2FpdCB0aGlzLnJlYWR5KCk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYnVsay5fcmVxdWVzdDxCYXRjaEluZm9MaXN0UmVzcG9uc2U+KHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXRoOiAnL2pvYi8nICsgam9iSWQgKyAnL2JhdGNoJyxcbiAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL3htbCcsXG4gICAgfSk7XG4gICAgbG9nZ2VyLmRlYnVnKHJlcy5iYXRjaEluZm9MaXN0LmJhdGNoSW5mbyk7XG4gICAgY29uc3QgYmF0Y2hJbmZvTGlzdCA9IEFycmF5LmlzQXJyYXkocmVzLmJhdGNoSW5mb0xpc3QuYmF0Y2hJbmZvKVxuICAgICAgPyByZXMuYmF0Y2hJbmZvTGlzdC5iYXRjaEluZm9cbiAgICAgIDogW3Jlcy5iYXRjaEluZm9MaXN0LmJhdGNoSW5mb107XG4gICAgcmV0dXJuIGJhdGNoSW5mb0xpc3Q7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2Ugb3BlbmVkIGpvYlxuICAgKi9cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBqb2JJbmZvID0gYXdhaXQgdGhpcy5fY2hhbmdlU3RhdGUoJ0Nsb3NlZCcpO1xuICAgICAgdGhpcy5pZCA9IG51bGw7XG4gICAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgam9iSW5mbyk7XG4gICAgICByZXR1cm4gam9iSW5mbztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyB0byBhYm9ydFxuICAgKi9cbiAgYXN5bmMgYWJvcnQoKSB7XG4gICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBqb2JJbmZvID0gYXdhaXQgdGhpcy5fY2hhbmdlU3RhdGUoJ0Fib3J0ZWQnKTtcbiAgICAgIHRoaXMuaWQgPSBudWxsO1xuICAgICAgdGhpcy5lbWl0KCdhYm9ydCcsIGpvYkluZm8pO1xuICAgICAgcmV0dXJuIGpvYkluZm87XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9jaGFuZ2VTdGF0ZShzdGF0ZTogSm9iU3RhdGUpIHtcbiAgICBjb25zdCBidWxrID0gdGhpcy5fYnVsaztcbiAgICBjb25zdCBsb2dnZXIgPSBidWxrLl9sb2dnZXI7XG5cbiAgICB0aGlzLl9qb2JJbmZvID0gKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGpvYklkID0gYXdhaXQgdGhpcy5yZWFkeSgpO1xuICAgICAgY29uc3QgYm9keSA9IGAgXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbiAgPGpvYkluZm8geG1sbnM9XCJodHRwOi8vd3d3LmZvcmNlLmNvbS8yMDA5LzA2L2FzeW5jYXBpL2RhdGFsb2FkXCI+XG4gIDxzdGF0ZT4ke3N0YXRlfTwvc3RhdGU+XG48L2pvYkluZm8+XG4gICAgICBgLnRyaW0oKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGJ1bGsuX3JlcXVlc3Q8Sm9iSW5mb1Jlc3BvbnNlPih7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBwYXRoOiAnL2pvYi8nICsgam9iSWQsXG4gICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3htbDsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL3htbCcsXG4gICAgICB9KTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhyZXMuam9iSW5mbyk7XG4gICAgICB0aGlzLnN0YXRlID0gcmVzLmpvYkluZm8uc3RhdGU7XG4gICAgICByZXR1cm4gcmVzLmpvYkluZm87XG4gICAgfSkoKTtcbiAgICByZXR1cm4gdGhpcy5fam9iSW5mbztcbiAgfVxufVxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmNsYXNzIFBvbGxpbmdUaW1lb3V0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGpvYklkOiBzdHJpbmc7XG4gIGJhdGNoSWQ6IHN0cmluZztcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgam9iSWQ6IHN0cmluZywgYmF0Y2hJZDogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ1BvbGxpbmdUaW1lb3V0JztcbiAgICB0aGlzLmpvYklkID0gam9iSWQ7XG4gICAgdGhpcy5iYXRjaElkID0gYmF0Y2hJZDtcbiAgfVxufVxuXG5jbGFzcyBKb2JQb2xsaW5nVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBqb2JJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBqb2JJZDogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0pvYlBvbGxpbmdUaW1lb3V0JztcbiAgICB0aGlzLmpvYklkID0gam9iSWQ7XG4gIH1cbn1cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKipcbiAqIEJhdGNoIChleHRlbmRzIFdyaXRhYmxlKVxuICovXG5leHBvcnQgY2xhc3MgQmF0Y2g8XG4gIFMgZXh0ZW5kcyBTY2hlbWEsXG4gIE9wciBleHRlbmRzIEJ1bGtPcGVyYXRpb25cbj4gZXh0ZW5kcyBXcml0YWJsZSB7XG4gIGpvYjogSm9iPFMsIE9wcj47XG4gIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIF9idWxrOiBCdWxrPFM+O1xuICBfdXBsb2FkU3RyZWFtOiBTZXJpYWxpemFibGU7XG4gIF9kb3dubG9hZFN0cmVhbTogUGFyc2FibGU7XG4gIF9kYXRhU3RyZWFtOiBEdXBsZXg7XG4gIF9yZXN1bHQ6IFByb21pc2U8QmF0Y2hSZXN1bHQ8T3ByPj4gfCB1bmRlZmluZWQ7XG4gIF9lcnJvcjogRXJyb3IgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihqb2I6IEpvYjxTLCBPcHI+LCBpZD86IHN0cmluZykge1xuICAgIHN1cGVyKHsgb2JqZWN0TW9kZTogdHJ1ZSB9KTtcbiAgICB0aGlzLmpvYiA9IGpvYjtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5fYnVsayA9IGpvYi5fYnVsaztcblxuICAgIC8vIGRlZmF1bHQgZXJyb3IgaGFuZGxlciB0byBrZWVwIHRoZSBsYXRlc3QgZXJyb3JcbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnJvcikgPT4gKHRoaXMuX2Vycm9yID0gZXJyb3IpKTtcblxuICAgIC8vXG4gICAgLy8gc2V0dXAgZGF0YSBzdHJlYW1zXG4gICAgLy9cbiAgICBjb25zdCBjb252ZXJ0ZXJPcHRpb25zID0geyBudWxsVmFsdWU6ICcjTi9BJyB9O1xuICAgIGNvbnN0IHVwbG9hZFN0cmVhbSA9ICh0aGlzLl91cGxvYWRTdHJlYW0gPSBuZXcgU2VyaWFsaXphYmxlKCkpO1xuICAgIGNvbnN0IHVwbG9hZERhdGFTdHJlYW0gPSB1cGxvYWRTdHJlYW0uc3RyZWFtKCdjc3YnLCBjb252ZXJ0ZXJPcHRpb25zKTtcbiAgICBjb25zdCBkb3dubG9hZFN0cmVhbSA9ICh0aGlzLl9kb3dubG9hZFN0cmVhbSA9IG5ldyBQYXJzYWJsZSgpKTtcbiAgICBjb25zdCBkb3dubG9hZERhdGFTdHJlYW0gPSBkb3dubG9hZFN0cmVhbS5zdHJlYW0oJ2NzdicsIGNvbnZlcnRlck9wdGlvbnMpO1xuXG4gICAgdGhpcy5vbignZmluaXNoJywgKCkgPT4gdXBsb2FkU3RyZWFtLmVuZCgpKTtcbiAgICB1cGxvYWREYXRhU3RyZWFtLm9uY2UoJ3JlYWRhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gZW5zdXJlIHRoZSBqb2IgaXMgb3BlbmVkIGluIHNlcnZlciBvciBqb2IgaWQgaXMgYWxyZWFkeSBhc3NpZ25lZFxuICAgICAgICBhd2FpdCB0aGlzLmpvYi5yZWFkeSgpO1xuICAgICAgICAvLyBwaXBlIHVwbG9hZCBkYXRhIHRvIGJhdGNoIEFQSSByZXF1ZXN0IHN0cmVhbVxuICAgICAgICB1cGxvYWREYXRhU3RyZWFtLnBpcGUodGhpcy5fY3JlYXRlUmVxdWVzdFN0cmVhbSgpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGR1cGxleCBkYXRhIHN0cmVhbSwgb3BlbmVkIGFjY2VzcyB0byBBUEkgcHJvZ3JhbW1lcnMgYnkgQmF0Y2gjc3RyZWFtKClcbiAgICB0aGlzLl9kYXRhU3RyZWFtID0gY29uY2F0U3RyZWFtc0FzRHVwbGV4KFxuICAgICAgdXBsb2FkRGF0YVN0cmVhbSxcbiAgICAgIGRvd25sb2FkRGF0YVN0cmVhbSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbm5lY3QgYmF0Y2ggQVBJIGFuZCBjcmVhdGUgc3RyZWFtIGluc3RhbmNlIG9mIHJlcXVlc3QvcmVzcG9uc2VcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jcmVhdGVSZXF1ZXN0U3RyZWFtKCkge1xuICAgIGNvbnN0IGJ1bGsgPSB0aGlzLl9idWxrO1xuICAgIGNvbnN0IGxvZ2dlciA9IGJ1bGsuX2xvZ2dlcjtcbiAgICBjb25zdCByZXEgPSBidWxrLl9yZXF1ZXN0PEJhdGNoSW5mb1Jlc3BvbnNlPih7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHBhdGg6ICcvam9iLycgKyB0aGlzLmpvYi5pZCArICcvYmF0Y2gnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvY3N2JyxcbiAgICAgIH0sXG4gICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi94bWwnLFxuICAgIH0pO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXE7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhyZXMuYmF0Y2hJbmZvKTtcbiAgICAgICAgdGhpcy5pZCA9IHJlcy5iYXRjaEluZm8uaWQ7XG4gICAgICAgIHRoaXMuZW1pdCgncXVldWUnLCByZXMuYmF0Y2hJbmZvKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiByZXEuc3RyZWFtKCk7XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgV3JpdGFibGVcbiAgICovXG4gIF93cml0ZShyZWNvcmRfOiBSZWNvcmQsIGVuYzogc3RyaW5nLCBjYjogKCkgPT4gdm9pZCkge1xuICAgIGNvbnN0IHsgSWQsIHR5cGUsIGF0dHJpYnV0ZXMsIC4uLnJyZWMgfSA9IHJlY29yZF87XG4gICAgbGV0IHJlY29yZDtcbiAgICBzd2l0Y2ggKHRoaXMuam9iLm9wZXJhdGlvbikge1xuICAgICAgY2FzZSAnaW5zZXJ0JzpcbiAgICAgICAgcmVjb3JkID0gcnJlYztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgY2FzZSAnaGFyZERlbGV0ZSc6XG4gICAgICAgIHJlY29yZCA9IHsgSWQgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZWNvcmQgPSB7IElkLCAuLi5ycmVjIH07XG4gICAgfVxuICAgIHRoaXMuX3VwbG9hZFN0cmVhbS53cml0ZShyZWNvcmQsIGVuYywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZHVwbGV4IHN0cmVhbSB3aGljaCBhY2NlcHRzIENTViBkYXRhIGlucHV0IGFuZCBiYXRjaCByZXN1bHQgb3V0cHV0XG4gICAqL1xuICBzdHJlYW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFTdHJlYW07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBiYXRjaCBvcGVyYXRpb25cbiAgICovXG4gIGV4ZWN1dGUoaW5wdXQ/OiBzdHJpbmcgfCBSZWNvcmRbXSB8IFJlYWRhYmxlKSB7XG4gICAgLy8gaWYgYmF0Y2ggaXMgYWxyZWFkeSBleGVjdXRlZFxuICAgIGlmICh0aGlzLl9yZXN1bHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQmF0Y2ggYWxyZWFkeSBleGVjdXRlZC4nKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLm9uY2UoJ3Jlc3BvbnNlJywgcmVzb2x2ZSk7XG4gICAgICB0aGlzLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGlmIChpc09iamVjdChpbnB1dCkgJiYgJ3BpcGUnIGluIGlucHV0ICYmIGlzRnVuY3Rpb24oaW5wdXQucGlwZSkpIHtcbiAgICAgIC8vIGlmIGlucHV0IGhhcyBzdHJlYW0uUmVhZGFibGUgaW50ZXJmYWNlXG4gICAgICBpbnB1dC5waXBlKHRoaXMuX2RhdGFTdHJlYW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgaW5wdXQpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyZWNvcmQpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY29yZFtrZXldID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgcmVjb3JkW2tleV0gPSBTdHJpbmcocmVjb3JkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLndyaXRlKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9kYXRhU3RyZWFtLndyaXRlKGlucHV0LCAndXRmOCcpO1xuICAgICAgICB0aGlzLl9kYXRhU3RyZWFtLmVuZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybiBCYXRjaCBpbnN0YW5jZSBmb3IgY2hhaW5pbmdcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJ1biA9IHRoaXMuZXhlY3V0ZTtcblxuICBleGVjID0gdGhpcy5leGVjdXRlO1xuXG4gIC8qKlxuICAgKiBQcm9taXNlL0ErIGludGVyZmFjZVxuICAgKiBEZWxlZ2F0ZSB0byBwcm9taXNlLCByZXR1cm4gcHJvbWlzZSBpbnN0YW5jZSBmb3IgYmF0Y2ggcmVzdWx0XG4gICAqL1xuICB0aGVuKFxuICAgIG9uUmVzb2x2ZWQ6IChyZXM6IEJhdGNoUmVzdWx0PE9wcj4pID0+IHZvaWQsXG4gICAgb25SZWplY3Q6IChlcnI6IGFueSkgPT4gdm9pZCxcbiAgKSB7XG4gICAgaWYgKCF0aGlzLl9yZXN1bHQpIHtcbiAgICAgIHRoaXMuZXhlY3V0ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVzdWx0IS50aGVuKG9uUmVzb2x2ZWQsIG9uUmVqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0aGUgbGF0ZXN0IGJhdGNoIHN0YXR1cyBpbiBzZXJ2ZXJcbiAgICovXG4gIGFzeW5jIGNoZWNrKCkge1xuICAgIGNvbnN0IGJ1bGsgPSB0aGlzLl9idWxrO1xuICAgIGNvbnN0IGxvZ2dlciA9IGJ1bGsuX2xvZ2dlcjtcbiAgICBjb25zdCBqb2JJZCA9IHRoaXMuam9iLmlkO1xuICAgIGNvbnN0IGJhdGNoSWQgPSB0aGlzLmlkO1xuXG4gICAgaWYgKCFqb2JJZCB8fCAhYmF0Y2hJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYXRjaCBub3Qgc3RhcnRlZC4nKTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYnVsay5fcmVxdWVzdDxCYXRjaEluZm9SZXNwb25zZT4oe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhdGg6ICcvam9iLycgKyBqb2JJZCArICcvYmF0Y2gvJyArIGJhdGNoSWQsXG4gICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi94bWwnLFxuICAgIH0pO1xuICAgIGxvZ2dlci5kZWJ1ZyhyZXMuYmF0Y2hJbmZvKTtcbiAgICByZXR1cm4gcmVzLmJhdGNoSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiBQb2xsaW5nIHRoZSBiYXRjaCByZXN1bHQgYW5kIHJldHJpZXZlXG4gICAqL1xuICBwb2xsKGludGVydmFsOiBudW1iZXIsIHRpbWVvdXQ6IG51bWJlcikge1xuICAgIGNvbnN0IGpvYklkID0gdGhpcy5qb2IuaWQ7XG4gICAgY29uc3QgYmF0Y2hJZCA9IHRoaXMuaWQ7XG5cbiAgICBpZiAoIWpvYklkIHx8ICFiYXRjaElkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhdGNoIG5vdCBzdGFydGVkLicpO1xuICAgIH1cbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBjb25zdCBwb2xsID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBpZiAoc3RhcnRUaW1lICsgdGltZW91dCA8IG5vdykge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgUG9sbGluZ1RpbWVvdXRFcnJvcihcbiAgICAgICAgICAnUG9sbGluZyB0aW1lIG91dC4gSm9iIElkID0gJyArIGpvYklkICsgJyAsIGJhdGNoIElkID0gJyArIGJhdGNoSWQsXG4gICAgICAgICAgam9iSWQsXG4gICAgICAgICAgYmF0Y2hJZCxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxldCByZXM7XG4gICAgICB0cnkge1xuICAgICAgICByZXMgPSBhd2FpdCB0aGlzLmNoZWNrKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChyZXMuc3RhdGUgPT09ICdGYWlsZWQnKSB7XG4gICAgICAgIGlmIChwYXJzZUludChyZXMubnVtYmVyUmVjb3Jkc1Byb2Nlc3NlZCwgMTApID4gMCkge1xuICAgICAgICAgIHRoaXMucmV0cmlldmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKHJlcy5zdGF0ZU1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdGUgPT09ICdDb21wbGV0ZWQnKSB7XG4gICAgICAgIHRoaXMucmV0cmlldmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXMpO1xuICAgICAgICBzZXRUaW1lb3V0KHBvbGwsIGludGVydmFsKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNldFRpbWVvdXQocG9sbCwgaW50ZXJ2YWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGJhdGNoIHJlc3VsdFxuICAgKi9cbiAgYXN5bmMgcmV0cmlldmUoKSB7XG4gICAgY29uc3QgYnVsayA9IHRoaXMuX2J1bGs7XG4gICAgY29uc3Qgam9iSWQgPSB0aGlzLmpvYi5pZDtcbiAgICBjb25zdCBqb2IgPSB0aGlzLmpvYjtcbiAgICBjb25zdCBiYXRjaElkID0gdGhpcy5pZDtcblxuICAgIGlmICgham9iSWQgfHwgIWJhdGNoSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQmF0Y2ggbm90IHN0YXJ0ZWQuJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBidWxrLl9yZXF1ZXN0PFxuICAgICAgICBCdWxrSW5nZXN0UmVzdWx0UmVzcG9uc2UgfCBCdWxrUXVlcnlSZXN1bHRSZXNwb25zZVxuICAgICAgPih7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhdGg6ICcvam9iLycgKyBqb2JJZCArICcvYmF0Y2gvJyArIGJhdGNoSWQgKyAnL3Jlc3VsdCcsXG4gICAgICB9KTtcbiAgICAgIGxldCByZXN1bHRzOiBCdWxrSW5nZXN0QmF0Y2hSZXN1bHQgfCBCdWxrUXVlcnlCYXRjaFJlc3VsdDtcbiAgICAgIGlmIChqb2Iub3BlcmF0aW9uID09PSAncXVlcnknIHx8IGpvYi5vcGVyYXRpb24gPT09ICdxdWVyeUFsbCcpIHtcbiAgICAgICAgY29uc3QgcmVzID0gcmVzcCBhcyBCdWxrUXVlcnlSZXN1bHRSZXNwb25zZTtcbiAgICAgICAgbGV0IHJlc3VsdElkID0gcmVzWydyZXN1bHQtbGlzdCddLnJlc3VsdDtcbiAgICAgICAgcmVzdWx0cyA9IChBcnJheS5pc0FycmF5KHJlc3VsdElkKVxuICAgICAgICAgID8gcmVzdWx0SWRcbiAgICAgICAgICA6IFtyZXN1bHRJZF1cbiAgICAgICAgKS5tYXAoKGlkKSA9PiAoeyBpZCwgYmF0Y2hJZCwgam9iSWQgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVzID0gcmVzcCBhcyBCdWxrSW5nZXN0UmVzdWx0UmVzcG9uc2U7XG4gICAgICAgIHJlc3VsdHMgPSByZXMubWFwKChyZXQpID0+ICh7XG4gICAgICAgICAgaWQ6IHJldC5JZCB8fCBudWxsLFxuICAgICAgICAgIHN1Y2Nlc3M6IHJldC5TdWNjZXNzID09PSAndHJ1ZScsXG4gICAgICAgICAgZXJyb3JzOiByZXQuRXJyb3IgPyBbcmV0LkVycm9yXSA6IFtdLFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICB0aGlzLmVtaXQoJ3Jlc3BvbnNlJywgcmVzdWx0cyk7XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBxdWVyeSByZXN1bHQgYXMgYSByZWNvcmQgc3RyZWFtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZXN1bHRJZCAtIFJlc3VsdCBpZFxuICAgKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtfSAtIFJlY29yZCBzdHJlYW0sIGNvbnZlcnRpYmxlIHRvIENTViBkYXRhIHN0cmVhbVxuICAgKi9cbiAgcmVzdWx0KHJlc3VsdElkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBqb2JJZCA9IHRoaXMuam9iLmlkO1xuICAgIGNvbnN0IGJhdGNoSWQgPSB0aGlzLmlkO1xuICAgIGlmICgham9iSWQgfHwgIWJhdGNoSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQmF0Y2ggbm90IHN0YXJ0ZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdFN0cmVhbSA9IG5ldyBQYXJzYWJsZSgpO1xuICAgIGNvbnN0IHJlc3VsdERhdGFTdHJlYW0gPSByZXN1bHRTdHJlYW0uc3RyZWFtKCdjc3YnKTtcbiAgICB0aGlzLl9idWxrXG4gICAgICAuX3JlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiAnL2pvYi8nICsgam9iSWQgKyAnL2JhdGNoLycgKyBiYXRjaElkICsgJy9yZXN1bHQvJyArIHJlc3VsdElkLFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxuICAgICAgfSlcbiAgICAgIC5zdHJlYW0oKVxuICAgICAgLnBpcGUocmVzdWx0RGF0YVN0cmVhbSk7XG4gICAgcmV0dXJuIHJlc3VsdFN0cmVhbTtcbiAgfVxufVxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgQnVsa0FwaTxTIGV4dGVuZHMgU2NoZW1hPiBleHRlbmRzIEh0dHBBcGk8Uz4ge1xuICBiZWZvcmVTZW5kKHJlcXVlc3Q6IEh0dHBSZXF1ZXN0KSB7XG4gICAgcmVxdWVzdC5oZWFkZXJzID0ge1xuICAgICAgLi4ucmVxdWVzdC5oZWFkZXJzLFxuICAgICAgJ1gtU0ZEQy1TRVNTSU9OJzogdGhpcy5fY29ubi5hY2Nlc3NUb2tlbiA/PyAnJyxcbiAgICB9O1xuICB9XG5cbiAgaXNTZXNzaW9uRXhwaXJlZChyZXNwb25zZTogSHR0cFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMCAmJlxuICAgICAgLzxleGNlcHRpb25Db2RlPkludmFsaWRTZXNzaW9uSWQ8XFwvZXhjZXB0aW9uQ29kZT4vLnRlc3QocmVzcG9uc2UuYm9keSlcbiAgICApO1xuICB9XG5cbiAgaGFzRXJyb3JJblJlc3BvbnNlQm9keShib2R5OiBhbnkpIHtcbiAgICByZXR1cm4gISFib2R5LmVycm9yO1xuICB9XG5cbiAgcGFyc2VFcnJvcihib2R5OiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3JDb2RlOiBib2R5LmVycm9yLmV4Y2VwdGlvbkNvZGUsXG4gICAgICBtZXNzYWdlOiBib2R5LmVycm9yLmV4Y2VwdGlvbk1lc3NhZ2UsXG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBCdWxrQXBpVjI8UyBleHRlbmRzIFNjaGVtYT4gZXh0ZW5kcyBIdHRwQXBpPFM+IHtcbiAgaGFzRXJyb3JJblJlc3BvbnNlQm9keShib2R5OiBhbnkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgQXJyYXkuaXNBcnJheShib2R5KSAmJlxuICAgICAgdHlwZW9mIGJvZHlbMF0gPT09ICdvYmplY3QnICYmXG4gICAgICAnZXJyb3JDb2RlJyBpbiBib2R5WzBdXG4gICAgKTtcbiAgfVxuXG4gIGlzU2Vzc2lvbkV4cGlyZWQocmVzcG9uc2U6IEh0dHBSZXNwb25zZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICByZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDEgJiYgL0lOVkFMSURfU0VTU0lPTl9JRC8udGVzdChyZXNwb25zZS5ib2R5KVxuICAgICk7XG4gIH1cblxuICBwYXJzZUVycm9yKGJvZHk6IGFueSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvckNvZGU6IGJvZHlbMF0uZXJyb3JDb2RlLFxuICAgICAgbWVzc2FnZTogYm9keVswXS5tZXNzYWdlLFxuICAgIH07XG4gIH1cbn1cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogQ2xhc3MgZm9yIEJ1bGsgQVBJXG4gKlxuICogQGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWxrPFMgZXh0ZW5kcyBTY2hlbWE+IHtcbiAgX2Nvbm46IENvbm5lY3Rpb248Uz47XG4gIF9sb2dnZXI6IExvZ2dlcjtcblxuICAvKipcbiAgICogUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIHBvbGxJbnRlcnZhbCA9IDEwMDA7XG5cbiAgLyoqXG4gICAqIFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHBvbGxUaW1lb3V0ID0gMTAwMDA7XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25uOiBDb25uZWN0aW9uPFM+KSB7XG4gICAgdGhpcy5fY29ubiA9IGNvbm47XG4gICAgdGhpcy5fbG9nZ2VyID0gY29ubi5fbG9nZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBfcmVxdWVzdDxUPihyZXF1ZXN0XzogQnVsa1JlcXVlc3QpIHtcbiAgICBjb25zdCBjb25uID0gdGhpcy5fY29ubjtcbiAgICBjb25zdCB7IHBhdGgsIHJlc3BvbnNlVHlwZSwgLi4ucnJlcSB9ID0gcmVxdWVzdF87XG4gICAgY29uc3QgYmFzZVVybCA9IFtjb25uLmluc3RhbmNlVXJsLCAnc2VydmljZXMvYXN5bmMnLCBjb25uLnZlcnNpb25dLmpvaW4oXG4gICAgICAnLycsXG4gICAgKTtcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgLi4ucnJlcSxcbiAgICAgIHVybDogYmFzZVVybCArIHBhdGgsXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IEJ1bGtBcGkodGhpcy5fY29ubiwgeyByZXNwb25zZVR5cGUgfSkucmVxdWVzdDxUPihyZXF1ZXN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIHN0YXJ0IGJ1bGtsb2FkIGpvYiBhbmQgYmF0Y2hcbiAgICovXG4gIGxvYWQ8T3ByIGV4dGVuZHMgQnVsa09wZXJhdGlvbj4oXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIG9wZXJhdGlvbjogT3ByLFxuICAgIGlucHV0PzogUmVjb3JkW10gfCBSZWFkYWJsZSB8IHN0cmluZyxcbiAgKTogQmF0Y2g8UywgT3ByPjtcbiAgbG9hZDxPcHIgZXh0ZW5kcyBCdWxrT3BlcmF0aW9uPihcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgb3BlcmF0aW9uOiBPcHIsXG4gICAgb3B0aW9uc09ySW5wdXQ/OiBCdWxrT3B0aW9ucyB8IFJlY29yZFtdIHwgUmVhZGFibGUgfCBzdHJpbmcsXG4gICAgaW5wdXQ/OiBSZWNvcmRbXSB8IFJlYWRhYmxlIHwgc3RyaW5nLFxuICApOiBCYXRjaDxTLCBPcHI+O1xuICBsb2FkPE9wciBleHRlbmRzIEJ1bGtPcGVyYXRpb24+KFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICBvcGVyYXRpb246IE9wcixcbiAgICBvcHRpb25zT3JJbnB1dD86IEJ1bGtPcHRpb25zIHwgUmVjb3JkW10gfCBSZWFkYWJsZSB8IHN0cmluZyxcbiAgICBpbnB1dD86IFJlY29yZFtdIHwgUmVhZGFibGUgfCBzdHJpbmcsXG4gICkge1xuICAgIGxldCBvcHRpb25zOiBCdWxrT3B0aW9ucyA9IHt9O1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBvcHRpb25zT3JJbnB1dCA9PT0gJ3N0cmluZycgfHxcbiAgICAgIEFycmF5LmlzQXJyYXkob3B0aW9uc09ySW5wdXQpIHx8XG4gICAgICAoaXNPYmplY3Qob3B0aW9uc09ySW5wdXQpICYmXG4gICAgICAgICdwaXBlJyBpbiBvcHRpb25zT3JJbnB1dCAmJlxuICAgICAgICB0eXBlb2Ygb3B0aW9uc09ySW5wdXQucGlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICApIHtcbiAgICAgIC8vIHdoZW4gb3B0aW9ucyBpcyBub3QgcGxhaW4gaGFzaCBvYmplY3QsIGl0IGlzIG9taXR0ZWRcbiAgICAgIGlucHV0ID0gb3B0aW9uc09ySW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JJbnB1dCBhcyBCdWxrT3B0aW9ucztcbiAgICB9XG4gICAgY29uc3Qgam9iID0gdGhpcy5jcmVhdGVKb2IodHlwZSwgb3BlcmF0aW9uLCBvcHRpb25zKTtcbiAgICBjb25zdCBiYXRjaCA9IGpvYi5jcmVhdGVCYXRjaCgpO1xuICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiBqb2IuY2xvc2UoKTtcbiAgICBjb25zdCBjbGVhbnVwT25FcnJvciA9IChlcnI6IEVycm9yKSA9PiB7XG4gICAgICBpZiAoZXJyLm5hbWUgIT09ICdQb2xsaW5nVGltZW91dCcpIHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgYmF0Y2gub24oJ3Jlc3BvbnNlJywgY2xlYW51cCk7XG4gICAgYmF0Y2gub24oJ2Vycm9yJywgY2xlYW51cE9uRXJyb3IpO1xuICAgIGJhdGNoLm9uKCdxdWV1ZScsICgpID0+IHtcbiAgICAgIGJhdGNoPy5wb2xsKHRoaXMucG9sbEludGVydmFsLCB0aGlzLnBvbGxUaW1lb3V0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gYmF0Y2guZXhlY3V0ZShpbnB1dCk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBidWxrIHF1ZXJ5IGFuZCBnZXQgcmVjb3JkIHN0cmVhbVxuICAgKi9cbiAgcXVlcnkoc29xbDogc3RyaW5nKSB7XG4gICAgY29uc3QgbSA9IHNvcWwucmVwbGFjZSgvXFwoW1xcc1xcU10rXFwpL2csICcnKS5tYXRjaCgvRlJPTVxccysoXFx3KykvaSk7XG4gICAgaWYgKCFtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdObyBzb2JqZWN0IHR5cGUgZm91bmQgaW4gcXVlcnksIG1heWJlIGNhdXNlZCBieSBpbnZhbGlkIFNPUUwuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBtWzFdO1xuICAgIGNvbnN0IHJlY29yZFN0cmVhbSA9IG5ldyBQYXJzYWJsZSgpO1xuICAgIGNvbnN0IGRhdGFTdHJlYW0gPSByZWNvcmRTdHJlYW0uc3RyZWFtKCdjc3YnKTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMubG9hZCh0eXBlLCAncXVlcnknLCBzb3FsKTtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+XG4gICAgICAgICAgdGhpcy5qb2IocmVzdWx0LmpvYklkKVxuICAgICAgICAgICAgLmJhdGNoKHJlc3VsdC5iYXRjaElkKVxuICAgICAgICAgICAgLnJlc3VsdChyZXN1bHQuaWQpXG4gICAgICAgICAgICAuc3RyZWFtKCksXG4gICAgICAgICk7XG4gICAgICAgIGpvaW5TdHJlYW1zKHN0cmVhbXMpLnBpcGUoZGF0YVN0cmVhbSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVjb3JkU3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiByZWNvcmRTdHJlYW07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGpvYiBpbnN0YW5jZVxuICAgKi9cbiAgY3JlYXRlSm9iPE9wciBleHRlbmRzIEJ1bGtPcGVyYXRpb24+KFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICBvcGVyYXRpb246IE9wcixcbiAgICBvcHRpb25zOiBCdWxrT3B0aW9ucyA9IHt9LFxuICApIHtcbiAgICByZXR1cm4gbmV3IEpvYih0aGlzLCB0eXBlLCBvcGVyYXRpb24sIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGpvYiBpbnN0YW5jZSBzcGVjaWZpZWQgYnkgZ2l2ZW4gam9iIElEXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBqb2JJZCAtIEpvYiBJRFxuICAgKiBAcmV0dXJucyB7QnVsa35Kb2J9XG4gICAqL1xuICBqb2I8T3ByIGV4dGVuZHMgQnVsa09wZXJhdGlvbj4oam9iSWQ6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgSm9iPFMsIE9wcj4odGhpcywgbnVsbCwgbnVsbCwgbnVsbCwgam9iSWQpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCdWxrVjI8UyBleHRlbmRzIFNjaGVtYT4ge1xuICAjY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPjtcblxuICAvKipcbiAgICogUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIHBvbGxJbnRlcnZhbCA9IDEwMDA7XG5cbiAgLyoqXG4gICAqIFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHBvbGxUaW1lb3V0ID0gMTAwMDA7XG5cbiAgY29uc3RydWN0b3IoY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPikge1xuICAgIHRoaXMuI2Nvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhbiBpbmdlc3Qgam9iIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtcyB7TmV3SW5nZXN0Sm9iT3B0aW9uc30gb3B0aW9ucyBvYmplY3RcbiAgICogQHJldHVybnMge0luZ2VzdEpvYlYyfSBBbiBpbmdlc3Qgam9iIGluc3RhbmNlXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVwc2VydCByZWNvcmRzIHRvIHRoZSBBY2NvdW50IG9iamVjdC5cbiAgICpcbiAgICogY29uc3Qgam9iID0gY29ubmVjdGlvbi5idWxrMi5jcmVhdGVKb2Ioe1xuICAgKiAgIG9wZXJhdGlvbjogJ2luc2VydCdcbiAgICogICBvYmplY3Q6ICdBY2NvdW50JyxcbiAgICogfSk7XG4gICAqXG4gICAqIC8vIGNyZWF0ZSB0aGUgam9iIGluIHRoZSBvcmdcbiAgICogYXdhaXQgam9iLm9wZW4oKVxuICAgKlxuICAgKiAvLyB1cGxvYWQgZGF0YVxuICAgKiBhd2FpdCBqb2IudXBsb2FkRGF0YShjc3ZGaWxlKVxuICAgKlxuICAgKiAvLyBmaW5pc2hlZCB1cGxvYWRpbmcgZGF0YSwgbWFyayBpdCBhcyByZWFkeSBmb3IgcHJvY2Vzc2luZ1xuICAgKiBhd2FpdCBqb2IuY2xvc2UoKVxuICAgKi9cbiAgY3JlYXRlSm9iPE9wciBleHRlbmRzIEluZ2VzdE9wZXJhdGlvbj4oXG4gICAgb3B0aW9uczogTmV3SW5nZXN0Sm9iT3B0aW9ucyxcbiAgKTogSW5nZXN0Sm9iVjI8UywgT3ByPiB7XG4gICAgcmV0dXJuIG5ldyBJbmdlc3RKb2JWMih7XG4gICAgICBjb25uZWN0aW9uOiB0aGlzLiNjb25uZWN0aW9uLFxuICAgICAgam9iSW5mbzogb3B0aW9ucyxcbiAgICAgIHBvbGxpbmdPcHRpb25zOiB0aGlzLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGluZ2VzdCBqb2IgaW5zdGFuY2Ugc3BlY2lmaWVkIGJ5IGEgZ2l2ZW4gam9iIElEXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0IHdpdGggYSBqb2IgSURcbiAgICogQHJldHVybnMgSW5nZXN0Sm9iVjIgQW4gaW5nZXN0IGpvYlxuICAgKi9cbiAgam9iPE9wciBleHRlbmRzIEluZ2VzdE9wZXJhdGlvbj4oXG4gICAgb3B0aW9uczogRXhpc3RpbmdJbmdlc3RKb2JPcHRpb25zLFxuICApOiBJbmdlc3RKb2JWMjxTLCBPcHI+IHtcbiAgICByZXR1cm4gbmV3IEluZ2VzdEpvYlYyKHtcbiAgICAgIGNvbm5lY3Rpb246IHRoaXMuI2Nvbm5lY3Rpb24sXG4gICAgICBqb2JJbmZvOiBvcHRpb25zLFxuICAgICAgcG9sbGluZ09wdGlvbnM6IHRoaXMsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlLCB1cGxvYWQsIGFuZCBzdGFydCBidWxrbG9hZCBqb2JcbiAgICovXG4gIGFzeW5jIGxvYWRBbmRXYWl0Rm9yUmVzdWx0cyhcbiAgICBvcHRpb25zOiBOZXdJbmdlc3RKb2JPcHRpb25zICZcbiAgICAgIFBhcnRpYWw8QnVsa1YyUG9sbGluZ09wdGlvbnM+ICYge1xuICAgICAgICBpbnB1dDogUmVjb3JkW10gfCBSZWFkYWJsZSB8IHN0cmluZztcbiAgICAgIH0sXG4gICk6IFByb21pc2U8SW5nZXN0Sm9iVjJSZXN1bHRzPFM+PiB7XG4gICAgaWYgKCFvcHRpb25zLnBvbGxUaW1lb3V0KSBvcHRpb25zLnBvbGxUaW1lb3V0ID0gdGhpcy5wb2xsVGltZW91dDtcbiAgICBpZiAoIW9wdGlvbnMucG9sbEludGVydmFsKSBvcHRpb25zLnBvbGxJbnRlcnZhbCA9IHRoaXMucG9sbEludGVydmFsO1xuXG4gICAgY29uc3Qgam9iID0gdGhpcy5jcmVhdGVKb2Iob3B0aW9ucyk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGpvYi5vcGVuKCk7XG4gICAgICBhd2FpdCBqb2IudXBsb2FkRGF0YShvcHRpb25zLmlucHV0KTtcbiAgICAgIGF3YWl0IGpvYi5jbG9zZSgpO1xuICAgICAgYXdhaXQgam9iLnBvbGwob3B0aW9ucy5wb2xsSW50ZXJ2YWwsIG9wdGlvbnMucG9sbFRpbWVvdXQpO1xuICAgICAgcmV0dXJuIGF3YWl0IGpvYi5nZXRBbGxSZXN1bHRzKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyLm5hbWUgIT09ICdKb2JQb2xsaW5nVGltZW91dEVycm9yJykge1xuICAgICAgICAvLyBmaXJlcyBvZmYgb25lIGxhc3QgYXR0ZW1wdCB0byBjbGVhbiB1cCBhbmQgaWdub3JlcyB0aGUgcmVzdWx0IHwgZXJyb3JcbiAgICAgICAgam9iLmRlbGV0ZSgpLmNhdGNoKChpZ25vcmVkKSA9PiBpZ25vcmVkKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBidWxrIHF1ZXJ5IGFuZCBnZXQgcmVjb3Jkc1xuICAgKlxuICAgKiBEZWZhdWx0IHRpbWVvdXQ6IDEwMDAwbXNcbiAgICpcbiAgICogQHBhcmFtIHNvcWwgU09RTCBxdWVyeVxuICAgKiBAcGFyYW0gQnVsa1YyUG9sbGluZ09wdGlvbnMgb3B0aW9ucyBvYmplY3RcbiAgICpcbiAgICogQHJldHVybnMgUmVjb3JkW11cbiAgICovXG4gIGFzeW5jIHF1ZXJ5KFxuICAgIHNvcWw6IHN0cmluZyxcbiAgICBvcHRpb25zPzogUGFydGlhbDxCdWxrVjJQb2xsaW5nT3B0aW9ucz4gJiB7IHNjYW5BbGw/OiBib29sZWFuIH0sXG4gICk6IFByb21pc2U8UmVjb3JkW10+IHtcbiAgICBjb25zdCBxdWVyeUpvYiA9IG5ldyBRdWVyeUpvYlYyKHtcbiAgICAgIGNvbm5lY3Rpb246IHRoaXMuI2Nvbm5lY3Rpb24sXG4gICAgICBvcGVyYXRpb246IG9wdGlvbnM/LnNjYW5BbGwgPyAncXVlcnlBbGwnIDogJ3F1ZXJ5JyxcbiAgICAgIHF1ZXJ5OiBzb3FsLFxuICAgICAgcG9sbGluZ09wdGlvbnM6IHRoaXMsXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHF1ZXJ5Sm9iLm9wZW4oKTtcbiAgICAgIGF3YWl0IHF1ZXJ5Sm9iLnBvbGwob3B0aW9ucz8ucG9sbEludGVydmFsLCBvcHRpb25zPy5wb2xsVGltZW91dCk7XG4gICAgICByZXR1cm4gYXdhaXQgcXVlcnlKb2IuZ2V0UmVzdWx0cygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyci5uYW1lICE9PSAnSm9iUG9sbGluZ1RpbWVvdXRFcnJvcicpIHtcbiAgICAgICAgLy8gZmlyZXMgb2ZmIG9uZSBsYXN0IGF0dGVtcHQgdG8gY2xlYW4gdXAgYW5kIGlnbm9yZXMgdGhlIHJlc3VsdCB8IGVycm9yXG4gICAgICAgIHF1ZXJ5Sm9iLmRlbGV0ZSgpLmNhdGNoKChpZ25vcmVkKSA9PiBpZ25vcmVkKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFF1ZXJ5Sm9iVjI8UyBleHRlbmRzIFNjaGVtYT4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICByZWFkb25seSAjY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPjtcbiAgcmVhZG9ubHkgI29wZXJhdGlvbjogUXVlcnlPcGVyYXRpb247XG4gIHJlYWRvbmx5ICNxdWVyeTogc3RyaW5nO1xuICByZWFkb25seSAjcG9sbGluZ09wdGlvbnM6IEJ1bGtWMlBvbGxpbmdPcHRpb25zO1xuICAjcXVlcnlSZXN1bHRzOiBSZWNvcmRbXSB8IHVuZGVmaW5lZDtcbiAgI2Vycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcbiAgam9iSW5mbzogUGFydGlhbDxKb2JJbmZvVjI+IHwgdW5kZWZpbmVkO1xuICBsb2NhdG9yOiBPcHRpb25hbDxzdHJpbmc+O1xuICBmaW5pc2hlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENyZWF0ZVF1ZXJ5Sm9iVjJPcHRpb25zPFM+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLiNjb25uZWN0aW9uID0gb3B0aW9ucy5jb25uZWN0aW9uO1xuICAgIHRoaXMuI29wZXJhdGlvbiA9IG9wdGlvbnMub3BlcmF0aW9uO1xuICAgIHRoaXMuI3F1ZXJ5ID0gb3B0aW9ucy5xdWVyeTtcbiAgICB0aGlzLiNwb2xsaW5nT3B0aW9ucyA9IG9wdGlvbnMucG9sbGluZ09wdGlvbnM7XG4gICAgLy8gZGVmYXVsdCBlcnJvciBoYW5kbGVyIHRvIGtlZXAgdGhlIGxhdGVzdCBlcnJvclxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycm9yKSA9PiAodGhpcy4jZXJyb3IgPSBlcnJvcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBxdWVyeSBqb2JcbiAgICovXG4gIGFzeW5jIG9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgcGF0aDogJycsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBvcGVyYXRpb246IHRoaXMuI29wZXJhdGlvbixcbiAgICAgICAgICBxdWVyeTogdGhpcy4jcXVlcnksXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZW1pdCgnb3BlbicpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RhdHVzIHRvIGFib3J0XG4gICAqL1xuICBhc3luYyBhYm9ydCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdGU6IEpvYlN0YXRlVjIgPSAnQWJvcnRlZCc7XG4gICAgICB0aGlzLmpvYkluZm8gPSBhd2FpdCB0aGlzLmNyZWF0ZVF1ZXJ5UmVxdWVzdDxKb2JJbmZvVjI+KHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBwYXRoOiBgLyR7dGhpcy5qb2JJbmZvPy5pZH1gLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHN0YXRlIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZW1pdCgnYWJvcnRlZCcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBvbGwgZm9yIHRoZSBzdGF0ZSBvZiB0aGUgcHJvY2Vzc2luZyBmb3IgdGhlIGpvYi5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBvbmx5IHRocm93IGFmdGVyIGEgdGltZW91dC4gVG8gY2FwdHVyZSBhXG4gICAqIGpvYiBmYWlsdXJlIHdoaWxlIHBvbGxpbmcgeW91IG11c3Qgc2V0IGEgbGlzdGVuZXIgZm9yIHRoZVxuICAgKiBgZmFpbGVkYCBldmVudCBiZWZvcmUgY2FsbGluZyBpdDpcbiAgICpcbiAgICogam9iLm9uKCdmYWlsZWQnLCAoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAqIGF3YWl0IGpvYi5wb2xsKClcbiAgICpcbiAgICogQHBhcmFtIGludGVydmFsIFBvbGxpbmcgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB0aW1lb3V0IFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybnMge1Byb21pc2U8UmVjb3JkW10+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiByZWNvcmRzXG4gICAqL1xuICBhc3luYyBwb2xsKFxuICAgIGludGVydmFsOiBudW1iZXIgPSB0aGlzLiNwb2xsaW5nT3B0aW9ucy5wb2xsSW50ZXJ2YWwsXG4gICAgdGltZW91dDogbnVtYmVyID0gdGhpcy4jcG9sbGluZ09wdGlvbnMucG9sbFRpbWVvdXQsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGpvYklkID0gZ2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIHdoaWxlIChzdGFydFRpbWUgKyB0aW1lb3V0ID4gRGF0ZS5ub3coKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jaGVjaygpO1xuICAgICAgICBzd2l0Y2ggKHJlcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgJ09wZW4nOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKb2IgaGFzIG5vdCBiZWVuIHN0YXJ0ZWQnKTtcbiAgICAgICAgICBjYXNlICdBYm9ydGVkJzpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSm9iIGhhcyBiZWVuIGFib3J0ZWQnKTtcbiAgICAgICAgICBjYXNlICdVcGxvYWRDb21wbGV0ZSc6XG4gICAgICAgICAgY2FzZSAnSW5Qcm9ncmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBkZWxheShpbnRlcnZhbCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdGYWlsZWQnOlxuICAgICAgICAgICAgLy8gdW5saWtlIGluZ2VzdCBqb2JzLCB0aGUgQVBJIGRvZXNuJ3QgcmV0dXJuIGFuIGVycm9yIG1zZzpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLnNhbGVzZm9yY2UuY29tL2RvY3MvYXRsYXMuZW4tdXMuYXBpX2FzeW5jaC5tZXRhL2FwaV9hc3luY2gvcXVlcnlfZ2V0X29uZV9qb2IuaHRtXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG5ldyBFcnJvcignUXVlcnkgam9iIGZhaWxlZCB0byBjb21wbGV0ZS4nKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgY2FzZSAnSm9iQ29tcGxldGUnOlxuICAgICAgICAgICAgdGhpcy5lbWl0KCdqb2Jjb21wbGV0ZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgSm9iUG9sbGluZ1RpbWVvdXRFcnJvcihcbiAgICAgIGBQb2xsaW5nIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuIEpvYiBJZCA9ICR7am9iSWR9YCxcbiAgICAgIGpvYklkLFxuICAgICk7XG4gICAgdGhpcy5lbWl0KCdlcnJvcicsIHRpbWVvdXRFcnJvcik7XG4gICAgdGhyb3cgdGltZW91dEVycm9yO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSBsYXRlc3QgYmF0Y2ggc3RhdHVzIGluIHNlcnZlclxuICAgKi9cbiAgYXN5bmMgY2hlY2soKTogUHJvbWlzZTxKb2JJbmZvVjI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiBgLyR7Z2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyl9YCxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuam9iSW5mbyA9IGpvYkluZm87XG4gICAgICByZXR1cm4gam9iSW5mbztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVxdWVzdDxSID0gdW5rbm93bj4oXG4gICAgcmVxdWVzdDogc3RyaW5nIHwgSHR0cFJlcXVlc3QsXG4gICAgb3B0aW9uczogT2JqZWN0ID0ge30sXG4gICk6IFN0cmVhbVByb21pc2U8Uj4ge1xuICAgIC8vIGlmIHJlcXVlc3QgaXMgc2ltcGxlIHN0cmluZywgcmVnYXJkIGl0IGFzIHVybCBpbiBHRVQgbWV0aG9kXG4gICAgbGV0IHJlcXVlc3RfOiBIdHRwUmVxdWVzdCA9XG4gICAgICB0eXBlb2YgcmVxdWVzdCA9PT0gJ3N0cmluZycgPyB7IG1ldGhvZDogJ0dFVCcsIHVybDogcmVxdWVzdCB9IDogcmVxdWVzdDtcblxuICAgIGNvbnN0IGh0dHBBcGkgPSBuZXcgSHR0cEFwaSh0aGlzLiNjb25uZWN0aW9uLCBvcHRpb25zKTtcbiAgICBodHRwQXBpLm9uKCdyZXNwb25zZScsIChyZXNwb25zZTogSHR0cFJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLmxvY2F0b3IgPSByZXNwb25zZS5oZWFkZXJzWydzZm9yY2UtbG9jYXRvciddO1xuICAgIH0pO1xuICAgIHJldHVybiBodHRwQXBpLnJlcXVlc3Q8Uj4ocmVxdWVzdF8pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSZXN1bHRzVXJsKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy4jY29ubmVjdGlvbi5pbnN0YW5jZVVybH0vc2VydmljZXMvZGF0YS92JHtcbiAgICAgIHRoaXMuI2Nvbm5lY3Rpb24udmVyc2lvblxuICAgIH0vam9icy9xdWVyeS8ke2dldEpvYklkT3JFcnJvcih0aGlzLmpvYkluZm8pfS9yZXN1bHRzYDtcblxuICAgIHJldHVybiB0aGlzLmxvY2F0b3IgPyBgJHt1cmx9P2xvY2F0b3I9JHt0aGlzLmxvY2F0b3J9YCA6IHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc3VsdHMgZm9yIGEgcXVlcnkgam9iLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZWNvcmRbXT59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIHJlY29yZHNcbiAgICovXG4gIGFzeW5jIGdldFJlc3VsdHMoKTogUHJvbWlzZTxSZWNvcmRbXT4ge1xuICAgIGlmICh0aGlzLmZpbmlzaGVkICYmIHRoaXMuI3F1ZXJ5UmVzdWx0cykge1xuICAgICAgcmV0dXJuIHRoaXMuI3F1ZXJ5UmVzdWx0cztcbiAgICB9XG5cbiAgICB0aGlzLiNxdWVyeVJlc3VsdHMgPSBbXTtcblxuICAgIHdoaWxlICh0aGlzLmxvY2F0b3IgIT09ICdudWxsJykge1xuICAgICAgY29uc3QgbmV4dFJlc3VsdHMgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8UmVjb3JkW10+KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiB0aGlzLmdldFJlc3VsdHNVcmwoKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEFjY2VwdDogJ3RleHQvY3N2JyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLiNxdWVyeVJlc3VsdHMgPSB0aGlzLiNxdWVyeVJlc3VsdHMuY29uY2F0KG5leHRSZXN1bHRzKTtcbiAgICB9XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG5cbiAgICByZXR1cm4gdGhpcy4jcXVlcnlSZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYSBxdWVyeSBqb2IuXG4gICAqL1xuICBhc3luYyBkZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0PHZvaWQ+KHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBwYXRoOiBgLyR7Z2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyl9YCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVlcnlSZXF1ZXN0PFQ+KHJlcXVlc3Q6IEJ1bGtSZXF1ZXN0KSB7XG4gICAgY29uc3QgeyBwYXRoLCByZXNwb25zZVR5cGUgfSA9IHJlcXVlc3Q7XG4gICAgY29uc3QgYmFzZVVybCA9IFtcbiAgICAgIHRoaXMuI2Nvbm5lY3Rpb24uaW5zdGFuY2VVcmwsXG4gICAgICAnc2VydmljZXMvZGF0YScsXG4gICAgICBgdiR7dGhpcy4jY29ubmVjdGlvbi52ZXJzaW9ufWAsXG4gICAgICAnam9icy9xdWVyeScsXG4gICAgXS5qb2luKCcvJyk7XG5cbiAgICByZXR1cm4gbmV3IEJ1bGtBcGlWMih0aGlzLiNjb25uZWN0aW9uLCB7IHJlc3BvbnNlVHlwZSB9KS5yZXF1ZXN0PFQ+KHtcbiAgICAgIC4uLnJlcXVlc3QsXG4gICAgICB1cmw6IGJhc2VVcmwgKyBwYXRoLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ2xhc3MgZm9yIEJ1bGsgQVBJIFYyIEluZ2VzdCBKb2JcbiAqL1xuZXhwb3J0IGNsYXNzIEluZ2VzdEpvYlYyPFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBPcHIgZXh0ZW5kcyBJbmdlc3RPcGVyYXRpb25cbj4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICByZWFkb25seSAjY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPjtcbiAgcmVhZG9ubHkgI3BvbGxpbmdPcHRpb25zOiBCdWxrVjJQb2xsaW5nT3B0aW9ucztcbiAgcmVhZG9ubHkgI2pvYkRhdGE6IEpvYkRhdGFWMjxTLCBPcHI+O1xuICAjYnVsa0pvYlN1Y2Nlc3NmdWxSZXN1bHRzOiBJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPFM+IHwgdW5kZWZpbmVkO1xuICAjYnVsa0pvYkZhaWxlZFJlc3VsdHM6IEluZ2VzdEpvYlYyRmFpbGVkUmVzdWx0czxTPiB8IHVuZGVmaW5lZDtcbiAgI2J1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHM6IEluZ2VzdEpvYlYyVW5wcm9jZXNzZWRSZWNvcmRzPFM+IHwgdW5kZWZpbmVkO1xuICAjZXJyb3I6IEVycm9yIHwgdW5kZWZpbmVkO1xuICBqb2JJbmZvOiBQYXJ0aWFsPEpvYkluZm9WMj47XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDcmVhdGVJbmdlc3RKb2JWMk9wdGlvbnM8Uz4pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy4jY29ubmVjdGlvbiA9IG9wdGlvbnMuY29ubmVjdGlvbjtcbiAgICB0aGlzLiNwb2xsaW5nT3B0aW9ucyA9IG9wdGlvbnMucG9sbGluZ09wdGlvbnM7XG4gICAgdGhpcy5qb2JJbmZvID0gb3B0aW9ucy5qb2JJbmZvO1xuICAgIHRoaXMuI2pvYkRhdGEgPSBuZXcgSm9iRGF0YVYyPFMsIE9wcj4oe1xuICAgICAgY3JlYXRlUmVxdWVzdDogKHJlcXVlc3QpID0+IHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdChyZXF1ZXN0KSxcbiAgICAgIGpvYjogdGhpcyxcbiAgICB9KTtcbiAgICAvLyBkZWZhdWx0IGVycm9yIGhhbmRsZXIgdG8ga2VlcCB0aGUgbGF0ZXN0IGVycm9yXG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyb3IpID0+ICh0aGlzLiNlcnJvciA9IGVycm9yKSk7XG4gIH1cblxuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuam9iSW5mby5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBqb2IgcmVwcmVzZW50aW5nIGEgYnVsayBvcGVyYXRpb24gaW4gdGhlIG9yZ1xuICAgKi9cbiAgYXN5bmMgb3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5qb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgcGF0aDogJycsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhc3NpZ25tZW50UnVsZUlkOiB0aGlzLmpvYkluZm8/LmFzc2lnbm1lbnRSdWxlSWQsXG4gICAgICAgICAgZXh0ZXJuYWxJZEZpZWxkTmFtZTogdGhpcy5qb2JJbmZvPy5leHRlcm5hbElkRmllbGROYW1lLFxuICAgICAgICAgIG9iamVjdDogdGhpcy5qb2JJbmZvPy5vYmplY3QsXG4gICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLmpvYkluZm8/Lm9wZXJhdGlvbixcbiAgICAgICAgICBsaW5lRW5kaW5nOiB0aGlzLmpvYkluZm8/LmxpbmVFbmRpbmcsXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZW1pdCgnb3BlbicpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqIFVwbG9hZCBkYXRhIGZvciBhIGpvYiBpbiBDU1YgZm9ybWF0XG4gICAqXG4gICAqICBAcGFyYW0gaW5wdXQgQ1NWIGFzIGEgc3RyaW5nLCBvciBhcnJheSBvZiByZWNvcmRzIG9yIHJlYWRhYmxlIHN0cmVhbVxuICAgKi9cbiAgYXN5bmMgdXBsb2FkRGF0YShpbnB1dDogc3RyaW5nIHwgUmVjb3JkW10gfCBSZWFkYWJsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuI2pvYkRhdGEuZXhlY3V0ZShpbnB1dCk7XG4gIH1cblxuICBhc3luYyBnZXRBbGxSZXN1bHRzKCk6IFByb21pc2U8SW5nZXN0Sm9iVjJSZXN1bHRzPFM+PiB7XG4gICAgY29uc3QgW1xuICAgICAgc3VjY2Vzc2Z1bFJlc3VsdHMsXG4gICAgICBmYWlsZWRSZXN1bHRzLFxuICAgICAgdW5wcm9jZXNzZWRSZWNvcmRzLFxuICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmdldFN1Y2Nlc3NmdWxSZXN1bHRzKCksXG4gICAgICB0aGlzLmdldEZhaWxlZFJlc3VsdHMoKSxcbiAgICAgIHRoaXMuZ2V0VW5wcm9jZXNzZWRSZWNvcmRzKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIHsgc3VjY2Vzc2Z1bFJlc3VsdHMsIGZhaWxlZFJlc3VsdHMsIHVucHJvY2Vzc2VkUmVjb3JkcyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIG9wZW5lZCBqb2JcbiAgICovXG4gIGFzeW5jIGNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0ZTogSm9iU3RhdGVWMiA9ICdVcGxvYWRDb21wbGV0ZSc7XG4gICAgICB0aGlzLmpvYkluZm8gPSBhd2FpdCB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3Q8Sm9iSW5mb1YyPih7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgcGF0aDogYC8ke3RoaXMuam9iSW5mby5pZH1gLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHN0YXRlIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZW1pdCgndXBsb2FkY29tcGxldGUnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyB0byBhYm9ydFxuICAgKi9cbiAgYXN5bmMgYWJvcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXRlOiBKb2JTdGF0ZVYyID0gJ0Fib3J0ZWQnO1xuICAgICAgdGhpcy5qb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIHBhdGg6IGAvJHt0aGlzLmpvYkluZm8uaWR9YCxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0ZSB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnIH0sXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmVtaXQoJ2Fib3J0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQb2xsIGZvciB0aGUgc3RhdGUgb2YgdGhlIHByb2Nlc3NpbmcgZm9yIHRoZSBqb2IuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgb25seSB0aHJvdyBhZnRlciBhIHRpbWVvdXQuIFRvIGNhcHR1cmUgYVxuICAgKiBqb2IgZmFpbHVyZSB3aGlsZSBwb2xsaW5nIHlvdSBtdXN0IHNldCBhIGxpc3RlbmVyIGZvciB0aGVcbiAgICogYGZhaWxlZGAgZXZlbnQgYmVmb3JlIGNhbGxpbmcgaXQ6XG4gICAqXG4gICAqIGpvYi5vbignZmFpbGVkJywgKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgKiBhd2FpdCBqb2IucG9sbCgpXG4gICAqXG4gICAqIEBwYXJhbSBpbnRlcnZhbCBQb2xsaW5nIGludGVydmFsIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0gdGltZW91dCBQb2xsaW5nIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBqb2IgZmluaXNoZXMgc3VjY2Vzc2Z1bGx5XG4gICAqL1xuICBhc3luYyBwb2xsKFxuICAgIGludGVydmFsOiBudW1iZXIgPSB0aGlzLiNwb2xsaW5nT3B0aW9ucy5wb2xsSW50ZXJ2YWwsXG4gICAgdGltZW91dDogbnVtYmVyID0gdGhpcy4jcG9sbGluZ09wdGlvbnMucG9sbFRpbWVvdXQsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGpvYklkID0gZ2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIHdoaWxlIChzdGFydFRpbWUgKyB0aW1lb3V0ID4gRGF0ZS5ub3coKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jaGVjaygpO1xuICAgICAgICBzd2l0Y2ggKHJlcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgJ09wZW4nOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKb2IgaGFzIG5vdCBiZWVuIHN0YXJ0ZWQnKTtcbiAgICAgICAgICBjYXNlICdBYm9ydGVkJzpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSm9iIGhhcyBiZWVuIGFib3J0ZWQnKTtcbiAgICAgICAgICBjYXNlICdVcGxvYWRDb21wbGV0ZSc6XG4gICAgICAgICAgY2FzZSAnSW5Qcm9ncmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBkZWxheShpbnRlcnZhbCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdGYWlsZWQnOlxuICAgICAgICAgICAgdGhpcy5lbWl0KCdmYWlsZWQnLCBuZXcgRXJyb3IoJ0luZ2VzdCBqb2IgZmFpbGVkIHRvIGNvbXBsZXRlLicpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICBjYXNlICdKb2JDb21wbGV0ZSc6XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2pvYmNvbXBsZXRlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRpbWVvdXRFcnJvciA9IG5ldyBKb2JQb2xsaW5nVGltZW91dEVycm9yKFxuICAgICAgYFBvbGxpbmcgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH1tcy4gSm9iIElkID0gJHtqb2JJZH1gLFxuICAgICAgam9iSWQsXG4gICAgKTtcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgdGltZW91dEVycm9yKTtcbiAgICB0aHJvdyB0aW1lb3V0RXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdGhlIGxhdGVzdCBiYXRjaCBzdGF0dXMgaW4gc2VydmVyXG4gICAqL1xuICBhc3luYyBjaGVjaygpOiBQcm9taXNlPEpvYkluZm9WMj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiBgLyR7Z2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyl9YCxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuam9iSW5mbyA9IGpvYkluZm87XG4gICAgICByZXR1cm4gam9iSW5mbztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFN1Y2Nlc3NmdWxSZXN1bHRzKCk6IFByb21pc2U8SW5nZXN0Sm9iVjJTdWNjZXNzZnVsUmVzdWx0czxTPj4ge1xuICAgIGlmICh0aGlzLiNidWxrSm9iU3VjY2Vzc2Z1bFJlc3VsdHMpIHtcbiAgICAgIHJldHVybiB0aGlzLiNidWxrSm9iU3VjY2Vzc2Z1bFJlc3VsdHM7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDxcbiAgICAgIEluZ2VzdEpvYlYyU3VjY2Vzc2Z1bFJlc3VsdHM8Uz4gfCB1bmRlZmluZWRcbiAgICA+KHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXRoOiBgLyR7Z2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyl9L3N1Y2Nlc3NmdWxSZXN1bHRzYCxcbiAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQvY3N2JyxcbiAgICB9KTtcblxuICAgIHRoaXMuI2J1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cyA9IHJlc3VsdHMgPz8gW107XG5cbiAgICByZXR1cm4gdGhpcy4jYnVsa0pvYlN1Y2Nlc3NmdWxSZXN1bHRzO1xuICB9XG5cbiAgYXN5bmMgZ2V0RmFpbGVkUmVzdWx0cygpOiBQcm9taXNlPEluZ2VzdEpvYlYyRmFpbGVkUmVzdWx0czxTPj4ge1xuICAgIGlmICh0aGlzLiNidWxrSm9iRmFpbGVkUmVzdWx0cykge1xuICAgICAgcmV0dXJuIHRoaXMuI2J1bGtKb2JGYWlsZWRSZXN1bHRzO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3Q8XG4gICAgICBJbmdlc3RKb2JWMkZhaWxlZFJlc3VsdHM8Uz4gfCB1bmRlZmluZWRcbiAgICA+KHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXRoOiBgLyR7Z2V0Sm9iSWRPckVycm9yKHRoaXMuam9iSW5mbyl9L2ZhaWxlZFJlc3VsdHNgLFxuICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dC9jc3YnLFxuICAgIH0pO1xuXG4gICAgdGhpcy4jYnVsa0pvYkZhaWxlZFJlc3VsdHMgPSByZXN1bHRzID8/IFtdO1xuXG4gICAgcmV0dXJuIHRoaXMuI2J1bGtKb2JGYWlsZWRSZXN1bHRzO1xuICB9XG5cbiAgYXN5bmMgZ2V0VW5wcm9jZXNzZWRSZWNvcmRzKCk6IFByb21pc2U8SW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM8Uz4+IHtcbiAgICBpZiAodGhpcy4jYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3Jkcykge1xuICAgICAgcmV0dXJuIHRoaXMuI2J1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHM7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDxcbiAgICAgIEluZ2VzdEpvYlYyVW5wcm9jZXNzZWRSZWNvcmRzPFM+IHwgdW5kZWZpbmVkXG4gICAgPih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGF0aDogYC8ke2dldEpvYklkT3JFcnJvcih0aGlzLmpvYkluZm8pfS91bnByb2Nlc3NlZHJlY29yZHNgLFxuICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dC9jc3YnLFxuICAgIH0pO1xuXG4gICAgdGhpcy4jYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3JkcyA9IHJlc3VsdHMgPz8gW107XG5cbiAgICByZXR1cm4gdGhpcy4jYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3JkcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFuIGluZ2VzdCBqb2IuXG4gICAqL1xuICBhc3luYyBkZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDx2b2lkPih7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgcGF0aDogYC8ke2dldEpvYklkT3JFcnJvcih0aGlzLmpvYkluZm8pfWAsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUluZ2VzdFJlcXVlc3Q8VD4ocmVxdWVzdDogQnVsa1JlcXVlc3QpIHtcbiAgICBjb25zdCB7IHBhdGgsIHJlc3BvbnNlVHlwZSB9ID0gcmVxdWVzdDtcbiAgICBjb25zdCBiYXNlVXJsID0gW1xuICAgICAgdGhpcy4jY29ubmVjdGlvbi5pbnN0YW5jZVVybCxcbiAgICAgICdzZXJ2aWNlcy9kYXRhJyxcbiAgICAgIGB2JHt0aGlzLiNjb25uZWN0aW9uLnZlcnNpb259YCxcbiAgICAgICdqb2JzL2luZ2VzdCcsXG4gICAgXS5qb2luKCcvJyk7XG5cbiAgICByZXR1cm4gbmV3IEJ1bGtBcGlWMih0aGlzLiNjb25uZWN0aW9uLCB7IHJlc3BvbnNlVHlwZSB9KS5yZXF1ZXN0PFQ+KHtcbiAgICAgIC4uLnJlcXVlc3QsXG4gICAgICB1cmw6IGJhc2VVcmwgKyBwYXRoLFxuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIEpvYkRhdGFWMjxcbiAgUyBleHRlbmRzIFNjaGVtYSxcbiAgT3ByIGV4dGVuZHMgSW5nZXN0T3BlcmF0aW9uXG4+IGV4dGVuZHMgV3JpdGFibGUge1xuICByZWFkb25seSAjam9iOiBJbmdlc3RKb2JWMjxTLCBPcHI+O1xuICByZWFkb25seSAjdXBsb2FkU3RyZWFtOiBTZXJpYWxpemFibGU7XG4gIHJlYWRvbmx5ICNkb3dubG9hZFN0cmVhbTogUGFyc2FibGU7XG4gIHJlYWRvbmx5ICNkYXRhU3RyZWFtOiBEdXBsZXg7XG4gICNyZXN1bHQ6IGFueTtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENyZWF0ZUpvYkRhdGFWMk9wdGlvbnM8UywgT3ByPikge1xuICAgIHN1cGVyKHsgb2JqZWN0TW9kZTogdHJ1ZSB9KTtcblxuICAgIGNvbnN0IGNyZWF0ZVJlcXVlc3QgPSBvcHRpb25zLmNyZWF0ZVJlcXVlc3Q7XG5cbiAgICB0aGlzLiNqb2IgPSBvcHRpb25zLmpvYjtcbiAgICB0aGlzLiN1cGxvYWRTdHJlYW0gPSBuZXcgU2VyaWFsaXphYmxlKCk7XG4gICAgdGhpcy4jZG93bmxvYWRTdHJlYW0gPSBuZXcgUGFyc2FibGUoKTtcblxuICAgIGNvbnN0IGNvbnZlcnRlck9wdGlvbnMgPSB7IG51bGxWYWx1ZTogJyNOL0EnIH07XG4gICAgY29uc3QgdXBsb2FkRGF0YVN0cmVhbSA9IHRoaXMuI3VwbG9hZFN0cmVhbS5zdHJlYW0oJ2NzdicsIGNvbnZlcnRlck9wdGlvbnMpO1xuICAgIGNvbnN0IGRvd25sb2FkRGF0YVN0cmVhbSA9IHRoaXMuI2Rvd25sb2FkU3RyZWFtLnN0cmVhbShcbiAgICAgICdjc3YnLFxuICAgICAgY29udmVydGVyT3B0aW9ucyxcbiAgICApO1xuXG4gICAgdGhpcy4jZGF0YVN0cmVhbSA9IGNvbmNhdFN0cmVhbXNBc0R1cGxleChcbiAgICAgIHVwbG9hZERhdGFTdHJlYW0sXG4gICAgICBkb3dubG9hZERhdGFTdHJlYW0sXG4gICAgKTtcblxuICAgIHRoaXMub24oJ2ZpbmlzaCcsICgpID0+IHRoaXMuI3VwbG9hZFN0cmVhbS5lbmQoKSk7XG5cbiAgICB1cGxvYWREYXRhU3RyZWFtLm9uY2UoJ3JlYWRhYmxlJywgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gcGlwZSB1cGxvYWQgZGF0YSB0byBiYXRjaCBBUEkgcmVxdWVzdCBzdHJlYW1cbiAgICAgICAgY29uc3QgcmVxID0gY3JlYXRlUmVxdWVzdCh7XG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICBwYXRoOiBgLyR7dGhpcy4jam9iLmpvYkluZm8/LmlkfS9iYXRjaGVzYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvY3N2JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9KTtcblxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXE7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Jlc3BvbnNlJywgcmVzKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcblxuICAgICAgICB1cGxvYWREYXRhU3RyZWFtLnBpcGUocmVxLnN0cmVhbSgpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIF93cml0ZShyZWNvcmRfOiBSZWNvcmQsIGVuYzogc3RyaW5nLCBjYjogKCkgPT4gdm9pZCkge1xuICAgIGNvbnN0IHsgSWQsIHR5cGUsIGF0dHJpYnV0ZXMsIC4uLnJyZWMgfSA9IHJlY29yZF87XG4gICAgbGV0IHJlY29yZDtcbiAgICBzd2l0Y2ggKHRoaXMuI2pvYi5qb2JJbmZvLm9wZXJhdGlvbikge1xuICAgICAgY2FzZSAnaW5zZXJ0JzpcbiAgICAgICAgcmVjb3JkID0gcnJlYztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgY2FzZSAnaGFyZERlbGV0ZSc6XG4gICAgICAgIHJlY29yZCA9IHsgSWQgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZWNvcmQgPSB7IElkLCAuLi5ycmVjIH07XG4gICAgfVxuICAgIHRoaXMuI3VwbG9hZFN0cmVhbS53cml0ZShyZWNvcmQsIGVuYywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZHVwbGV4IHN0cmVhbSB3aGljaCBhY2NlcHRzIENTViBkYXRhIGlucHV0IGFuZCBiYXRjaCByZXN1bHQgb3V0cHV0XG4gICAqL1xuICBzdHJlYW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuI2RhdGFTdHJlYW07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBiYXRjaCBvcGVyYXRpb25cbiAgICovXG4gIGV4ZWN1dGUoaW5wdXQ/OiBzdHJpbmcgfCBSZWNvcmRbXSB8IFJlYWRhYmxlKSB7XG4gICAgaWYgKHRoaXMuI3Jlc3VsdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhIGNhbiBvbmx5IGJlIHVwbG9hZGVkIHRvIGEgam9iIG9uY2UuJyk7XG4gICAgfVxuXG4gICAgdGhpcy4jcmVzdWx0ID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5vbmNlKCdyZXNwb25zZScsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICB0aGlzLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGlmIChpc09iamVjdChpbnB1dCkgJiYgJ3BpcGUnIGluIGlucHV0ICYmIGlzRnVuY3Rpb24oaW5wdXQucGlwZSkpIHtcbiAgICAgIC8vIGlmIGlucHV0IGhhcyBzdHJlYW0uUmVhZGFibGUgaW50ZXJmYWNlXG4gICAgICBpbnB1dC5waXBlKHRoaXMuI2RhdGFTdHJlYW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgaW5wdXQpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyZWNvcmQpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY29yZFtrZXldID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgcmVjb3JkW2tleV0gPSBTdHJpbmcocmVjb3JkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLndyaXRlKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLiNkYXRhU3RyZWFtLndyaXRlKGlucHV0LCAndXRmOCcpO1xuICAgICAgICB0aGlzLiNkYXRhU3RyZWFtLmVuZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb21pc2UvQSsgaW50ZXJmYWNlXG4gICAqIERlbGVnYXRlIHRvIHByb21pc2UsIHJldHVybiBwcm9taXNlIGluc3RhbmNlIGZvciBiYXRjaCByZXN1bHRcbiAgICovXG4gIHRoZW4ob25SZXNvbHZlZDogKCkgPT4gdm9pZCwgb25SZWplY3Q6IChlcnI6IGFueSkgPT4gdm9pZCkge1xuICAgIGlmICh0aGlzLiNyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5leGVjdXRlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiNyZXN1bHQhLnRoZW4ob25SZXNvbHZlZCwgb25SZWplY3QpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEpvYklkT3JFcnJvcihqb2JJbmZvOiBQYXJ0aWFsPEpvYkluZm9WMj4gfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICBjb25zdCBqb2JJZCA9IGpvYkluZm8/LmlkO1xuICBpZiAoam9iSWQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gam9iIGlkLCBtYXliZSB5b3UgbmVlZCB0byBjYWxsIGBqb2Iub3BlbigpYCBmaXJzdC4nKTtcbiAgfVxuICByZXR1cm4gam9iSWQ7XG59XG5cbmZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcbiAqIFJlZ2lzdGVyIGhvb2sgaW4gY29ubmVjdGlvbiBpbnN0YW50aWF0aW9uIGZvciBkeW5hbWljYWxseSBhZGRpbmcgdGhpcyBBUEkgbW9kdWxlIGZlYXR1cmVzXG4gKi9cbnJlZ2lzdGVyTW9kdWxlKCdidWxrJywgKGNvbm4pID0+IG5ldyBCdWxrKGNvbm4pKTtcbnJlZ2lzdGVyTW9kdWxlKCdidWxrMicsIChjb25uKSA9PiBuZXcgQnVsa1YyKGNvbm4pKTtcblxuZXhwb3J0IGRlZmF1bHQgQnVsaztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQSxZQUFZLFFBQVEsUUFBUTtBQUNy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