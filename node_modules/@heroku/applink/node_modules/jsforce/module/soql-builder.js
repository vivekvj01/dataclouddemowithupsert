import "core-js/modules/es.array.iterator";
import "core-js/modules/es.string.replace";
import _sortInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/sort";
import _includesInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/includes";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$entries from "@babel/runtime-corejs3/core-js-stable/object/entries";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _mapInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/map";
import _Object$values from "@babel/runtime-corejs3/core-js-stable/object/values";
/**
 * @file Create and build SOQL string from configuration
 * @author Shinichi Tomita <shinichi.tomita@gmail.com>
 */
import SfDate from './date';
/** @private **/
function escapeSOQLString(str) {
  return String(str || '').replace(/'/g, "\\'");
}

/** @private **/
function createFieldsClause(fields, childQueries = {}) {
  const cqueries = _Object$values(childQueries);
  // eslint-disable-next-line no-use-before-define
  return [...(fields || ['Id']), ..._mapInstanceProperty(cqueries).call(cqueries, cquery => `(${createSOQL(cquery)})`)].join(', ');
}

/** @private **/
function createValueExpression(value) {
  if (_Array$isArray(value)) {
    return value.length > 0 ? `(${_mapInstanceProperty(value).call(value, createValueExpression).join(', ')})` : undefined;
  }
  if (value instanceof SfDate) {
    return value.toString();
  }
  if (typeof value === 'string') {
    return `'${escapeSOQLString(value)}'`;
  }
  if (typeof value === 'number') {
    return value.toString();
  }
  if (value === null) {
    return 'null';
  }
  return value;
}
const opMap = {
  '=': '=',
  $eq: '=',
  '!=': '!=',
  $ne: '!=',
  '>': '>',
  $gt: '>',
  '<': '<',
  $lt: '<',
  '>=': '>=',
  $gte: '>=',
  '<=': '<=',
  $lte: '<=',
  $like: 'LIKE',
  $nlike: 'NOT LIKE',
  $in: 'IN',
  $nin: 'NOT IN',
  $includes: 'INCLUDES',
  $excludes: 'EXCLUDES',
  $exists: 'EXISTS'
};

/** @private **/
function createFieldExpression(field, value) {
  let op = '$eq';
  let _value = value;

  // Assume the `$in` operator if value is an array and none was supplied.
  if (_Array$isArray(value)) {
    op = '$in';
  } else if (typeof value === 'object' && value !== null) {
    // Otherwise, if an object was passed then process the supplied ops.
    for (const k of _Object$keys(value)) {
      if (k[0] === '$') {
        op = k;
        _value = value[k];
        break;
      }
    }
  }
  const sfop = opMap[op];
  if (!sfop || typeof _value === 'undefined') {
    return null;
  }
  const valueExpr = createValueExpression(_value);
  if (typeof valueExpr === 'undefined') {
    return null;
  }
  switch (sfop) {
    case 'NOT LIKE':
      return `(${['NOT', field, 'LIKE', valueExpr].join(' ')})`;
    case 'EXISTS':
      return [field, _value ? '!=' : '=', 'null'].join(' ');
    default:
      return [field, sfop, valueExpr].join(' ');
  }
}

/** @private **/
function createOrderByClause(sort = []) {
  let _sort = [];
  if (typeof sort === 'string') {
    var _context;
    if (/,|\s+(asc|desc)\s*$/.test(sort)) {
      // must be specified in pure "order by" clause. Return raw config.
      return sort;
    }
    // sort order in mongoose-style expression.
    // e.g. "FieldA -FieldB" => "ORDER BY FieldA ASC, FieldB DESC"
    _sort = _mapInstanceProperty(_context = sort.split(/\s+/)).call(_context, field => {
      let dir = 'ASC'; // ascending
      const flag = field[0];
      if (flag === '-') {
        dir = 'DESC';
        field = field.substring(1); // eslint-disable-line no-param-reassign
      } else if (flag === '+') {
        field = field.substring(1); // eslint-disable-line no-param-reassign
      }

      return [field, dir];
    });
  } else if (_Array$isArray(sort)) {
    _sort = sort;
  } else {
    var _context2;
    _sort = _mapInstanceProperty(_context2 = _Object$entries(sort)).call(_context2, ([field, dir]) => [field, dir]);
  }
  return _mapInstanceProperty(_sort).call(_sort, ([field, dir]) => {
    /* eslint-disable no-param-reassign */
    switch (String(dir)) {
      case 'DESC':
      case 'desc':
      case 'descending':
      case '-':
      case '-1':
        dir = 'DESC';
        break;
      default:
        dir = 'ASC';
    }
    return `${field} ${dir}`;
  }).join(', ');
}
/** @private **/
function createConditionClause(conditions = {}, operator = 'AND', depth = 0) {
  var _context5;
  if (typeof conditions === 'string') {
    return conditions;
  }
  let conditionList = [];
  if (!_Array$isArray(conditions)) {
    var _context3;
    // if passed in hash object
    const conditionsMap = conditions;
    conditionList = _mapInstanceProperty(_context3 = _Object$keys(conditionsMap)).call(_context3, key => ({
      key,
      value: conditionsMap[key]
    }));
  } else {
    conditionList = _mapInstanceProperty(conditions).call(conditions, cond => {
      var _context4;
      const conds = _mapInstanceProperty(_context4 = _Object$keys(cond)).call(_context4, key => ({
        key,
        value: cond[key]
      }));
      return conds.length > 1 ? {
        key: '$and',
        value: _mapInstanceProperty(conds).call(conds, c => ({
          [c.key]: c.value
        }))
      } : conds[0];
    });
  }
  const conditionClauses = _filterInstanceProperty(_context5 = _mapInstanceProperty(conditionList).call(conditionList, cond => {
    let d = depth + 1;
    let op;
    switch (cond.key) {
      case '$or':
      case '$and':
      case '$not':
        if (operator !== 'NOT' && conditionList.length === 1) {
          d = depth; // not change tree depth
        }

        op = cond.key === '$or' ? 'OR' : cond.key === '$and' ? 'AND' : 'NOT';
        return createConditionClause(cond.value, op, d);
      default:
        return createFieldExpression(cond.key, cond.value);
    }
  })).call(_context5, expr => expr);
  let hasParen;
  if (operator === 'NOT') {
    hasParen = depth > 0;
    return `${hasParen ? '(' : ''}NOT ${conditionClauses[0]}${hasParen ? ')' : ''}`;
  }
  hasParen = depth > 0 && conditionClauses.length > 1;
  return (hasParen ? '(' : '') + conditionClauses.join(` ${operator} `) + (hasParen ? ')' : '');
}

/**
 * Create SOQL
 * @private
 */
export function createSOQL(query) {
  let soql = ['SELECT ', createFieldsClause(query.fields, _includesInstanceProperty(query)), ' FROM ', query.table].join('');
  const cond = createConditionClause(query.conditions);
  if (cond) {
    soql += ` WHERE ${cond}`;
  }
  const orderby = createOrderByClause(_sortInstanceProperty(query));
  if (orderby) {
    soql += ` ORDER BY ${orderby}`;
  }
  if (query.limit) {
    soql += ` LIMIT ${query.limit}`;
  }
  if (query.offset) {
    soql += ` OFFSET ${query.offset}`;
  }
  return soql;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZkRhdGUiLCJlc2NhcGVTT1FMU3RyaW5nIiwic3RyIiwiU3RyaW5nIiwicmVwbGFjZSIsImNyZWF0ZUZpZWxkc0NsYXVzZSIsImZpZWxkcyIsImNoaWxkUXVlcmllcyIsImNxdWVyaWVzIiwiX09iamVjdCR2YWx1ZXMiLCJfbWFwSW5zdGFuY2VQcm9wZXJ0eSIsImNhbGwiLCJjcXVlcnkiLCJjcmVhdGVTT1FMIiwiam9pbiIsImNyZWF0ZVZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIiwiX0FycmF5JGlzQXJyYXkiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ0b1N0cmluZyIsIm9wTWFwIiwiJGVxIiwiJG5lIiwiJGd0IiwiJGx0IiwiJGd0ZSIsIiRsdGUiLCIkbGlrZSIsIiRubGlrZSIsIiRpbiIsIiRuaW4iLCIkaW5jbHVkZXMiLCIkZXhjbHVkZXMiLCIkZXhpc3RzIiwiY3JlYXRlRmllbGRFeHByZXNzaW9uIiwiZmllbGQiLCJvcCIsIl92YWx1ZSIsImsiLCJfT2JqZWN0JGtleXMiLCJzZm9wIiwidmFsdWVFeHByIiwiY3JlYXRlT3JkZXJCeUNsYXVzZSIsInNvcnQiLCJfc29ydCIsIl9jb250ZXh0IiwidGVzdCIsInNwbGl0IiwiZGlyIiwiZmxhZyIsInN1YnN0cmluZyIsIl9jb250ZXh0MiIsIl9PYmplY3QkZW50cmllcyIsImNyZWF0ZUNvbmRpdGlvbkNsYXVzZSIsImNvbmRpdGlvbnMiLCJvcGVyYXRvciIsImRlcHRoIiwiX2NvbnRleHQ1IiwiY29uZGl0aW9uTGlzdCIsIl9jb250ZXh0MyIsImNvbmRpdGlvbnNNYXAiLCJrZXkiLCJjb25kIiwiX2NvbnRleHQ0IiwiY29uZHMiLCJjIiwiY29uZGl0aW9uQ2xhdXNlcyIsIl9maWx0ZXJJbnN0YW5jZVByb3BlcnR5IiwiZCIsImV4cHIiLCJoYXNQYXJlbiIsInF1ZXJ5Iiwic29xbCIsIl9pbmNsdWRlc0luc3RhbmNlUHJvcGVydHkiLCJ0YWJsZSIsIm9yZGVyYnkiLCJfc29ydEluc3RhbmNlUHJvcGVydHkiLCJsaW1pdCIsIm9mZnNldCJdLCJzb3VyY2VzIjpbIi4uL3NyYy9zb3FsLWJ1aWxkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBDcmVhdGUgYW5kIGJ1aWxkIFNPUUwgc3RyaW5nIGZyb20gY29uZmlndXJhdGlvblxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cbmltcG9ydCBTZkRhdGUgZnJvbSAnLi9kYXRlJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIENvbmRpdGlvbiA9XG4gIHwgc3RyaW5nXG4gIHwgeyBbZmllbGQ6IHN0cmluZ106IGFueSB9XG4gIHwgQXJyYXk8eyBbZmllbGQ6IHN0cmluZ106IGFueSB9PjtcblxuZXhwb3J0IHR5cGUgU29ydERpciA9ICdBU0MnIHwgJ0RFU0MnIHwgJ2FzYycgfCAnZGVzYycgfCAxIHwgLTE7XG5cbmV4cG9ydCB0eXBlIFNvcnQgPVxuICB8IHN0cmluZ1xuICB8IEFycmF5PFtzdHJpbmcsIFNvcnREaXJdPlxuICB8IHsgW2ZpZWxkOiBzdHJpbmddOiBTb3J0RGlyIH07XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5Q29uZmlnID0ge1xuICBmaWVsZHM/OiBzdHJpbmdbXTtcbiAgaW5jbHVkZXM/OiB7IFtmaWVsZDogc3RyaW5nXTogUXVlcnlDb25maWcgfTtcbiAgdGFibGU/OiBzdHJpbmc7XG4gIGNvbmRpdGlvbnM/OiBDb25kaXRpb247XG4gIHNvcnQ/OiBTb3J0O1xuICBsaW1pdD86IG51bWJlcjtcbiAgb2Zmc2V0PzogbnVtYmVyO1xufTtcblxuLyoqIEBwcml2YXRlICoqL1xuZnVuY3Rpb24gZXNjYXBlU09RTFN0cmluZyhzdHI6IE9wdGlvbmFsPHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4+KSB7XG4gIHJldHVybiBTdHJpbmcoc3RyIHx8ICcnKS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIik7XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZUZpZWxkc0NsYXVzZShcbiAgZmllbGRzPzogc3RyaW5nW10sXG4gIGNoaWxkUXVlcmllczogeyBbbmFtZTogc3RyaW5nXTogUXVlcnlDb25maWcgfSA9IHt9LFxuKTogc3RyaW5nIHtcbiAgY29uc3QgY3F1ZXJpZXM6IFF1ZXJ5Q29uZmlnW10gPSAoT2JqZWN0LnZhbHVlcyhcbiAgICBjaGlsZFF1ZXJpZXMsXG4gICkgYXMgYW55KSBhcyBRdWVyeUNvbmZpZ1tdO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgcmV0dXJuIFtcbiAgICAuLi4oZmllbGRzIHx8IFsnSWQnXSksXG4gICAgLi4uY3F1ZXJpZXMubWFwKChjcXVlcnkpID0+IGAoJHtjcmVhdGVTT1FMKGNxdWVyeSl9KWApLFxuICBdLmpvaW4oJywgJyk7XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZVZhbHVlRXhwcmVzc2lvbih2YWx1ZTogYW55KTogT3B0aW9uYWw8c3RyaW5nPiB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiAwXG4gICAgICA/IGAoJHt2YWx1ZS5tYXAoY3JlYXRlVmFsdWVFeHByZXNzaW9uKS5qb2luKCcsICcpfSlgXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZkRhdGUpIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBgJyR7ZXNjYXBlU09RTFN0cmluZyh2YWx1ZSl9J2A7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gJ251bGwnO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuY29uc3Qgb3BNYXA6IHsgW29wOiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgJz0nOiAnPScsXG4gICRlcTogJz0nLFxuICAnIT0nOiAnIT0nLFxuICAkbmU6ICchPScsXG4gICc+JzogJz4nLFxuICAkZ3Q6ICc+JyxcbiAgJzwnOiAnPCcsXG4gICRsdDogJzwnLFxuICAnPj0nOiAnPj0nLFxuICAkZ3RlOiAnPj0nLFxuICAnPD0nOiAnPD0nLFxuICAkbHRlOiAnPD0nLFxuICAkbGlrZTogJ0xJS0UnLFxuICAkbmxpa2U6ICdOT1QgTElLRScsXG4gICRpbjogJ0lOJyxcbiAgJG5pbjogJ05PVCBJTicsXG4gICRpbmNsdWRlczogJ0lOQ0xVREVTJyxcbiAgJGV4Y2x1ZGVzOiAnRVhDTFVERVMnLFxuICAkZXhpc3RzOiAnRVhJU1RTJyxcbn07XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZUZpZWxkRXhwcmVzc2lvbihmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogT3B0aW9uYWw8c3RyaW5nPiB7XG4gIGxldCBvcCA9ICckZXEnO1xuICBsZXQgX3ZhbHVlID0gdmFsdWU7XG5cbiAgLy8gQXNzdW1lIHRoZSBgJGluYCBvcGVyYXRvciBpZiB2YWx1ZSBpcyBhbiBhcnJheSBhbmQgbm9uZSB3YXMgc3VwcGxpZWQuXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIG9wID0gJyRpbic7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIC8vIE90aGVyd2lzZSwgaWYgYW4gb2JqZWN0IHdhcyBwYXNzZWQgdGhlbiBwcm9jZXNzIHRoZSBzdXBwbGllZCBvcHMuXG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHZhbHVlKSkge1xuICAgICAgaWYgKGtbMF0gPT09ICckJykge1xuICAgICAgICBvcCA9IGs7XG4gICAgICAgIF92YWx1ZSA9IHZhbHVlW2tdO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3Qgc2ZvcCA9IG9wTWFwW29wXTtcbiAgaWYgKCFzZm9wIHx8IHR5cGVvZiBfdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgdmFsdWVFeHByID0gY3JlYXRlVmFsdWVFeHByZXNzaW9uKF92YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWVFeHByID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHN3aXRjaCAoc2ZvcCkge1xuICAgIGNhc2UgJ05PVCBMSUtFJzpcbiAgICAgIHJldHVybiBgKCR7WydOT1QnLCBmaWVsZCwgJ0xJS0UnLCB2YWx1ZUV4cHJdLmpvaW4oJyAnKX0pYDtcbiAgICBjYXNlICdFWElTVFMnOlxuICAgICAgcmV0dXJuIFtmaWVsZCwgX3ZhbHVlID8gJyE9JyA6ICc9JywgJ251bGwnXS5qb2luKCcgJyk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbZmllbGQsIHNmb3AsIHZhbHVlRXhwcl0uam9pbignICcpO1xuICB9XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZU9yZGVyQnlDbGF1c2Uoc29ydDogU29ydCA9IFtdKTogc3RyaW5nIHtcbiAgbGV0IF9zb3J0OiBBcnJheTxbc3RyaW5nLCBTb3J0RGlyXT4gPSBbXTtcbiAgaWYgKHR5cGVvZiBzb3J0ID09PSAnc3RyaW5nJykge1xuICAgIGlmICgvLHxcXHMrKGFzY3xkZXNjKVxccyokLy50ZXN0KHNvcnQpKSB7XG4gICAgICAvLyBtdXN0IGJlIHNwZWNpZmllZCBpbiBwdXJlIFwib3JkZXIgYnlcIiBjbGF1c2UuIFJldHVybiByYXcgY29uZmlnLlxuICAgICAgcmV0dXJuIHNvcnQ7XG4gICAgfVxuICAgIC8vIHNvcnQgb3JkZXIgaW4gbW9uZ29vc2Utc3R5bGUgZXhwcmVzc2lvbi5cbiAgICAvLyBlLmcuIFwiRmllbGRBIC1GaWVsZEJcIiA9PiBcIk9SREVSIEJZIEZpZWxkQSBBU0MsIEZpZWxkQiBERVNDXCJcbiAgICBfc29ydCA9IHNvcnQuc3BsaXQoL1xccysvKS5tYXAoKGZpZWxkKSA9PiB7XG4gICAgICBsZXQgZGlyOiBTb3J0RGlyID0gJ0FTQyc7IC8vIGFzY2VuZGluZ1xuICAgICAgY29uc3QgZmxhZyA9IGZpZWxkWzBdO1xuICAgICAgaWYgKGZsYWcgPT09ICctJykge1xuICAgICAgICBkaXIgPSAnREVTQyc7XG4gICAgICAgIGZpZWxkID0gZmllbGQuc3Vic3RyaW5nKDEpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICcrJykge1xuICAgICAgICBmaWVsZCA9IGZpZWxkLnN1YnN0cmluZygxKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgfVxuICAgICAgcmV0dXJuIFtmaWVsZCwgZGlyXSBhcyBbc3RyaW5nLCBTb3J0RGlyXTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNvcnQpKSB7XG4gICAgX3NvcnQgPSBzb3J0O1xuICB9IGVsc2Uge1xuICAgIF9zb3J0ID0gT2JqZWN0LmVudHJpZXMoc29ydCkubWFwKFxuICAgICAgKFtmaWVsZCwgZGlyXSkgPT4gW2ZpZWxkLCBkaXJdIGFzIFtzdHJpbmcsIFNvcnREaXJdLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIF9zb3J0XG4gICAgLm1hcCgoW2ZpZWxkLCBkaXJdKSA9PiB7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuICAgICAgc3dpdGNoIChTdHJpbmcoZGlyKSkge1xuICAgICAgICBjYXNlICdERVNDJzpcbiAgICAgICAgY2FzZSAnZGVzYyc6XG4gICAgICAgIGNhc2UgJ2Rlc2NlbmRpbmcnOlxuICAgICAgICBjYXNlICctJzpcbiAgICAgICAgY2FzZSAnLTEnOlxuICAgICAgICAgIGRpciA9ICdERVNDJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBkaXIgPSAnQVNDJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtmaWVsZH0gJHtkaXJ9YDtcbiAgICB9KVxuICAgIC5qb2luKCcsICcpO1xufVxuXG50eXBlIExvZ2ljYWxPcGVyYXRvciA9ICdBTkQnIHwgJ09SJyB8ICdOT1QnO1xuXG4vKiogQHByaXZhdGUgKiovXG5mdW5jdGlvbiBjcmVhdGVDb25kaXRpb25DbGF1c2UoXG4gIGNvbmRpdGlvbnM6IENvbmRpdGlvbiA9IHt9LFxuICBvcGVyYXRvcjogTG9naWNhbE9wZXJhdG9yID0gJ0FORCcsXG4gIGRlcHRoOiBudW1iZXIgPSAwLFxuKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBjb25kaXRpb25zID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBjb25kaXRpb25zO1xuICB9XG4gIGxldCBjb25kaXRpb25MaXN0OiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogQ29uZGl0aW9uIH0+ID0gW107XG4gIGlmICghQXJyYXkuaXNBcnJheShjb25kaXRpb25zKSkge1xuICAgIC8vIGlmIHBhc3NlZCBpbiBoYXNoIG9iamVjdFxuICAgIGNvbnN0IGNvbmRpdGlvbnNNYXAgPSBjb25kaXRpb25zO1xuICAgIGNvbmRpdGlvbkxpc3QgPSBPYmplY3Qua2V5cyhjb25kaXRpb25zTWFwKS5tYXAoKGtleSkgPT4gKHtcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlOiBjb25kaXRpb25zTWFwW2tleV0sXG4gICAgfSkpO1xuICB9IGVsc2Uge1xuICAgIGNvbmRpdGlvbkxpc3QgPSBjb25kaXRpb25zLm1hcCgoY29uZCkgPT4ge1xuICAgICAgY29uc3QgY29uZHMgPSBPYmplY3Qua2V5cyhjb25kKS5tYXAoKGtleSkgPT4gKHsga2V5LCB2YWx1ZTogY29uZFtrZXldIH0pKTtcbiAgICAgIHJldHVybiBjb25kcy5sZW5ndGggPiAxXG4gICAgICAgID8geyBrZXk6ICckYW5kJywgdmFsdWU6IGNvbmRzLm1hcCgoYykgPT4gKHsgW2Mua2V5XTogYy52YWx1ZSB9KSkgfVxuICAgICAgICA6IGNvbmRzWzBdO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNvbmRpdGlvbkNsYXVzZXMgPSAoY29uZGl0aW9uTGlzdFxuICAgIC5tYXAoKGNvbmQpID0+IHtcbiAgICAgIGxldCBkID0gZGVwdGggKyAxO1xuICAgICAgbGV0IG9wOiBPcHRpb25hbDxMb2dpY2FsT3BlcmF0b3I+O1xuICAgICAgc3dpdGNoIChjb25kLmtleSkge1xuICAgICAgICBjYXNlICckb3InOlxuICAgICAgICBjYXNlICckYW5kJzpcbiAgICAgICAgY2FzZSAnJG5vdCc6XG4gICAgICAgICAgaWYgKG9wZXJhdG9yICE9PSAnTk9UJyAmJiBjb25kaXRpb25MaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZCA9IGRlcHRoOyAvLyBub3QgY2hhbmdlIHRyZWUgZGVwdGhcbiAgICAgICAgICB9XG4gICAgICAgICAgb3AgPSBjb25kLmtleSA9PT0gJyRvcicgPyAnT1InIDogY29uZC5rZXkgPT09ICckYW5kJyA/ICdBTkQnIDogJ05PVCc7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbmRpdGlvbkNsYXVzZShjb25kLnZhbHVlLCBvcCwgZCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUZpZWxkRXhwcmVzc2lvbihjb25kLmtleSwgY29uZC52YWx1ZSk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuZmlsdGVyKChleHByKSA9PiBleHByKSBhcyBhbnkpIGFzIHN0cmluZ1tdO1xuXG4gIGxldCBoYXNQYXJlbjogYm9vbGVhbjtcbiAgaWYgKG9wZXJhdG9yID09PSAnTk9UJykge1xuICAgIGhhc1BhcmVuID0gZGVwdGggPiAwO1xuICAgIHJldHVybiBgJHtoYXNQYXJlbiA/ICcoJyA6ICcnfU5PVCAke2NvbmRpdGlvbkNsYXVzZXNbMF19JHtcbiAgICAgIGhhc1BhcmVuID8gJyknIDogJydcbiAgICB9YDtcbiAgfVxuICBoYXNQYXJlbiA9IGRlcHRoID4gMCAmJiBjb25kaXRpb25DbGF1c2VzLmxlbmd0aCA+IDE7XG4gIHJldHVybiAoXG4gICAgKGhhc1BhcmVuID8gJygnIDogJycpICtcbiAgICBjb25kaXRpb25DbGF1c2VzLmpvaW4oYCAke29wZXJhdG9yfSBgKSArXG4gICAgKGhhc1BhcmVuID8gJyknIDogJycpXG4gICk7XG59XG5cbi8qKlxuICogQ3JlYXRlIFNPUUxcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTT1FMKHF1ZXJ5OiBRdWVyeUNvbmZpZyk6IHN0cmluZyB7XG4gIGxldCBzb3FsID0gW1xuICAgICdTRUxFQ1QgJyxcbiAgICBjcmVhdGVGaWVsZHNDbGF1c2UocXVlcnkuZmllbGRzLCBxdWVyeS5pbmNsdWRlcyksXG4gICAgJyBGUk9NICcsXG4gICAgcXVlcnkudGFibGUsXG4gIF0uam9pbignJyk7XG4gIGNvbnN0IGNvbmQgPSBjcmVhdGVDb25kaXRpb25DbGF1c2UocXVlcnkuY29uZGl0aW9ucyk7XG4gIGlmIChjb25kKSB7XG4gICAgc29xbCArPSBgIFdIRVJFICR7Y29uZH1gO1xuICB9XG4gIGNvbnN0IG9yZGVyYnkgPSBjcmVhdGVPcmRlckJ5Q2xhdXNlKHF1ZXJ5LnNvcnQpO1xuICBpZiAob3JkZXJieSkge1xuICAgIHNvcWwgKz0gYCBPUkRFUiBCWSAke29yZGVyYnl9YDtcbiAgfVxuICBpZiAocXVlcnkubGltaXQpIHtcbiAgICBzb3FsICs9IGAgTElNSVQgJHtxdWVyeS5saW1pdH1gO1xuICB9XG4gIGlmIChxdWVyeS5vZmZzZXQpIHtcbiAgICBzb3FsICs9IGAgT0ZGU0VUICR7cXVlcnkub2Zmc2V0fWA7XG4gIH1cbiAgcmV0dXJuIHNvcWw7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU9BLE1BQU0sTUFBTSxRQUFRO0FBeUIzQjtBQUNBLFNBQVNDLGdCQUFnQkEsQ0FBQ0MsR0FBd0MsRUFBRTtFQUNsRSxPQUFPQyxNQUFNLENBQUNELEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQ0UsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUM7QUFDL0M7O0FBRUE7QUFDQSxTQUFTQyxrQkFBa0JBLENBQ3pCQyxNQUFpQixFQUNqQkMsWUFBNkMsR0FBRyxDQUFDLENBQUMsRUFDMUM7RUFDUixNQUFNQyxRQUF1QixHQUFJQyxjQUFBLENBQy9CRixZQUNGLENBQTBCO0VBQzFCO0VBQ0EsT0FBTyxDQUNMLElBQUlELE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQ3JCLEdBQUdJLG9CQUFBLENBQUFGLFFBQVEsRUFBQUcsSUFBQSxDQUFSSCxRQUFRLEVBQU1JLE1BQU0sSUFBTSxJQUFHQyxVQUFVLENBQUNELE1BQU0sQ0FBRSxHQUFFLENBQUMsQ0FDdkQsQ0FBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNkOztBQUVBO0FBQ0EsU0FBU0MscUJBQXFCQSxDQUFDQyxLQUFVLEVBQW9CO0VBQzNELElBQUlDLGNBQUEsQ0FBY0QsS0FBSyxDQUFDLEVBQUU7SUFDeEIsT0FBT0EsS0FBSyxDQUFDRSxNQUFNLEdBQUcsQ0FBQyxHQUNsQixJQUFHUixvQkFBQSxDQUFBTSxLQUFLLEVBQUFMLElBQUEsQ0FBTEssS0FBSyxFQUFLRCxxQkFBcUIsQ0FBQyxDQUFDRCxJQUFJLENBQUMsSUFBSSxDQUFFLEdBQUUsR0FDbERLLFNBQVM7RUFDZjtFQUNBLElBQUlILEtBQUssWUFBWWhCLE1BQU0sRUFBRTtJQUMzQixPQUFPZ0IsS0FBSyxDQUFDSSxRQUFRLENBQUMsQ0FBQztFQUN6QjtFQUNBLElBQUksT0FBT0osS0FBSyxLQUFLLFFBQVEsRUFBRTtJQUM3QixPQUFRLElBQUdmLGdCQUFnQixDQUFDZSxLQUFLLENBQUUsR0FBRTtFQUN2QztFQUNBLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsRUFBRTtJQUM3QixPQUFPQSxLQUFLLENBQUNJLFFBQVEsQ0FBQyxDQUFDO0VBQ3pCO0VBQ0EsSUFBSUosS0FBSyxLQUFLLElBQUksRUFBRTtJQUNsQixPQUFPLE1BQU07RUFDZjtFQUNBLE9BQU9BLEtBQUs7QUFDZDtBQUVBLE1BQU1LLEtBQStCLEdBQUc7RUFDdEMsR0FBRyxFQUFFLEdBQUc7RUFDUkMsR0FBRyxFQUFFLEdBQUc7RUFDUixJQUFJLEVBQUUsSUFBSTtFQUNWQyxHQUFHLEVBQUUsSUFBSTtFQUNULEdBQUcsRUFBRSxHQUFHO0VBQ1JDLEdBQUcsRUFBRSxHQUFHO0VBQ1IsR0FBRyxFQUFFLEdBQUc7RUFDUkMsR0FBRyxFQUFFLEdBQUc7RUFDUixJQUFJLEVBQUUsSUFBSTtFQUNWQyxJQUFJLEVBQUUsSUFBSTtFQUNWLElBQUksRUFBRSxJQUFJO0VBQ1ZDLElBQUksRUFBRSxJQUFJO0VBQ1ZDLEtBQUssRUFBRSxNQUFNO0VBQ2JDLE1BQU0sRUFBRSxVQUFVO0VBQ2xCQyxHQUFHLEVBQUUsSUFBSTtFQUNUQyxJQUFJLEVBQUUsUUFBUTtFQUNkQyxTQUFTLEVBQUUsVUFBVTtFQUNyQkMsU0FBUyxFQUFFLFVBQVU7RUFDckJDLE9BQU8sRUFBRTtBQUNYLENBQUM7O0FBRUQ7QUFDQSxTQUFTQyxxQkFBcUJBLENBQUNDLEtBQWEsRUFBRXBCLEtBQVUsRUFBb0I7RUFDMUUsSUFBSXFCLEVBQUUsR0FBRyxLQUFLO0VBQ2QsSUFBSUMsTUFBTSxHQUFHdEIsS0FBSzs7RUFFbEI7RUFDQSxJQUFJQyxjQUFBLENBQWNELEtBQUssQ0FBQyxFQUFFO0lBQ3hCcUIsRUFBRSxHQUFHLEtBQUs7RUFDWixDQUFDLE1BQU0sSUFBSSxPQUFPckIsS0FBSyxLQUFLLFFBQVEsSUFBSUEsS0FBSyxLQUFLLElBQUksRUFBRTtJQUN0RDtJQUNBLEtBQUssTUFBTXVCLENBQUMsSUFBSUMsWUFBQSxDQUFZeEIsS0FBSyxDQUFDLEVBQUU7TUFDbEMsSUFBSXVCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7UUFDaEJGLEVBQUUsR0FBR0UsQ0FBQztRQUNORCxNQUFNLEdBQUd0QixLQUFLLENBQUN1QixDQUFDLENBQUM7UUFDakI7TUFDRjtJQUNGO0VBQ0Y7RUFDQSxNQUFNRSxJQUFJLEdBQUdwQixLQUFLLENBQUNnQixFQUFFLENBQUM7RUFDdEIsSUFBSSxDQUFDSSxJQUFJLElBQUksT0FBT0gsTUFBTSxLQUFLLFdBQVcsRUFBRTtJQUMxQyxPQUFPLElBQUk7RUFDYjtFQUNBLE1BQU1JLFNBQVMsR0FBRzNCLHFCQUFxQixDQUFDdUIsTUFBTSxDQUFDO0VBQy9DLElBQUksT0FBT0ksU0FBUyxLQUFLLFdBQVcsRUFBRTtJQUNwQyxPQUFPLElBQUk7RUFDYjtFQUNBLFFBQVFELElBQUk7SUFDVixLQUFLLFVBQVU7TUFDYixPQUFRLElBQUcsQ0FBQyxLQUFLLEVBQUVMLEtBQUssRUFBRSxNQUFNLEVBQUVNLFNBQVMsQ0FBQyxDQUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBRSxHQUFFO0lBQzNELEtBQUssUUFBUTtNQUNYLE9BQU8sQ0FBQ3NCLEtBQUssRUFBRUUsTUFBTSxHQUFHLElBQUksR0FBRyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ3ZEO01BQ0UsT0FBTyxDQUFDc0IsS0FBSyxFQUFFSyxJQUFJLEVBQUVDLFNBQVMsQ0FBQyxDQUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUM3QztBQUNGOztBQUVBO0FBQ0EsU0FBUzZCLG1CQUFtQkEsQ0FBQ0MsSUFBVSxHQUFHLEVBQUUsRUFBVTtFQUNwRCxJQUFJQyxLQUErQixHQUFHLEVBQUU7RUFDeEMsSUFBSSxPQUFPRCxJQUFJLEtBQUssUUFBUSxFQUFFO0lBQUEsSUFBQUUsUUFBQTtJQUM1QixJQUFJLHFCQUFxQixDQUFDQyxJQUFJLENBQUNILElBQUksQ0FBQyxFQUFFO01BQ3BDO01BQ0EsT0FBT0EsSUFBSTtJQUNiO0lBQ0E7SUFDQTtJQUNBQyxLQUFLLEdBQUduQyxvQkFBQSxDQUFBb0MsUUFBQSxHQUFBRixJQUFJLENBQUNJLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQXJDLElBQUEsQ0FBQW1DLFFBQUEsRUFBTVYsS0FBSyxJQUFLO01BQ3ZDLElBQUlhLEdBQVksR0FBRyxLQUFLLENBQUMsQ0FBQztNQUMxQixNQUFNQyxJQUFJLEdBQUdkLEtBQUssQ0FBQyxDQUFDLENBQUM7TUFDckIsSUFBSWMsSUFBSSxLQUFLLEdBQUcsRUFBRTtRQUNoQkQsR0FBRyxHQUFHLE1BQU07UUFDWmIsS0FBSyxHQUFHQSxLQUFLLENBQUNlLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzlCLENBQUMsTUFBTSxJQUFJRCxJQUFJLEtBQUssR0FBRyxFQUFFO1FBQ3ZCZCxLQUFLLEdBQUdBLEtBQUssQ0FBQ2UsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDOUI7O01BQ0EsT0FBTyxDQUFDZixLQUFLLEVBQUVhLEdBQUcsQ0FBQztJQUNyQixDQUFDLENBQUM7RUFDSixDQUFDLE1BQU0sSUFBSWhDLGNBQUEsQ0FBYzJCLElBQUksQ0FBQyxFQUFFO0lBQzlCQyxLQUFLLEdBQUdELElBQUk7RUFDZCxDQUFDLE1BQU07SUFBQSxJQUFBUSxTQUFBO0lBQ0xQLEtBQUssR0FBR25DLG9CQUFBLENBQUEwQyxTQUFBLEdBQUFDLGVBQUEsQ0FBZVQsSUFBSSxDQUFDLEVBQUFqQyxJQUFBLENBQUF5QyxTQUFBLEVBQzFCLENBQUMsQ0FBQ2hCLEtBQUssRUFBRWEsR0FBRyxDQUFDLEtBQUssQ0FBQ2IsS0FBSyxFQUFFYSxHQUFHLENBQy9CLENBQUM7RUFDSDtFQUNBLE9BQU92QyxvQkFBQSxDQUFBbUMsS0FBSyxFQUFBbEMsSUFBQSxDQUFMa0MsS0FBSyxFQUNMLENBQUMsQ0FBQ1QsS0FBSyxFQUFFYSxHQUFHLENBQUMsS0FBSztJQUNyQjtJQUNBLFFBQVE5QyxNQUFNLENBQUM4QyxHQUFHLENBQUM7TUFDakIsS0FBSyxNQUFNO01BQ1gsS0FBSyxNQUFNO01BQ1gsS0FBSyxZQUFZO01BQ2pCLEtBQUssR0FBRztNQUNSLEtBQUssSUFBSTtRQUNQQSxHQUFHLEdBQUcsTUFBTTtRQUNaO01BQ0Y7UUFDRUEsR0FBRyxHQUFHLEtBQUs7SUFDZjtJQUNBLE9BQVEsR0FBRWIsS0FBTSxJQUFHYSxHQUFJLEVBQUM7RUFDMUIsQ0FBQyxDQUFDLENBQ0RuQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ2Y7QUFJQTtBQUNBLFNBQVN3QyxxQkFBcUJBLENBQzVCQyxVQUFxQixHQUFHLENBQUMsQ0FBQyxFQUMxQkMsUUFBeUIsR0FBRyxLQUFLLEVBQ2pDQyxLQUFhLEdBQUcsQ0FBQyxFQUNUO0VBQUEsSUFBQUMsU0FBQTtFQUNSLElBQUksT0FBT0gsVUFBVSxLQUFLLFFBQVEsRUFBRTtJQUNsQyxPQUFPQSxVQUFVO0VBQ25CO0VBQ0EsSUFBSUksYUFBdUQsR0FBRyxFQUFFO0VBQ2hFLElBQUksQ0FBQzFDLGNBQUEsQ0FBY3NDLFVBQVUsQ0FBQyxFQUFFO0lBQUEsSUFBQUssU0FBQTtJQUM5QjtJQUNBLE1BQU1DLGFBQWEsR0FBR04sVUFBVTtJQUNoQ0ksYUFBYSxHQUFHakQsb0JBQUEsQ0FBQWtELFNBQUEsR0FBQXBCLFlBQUEsQ0FBWXFCLGFBQWEsQ0FBQyxFQUFBbEQsSUFBQSxDQUFBaUQsU0FBQSxFQUFNRSxHQUFHLEtBQU07TUFDdkRBLEdBQUc7TUFDSDlDLEtBQUssRUFBRTZDLGFBQWEsQ0FBQ0MsR0FBRztJQUMxQixDQUFDLENBQUMsQ0FBQztFQUNMLENBQUMsTUFBTTtJQUNMSCxhQUFhLEdBQUdqRCxvQkFBQSxDQUFBNkMsVUFBVSxFQUFBNUMsSUFBQSxDQUFWNEMsVUFBVSxFQUFNUSxJQUFJLElBQUs7TUFBQSxJQUFBQyxTQUFBO01BQ3ZDLE1BQU1DLEtBQUssR0FBR3ZELG9CQUFBLENBQUFzRCxTQUFBLEdBQUF4QixZQUFBLENBQVl1QixJQUFJLENBQUMsRUFBQXBELElBQUEsQ0FBQXFELFNBQUEsRUFBTUYsR0FBRyxLQUFNO1FBQUVBLEdBQUc7UUFBRTlDLEtBQUssRUFBRStDLElBQUksQ0FBQ0QsR0FBRztNQUFFLENBQUMsQ0FBQyxDQUFDO01BQ3pFLE9BQU9HLEtBQUssQ0FBQy9DLE1BQU0sR0FBRyxDQUFDLEdBQ25CO1FBQUU0QyxHQUFHLEVBQUUsTUFBTTtRQUFFOUMsS0FBSyxFQUFFTixvQkFBQSxDQUFBdUQsS0FBSyxFQUFBdEQsSUFBQSxDQUFMc0QsS0FBSyxFQUFNQyxDQUFDLEtBQU07VUFBRSxDQUFDQSxDQUFDLENBQUNKLEdBQUcsR0FBR0ksQ0FBQyxDQUFDbEQ7UUFBTSxDQUFDLENBQUM7TUFBRSxDQUFDLEdBQ2hFaUQsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNkLENBQUMsQ0FBQztFQUNKO0VBQ0EsTUFBTUUsZ0JBQWdCLEdBQUlDLHVCQUFBLENBQUFWLFNBQUEsR0FBQWhELG9CQUFBLENBQUFpRCxhQUFhLEVBQUFoRCxJQUFBLENBQWJnRCxhQUFhLEVBQy9CSSxJQUFJLElBQUs7SUFDYixJQUFJTSxDQUFDLEdBQUdaLEtBQUssR0FBRyxDQUFDO0lBQ2pCLElBQUlwQixFQUE2QjtJQUNqQyxRQUFRMEIsSUFBSSxDQUFDRCxHQUFHO01BQ2QsS0FBSyxLQUFLO01BQ1YsS0FBSyxNQUFNO01BQ1gsS0FBSyxNQUFNO1FBQ1QsSUFBSU4sUUFBUSxLQUFLLEtBQUssSUFBSUcsYUFBYSxDQUFDekMsTUFBTSxLQUFLLENBQUMsRUFBRTtVQUNwRG1ELENBQUMsR0FBR1osS0FBSyxDQUFDLENBQUM7UUFDYjs7UUFDQXBCLEVBQUUsR0FBRzBCLElBQUksQ0FBQ0QsR0FBRyxLQUFLLEtBQUssR0FBRyxJQUFJLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxLQUFLLE1BQU0sR0FBRyxLQUFLLEdBQUcsS0FBSztRQUNwRSxPQUFPUixxQkFBcUIsQ0FBQ1MsSUFBSSxDQUFDL0MsS0FBSyxFQUFFcUIsRUFBRSxFQUFFZ0MsQ0FBQyxDQUFDO01BQ2pEO1FBQ0UsT0FBT2xDLHFCQUFxQixDQUFDNEIsSUFBSSxDQUFDRCxHQUFHLEVBQUVDLElBQUksQ0FBQy9DLEtBQUssQ0FBQztJQUN0RDtFQUNGLENBQUMsQ0FBQyxFQUFBTCxJQUFBLENBQUErQyxTQUFBLEVBQ09ZLElBQUksSUFBS0EsSUFBSSxDQUFxQjtFQUU3QyxJQUFJQyxRQUFpQjtFQUNyQixJQUFJZixRQUFRLEtBQUssS0FBSyxFQUFFO0lBQ3RCZSxRQUFRLEdBQUdkLEtBQUssR0FBRyxDQUFDO0lBQ3BCLE9BQVEsR0FBRWMsUUFBUSxHQUFHLEdBQUcsR0FBRyxFQUFHLE9BQU1KLGdCQUFnQixDQUFDLENBQUMsQ0FBRSxHQUN0REksUUFBUSxHQUFHLEdBQUcsR0FBRyxFQUNsQixFQUFDO0VBQ0o7RUFDQUEsUUFBUSxHQUFHZCxLQUFLLEdBQUcsQ0FBQyxJQUFJVSxnQkFBZ0IsQ0FBQ2pELE1BQU0sR0FBRyxDQUFDO0VBQ25ELE9BQ0UsQ0FBQ3FELFFBQVEsR0FBRyxHQUFHLEdBQUcsRUFBRSxJQUNwQkosZ0JBQWdCLENBQUNyRCxJQUFJLENBQUUsSUFBRzBDLFFBQVMsR0FBRSxDQUFDLElBQ3JDZSxRQUFRLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUV6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sU0FBUzFELFVBQVVBLENBQUMyRCxLQUFrQixFQUFVO0VBQ3JELElBQUlDLElBQUksR0FBRyxDQUNULFNBQVMsRUFDVHBFLGtCQUFrQixDQUFDbUUsS0FBSyxDQUFDbEUsTUFBTSxFQUFBb0UseUJBQUEsQ0FBRUYsS0FBSyxDQUFTLENBQUMsRUFDaEQsUUFBUSxFQUNSQSxLQUFLLENBQUNHLEtBQUssQ0FDWixDQUFDN0QsSUFBSSxDQUFDLEVBQUUsQ0FBQztFQUNWLE1BQU1pRCxJQUFJLEdBQUdULHFCQUFxQixDQUFDa0IsS0FBSyxDQUFDakIsVUFBVSxDQUFDO0VBQ3BELElBQUlRLElBQUksRUFBRTtJQUNSVSxJQUFJLElBQUssVUFBU1YsSUFBSyxFQUFDO0VBQzFCO0VBQ0EsTUFBTWEsT0FBTyxHQUFHakMsbUJBQW1CLENBQUFrQyxxQkFBQSxDQUFDTCxLQUFLLENBQUssQ0FBQztFQUMvQyxJQUFJSSxPQUFPLEVBQUU7SUFDWEgsSUFBSSxJQUFLLGFBQVlHLE9BQVEsRUFBQztFQUNoQztFQUNBLElBQUlKLEtBQUssQ0FBQ00sS0FBSyxFQUFFO0lBQ2ZMLElBQUksSUFBSyxVQUFTRCxLQUFLLENBQUNNLEtBQU0sRUFBQztFQUNqQztFQUNBLElBQUlOLEtBQUssQ0FBQ08sTUFBTSxFQUFFO0lBQ2hCTixJQUFJLElBQUssV0FBVUQsS0FBSyxDQUFDTyxNQUFPLEVBQUM7RUFDbkM7RUFDQSxPQUFPTixJQUFJO0FBQ2IifQ==