import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _Object$defineProperties from "@babel/runtime-corejs3/core-js-stable/object/define-properties";
import _Object$getOwnPropertyDescriptors from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors";
import _forEachInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/for-each";
import _Object$getOwnPropertyDescriptor from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$getOwnPropertySymbols from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import "core-js/modules/es.array.sort";
import "core-js/modules/es.promise";
import _findInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/find";
import _includesInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/includes";
import _objectWithoutProperties from "@babel/runtime-corejs3/helpers/objectWithoutProperties";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { var _context4; _forEachInstanceProperty(_context4 = ownKeys(Object(source), true)).call(_context4, function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { var _context5; _forEachInstanceProperty(_context5 = ownKeys(Object(source))).call(_context5, function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }
/**
 *
 */
import { getLogger } from './util/logger';
import RecordReference from './record-reference';
import Query, { ResponseTargets } from './query';
import QuickAction from './quick-action';
/**
 * A class for organizing all SObject access
 */
export class SObject {
  // layouts: (ln?: string) => Promise<DescribeLayoutResult>;

  // compactLayouts: () => Promise<DescribeCompactLayoutsResult>;

  // approvalLayouts: () => Promise<DescribeApprovalLayoutsResult>;

  /**
   *
   */
  constructor(conn, type) {
    _defineProperty(this, "type", void 0);
    _defineProperty(this, "_conn", void 0);
    _defineProperty(this, "_logger", void 0);
    _defineProperty(this, "layouts$", void 0);
    _defineProperty(this, "layouts$$", void 0);
    _defineProperty(this, "compactLayouts$", void 0);
    _defineProperty(this, "compactLayouts$$", void 0);
    _defineProperty(this, "approvalLayouts$", void 0);
    _defineProperty(this, "approvalLayouts$$", void 0);
    _defineProperty(this, "insert", this.create);
    _defineProperty(this, "delete", this.destroy);
    _defineProperty(this, "del", this.destroy);
    _defineProperty(this, "insertBulk", this.createBulk);
    _defineProperty(this, "deleteBulk", this.destroyBulk);
    _defineProperty(this, "deleteHardBulk", this.destroyHardBulk);
    this.type = type;
    this._conn = conn;
    this._logger = conn._logLevel ? SObject._logger.createInstance(conn._logLevel) : SObject._logger;
    const cache = this._conn.cache;
    const layoutCacheKey = layoutName => layoutName ? `layouts.namedLayouts.${layoutName}` : `layouts.${this.type}`;
    const layouts = SObject.prototype.layouts;
    this.layouts = cache.createCachedFunction(layouts, this, {
      key: layoutCacheKey,
      strategy: 'NOCACHE'
    });
    this.layouts$ = cache.createCachedFunction(layouts, this, {
      key: layoutCacheKey,
      strategy: 'HIT'
    });
    this.layouts$$ = cache.createCachedFunction(layouts, this, {
      key: layoutCacheKey,
      strategy: 'IMMEDIATE'
    });
    const compactLayoutCacheKey = `compactLayouts.${this.type}`;
    const compactLayouts = SObject.prototype.compactLayouts;
    this.compactLayouts = cache.createCachedFunction(compactLayouts, this, {
      key: compactLayoutCacheKey,
      strategy: 'NOCACHE'
    });
    this.compactLayouts$ = cache.createCachedFunction(compactLayouts, this, {
      key: compactLayoutCacheKey,
      strategy: 'HIT'
    });
    this.compactLayouts$$ = cache.createCachedFunction(compactLayouts, this, {
      key: compactLayoutCacheKey,
      strategy: 'IMMEDIATE'
    });
    const approvalLayoutCacheKey = `approvalLayouts.${this.type}`;
    const approvalLayouts = SObject.prototype.approvalLayouts;
    this.approvalLayouts = cache.createCachedFunction(approvalLayouts, this, {
      key: approvalLayoutCacheKey,
      strategy: 'NOCACHE'
    });
    this.approvalLayouts$ = cache.createCachedFunction(approvalLayouts, this, {
      key: approvalLayoutCacheKey,
      strategy: 'HIT'
    });
    this.approvalLayouts$$ = cache.createCachedFunction(approvalLayouts, this, {
      key: approvalLayoutCacheKey,
      strategy: 'IMMEDIATE'
    });
  }

  /**
   * Create records
   */

  create(records, options) {
    return this._conn.create(this.type, records, options);
  }

  /**
   * Synonym of SObject#create()
   */

  /**
   * Retrieve specified records
   */

  retrieve(ids, options) {
    return this._conn.retrieve(this.type, ids, options);
  }

  /**
   * Update records
   */

  update(records, options) {
    return this._conn.update(this.type, records, options);
  }

  /**
   * Upsert records
   */

  upsert(records, extIdField, options) {
    return this._conn.upsert(this.type, records, extIdField, options);
  }

  /**
   * Delete records
   */

  destroy(ids, options) {
    return this._conn.destroy(this.type, ids, options);
  }

  /**
   * Synonym of SObject#destroy()
   */

  /**
   * Synonym of SObject#destroy()
   */

  /**
   * Call Bulk#load() to execute bulkload, returning batch object
   */
  bulkload(operation, optionsOrInput, input) {
    return this._conn.bulk.load(this.type, operation, optionsOrInput, input);
  }

  /**
   * Bulkly insert input data using bulk API
   */
  createBulk(input) {
    return this.bulkload('insert', input);
  }

  /**
   * Synonym of SObject#createBulk()
   */

  /**
   * Bulkly update records by input data using bulk API
   */
  updateBulk(input) {
    return this.bulkload('update', input);
  }

  /**
   * Bulkly upsert records by input data using bulk API
   */
  upsertBulk(input, extIdField) {
    return this.bulkload('upsert', {
      extIdField
    }, input);
  }

  /**
   * Bulkly delete records specified by input data using bulk API
   */
  destroyBulk(input) {
    return this.bulkload('delete', input);
  }

  /**
   * Synonym of SObject#destroyBulk()
   */

  /**
   * Bulkly hard delete records specified in input data using bulk API
   */
  destroyHardBulk(input) {
    return this.bulkload('hardDelete', input);
  }

  /**
   * Synonym of SObject#destroyHardBulk()
   */

  /**
   * Describe SObject metadata
   */
  describe() {
    return this._conn.describe(this.type);
  }

  /**
   *
   */
  describe$() {
    return this._conn.describe$(this.type);
  }

  /**
   *
   */
  describe$$() {
    return this._conn.describe$$(this.type);
  }

  /**
   * Get record representation instance by given id
   */
  record(id) {
    return new RecordReference(this._conn, this.type, id);
  }

  /**
   * Retrieve recently accessed records
   */
  recent() {
    return this._conn.recent(this.type);
  }

  /**
   * Retrieve the updated records
   */
  updated(start, end) {
    return this._conn.updated(this.type, start, end);
  }

  /**
   * Retrieve the deleted records
   */
  deleted(start, end) {
    return this._conn.deleted(this.type, start, end);
  }

  /**
   * Describe layout information for SObject
   */
  async layouts(layoutName) {
    const url = `/sobjects/${this.type}/describe/${layoutName ? `namedLayouts/${layoutName}` : 'layouts'}`;
    const body = await this._conn.request(url);
    return body;
  }

  /**
   * @typedef {Object} CompactLayoutInfo
   * @prop {Array.<Object>} compactLayouts - Array of compact layouts
   * @prop {String} defaultCompactLayoutId - ID of default compact layout
   * @prop {Array.<Object>} recordTypeCompactLayoutMappings - Array of record type mappings
   */
  /**
   * Describe compact layout information defined for SObject
   *
   * @param {Callback.<CompactLayoutInfo>} [callback] - Callback function
   * @returns {Promise.<CompactLayoutInfo>}
   */
  async compactLayouts() {
    const url = `/sobjects/${this.type}/describe/compactLayouts`;
    const body = await this._conn.request(url);
    return body;
  }

  /**
   * Describe compact layout information defined for SObject
   *
   * @param {Callback.<ApprovalLayoutInfo>} [callback] - Callback function
   * @returns {Promise.<ApprovalLayoutInfo>}
   */
  async approvalLayouts() {
    const url = `/sobjects/${this.type}/describe/approvalLayouts`;
    const body = await this._conn.request(url);
    return body;
  }

  /**
   * Find and fetch records which matches given conditions
   */

  find(conditions, fields, options = {}) {
    const {
        sort,
        limit,
        offset
      } = options,
      qoptions = _objectWithoutProperties(options, ["sort", "limit", "offset"]);
    const config = {
      fields: fields == null ? undefined : fields,
      includes: _includesInstanceProperty(options),
      table: this.type,
      conditions: conditions == null ? undefined : conditions,
      sort,
      limit,
      offset
    };
    const query = new Query(this._conn, config, qoptions);
    return query.setResponseTarget(ResponseTargets.Records);
  }

  /**
   * Fetch one record which matches given conditions
   */

  findOne(conditions, fields, options = {}) {
    var _context;
    const query = _findInstanceProperty(_context = this).call(_context, conditions, fields, _objectSpread(_objectSpread({}, options), {}, {
      limit: 1
    }));
    return query.setResponseTarget(ResponseTargets.SingleRecord);
  }

  /**
   * Find and fetch records only by specifying fields to fetch.
   */
  select(fields) {
    var _context2;
    return _findInstanceProperty(_context2 = this).call(_context2, null, fields);
  }

  /**
   * Count num of records which matches given conditions
   */
  count(conditions) {
    var _context3;
    const query = _findInstanceProperty(_context3 = this).call(_context3, conditions, 'count()');
    return query.setResponseTarget(ResponseTargets.Count);
  }

  /**
   * Returns the list of list views for the SObject
   *
   * @param {Callback.<ListViewsInfo>} [callback] - Callback function
   * @returns {Promise.<ListViewsInfo>}
   */
  listviews() {
    const url = `${this._conn._baseUrl()}/sobjects/${this.type}/listviews`;
    return this._conn.request(url);
  }

  /**
   * Returns the list view info in specifed view id
   *
   * @param {String} id - List view ID
   * @returns {ListView}
   */
  listview(id) {
    return new ListView(this._conn, this.type, id); // eslint-disable-line no-use-before-define
  }

  /**
   * Returns all registered quick actions for the SObject
   *
   * @param {Callback.<Array.<QuickAction~QuickActionInfo>>} [callback] - Callback function
   * @returns {Promise.<Array.<QuickAction~QuickActionInfo>>}
   */
  quickActions() {
    return this._conn.request(`/sobjects/${this.type}/quickActions`);
  }

  /**
   * Get reference for specified quick aciton in the SObject
   *
   * @param {String} actionName - Name of the quick action
   * @returns {QuickAction}
   */
  quickAction(actionName) {
    return new QuickAction(this._conn, `/sobjects/${this.type}/quickActions/${actionName}`);
  }
}

/**
 * A class for organizing list view information
 *
 * @protected
 * @class ListView
 * @param {Connection} conn - Connection instance
 * @param {SObject} type - SObject type
 * @param {String} id - List view ID
 */
_defineProperty(SObject, "_logger", getLogger('sobject'));
class ListView {
  /**
   *
   */
  constructor(conn, type, id) {
    _defineProperty(this, "_conn", void 0);
    _defineProperty(this, "type", void 0);
    _defineProperty(this, "id", void 0);
    this._conn = conn;
    this.type = type;
    this.id = id;
  }

  /**
   * Executes query for the list view and returns the resulting data and presentation information.
   */
  results() {
    const url = `${this._conn._baseUrl()}/sobjects/${this.type}/listviews/${this.id}/results`;
    return this._conn.request(url);
  }

  /**
   * Returns detailed information about a list view
   */
  describe(options = {}) {
    const url = `${this._conn._baseUrl()}/sobjects/${this.type}/listviews/${this.id}/describe`;
    return this._conn.request({
      method: 'GET',
      url,
      headers: options.headers
    });
  }

  /**
   * Explain plan for executing list view
   */
  explain() {
    const url = `/query/?explain=${this.id}`;
    return this._conn.request(url);
  }
}
export default SObject;

// TODO Bulk
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRMb2dnZXIiLCJSZWNvcmRSZWZlcmVuY2UiLCJRdWVyeSIsIlJlc3BvbnNlVGFyZ2V0cyIsIlF1aWNrQWN0aW9uIiwiU09iamVjdCIsImNvbnN0cnVjdG9yIiwiY29ubiIsInR5cGUiLCJfZGVmaW5lUHJvcGVydHkiLCJjcmVhdGUiLCJkZXN0cm95IiwiY3JlYXRlQnVsayIsImRlc3Ryb3lCdWxrIiwiZGVzdHJveUhhcmRCdWxrIiwiX2Nvbm4iLCJfbG9nZ2VyIiwiX2xvZ0xldmVsIiwiY3JlYXRlSW5zdGFuY2UiLCJjYWNoZSIsImxheW91dENhY2hlS2V5IiwibGF5b3V0TmFtZSIsImxheW91dHMiLCJwcm90b3R5cGUiLCJjcmVhdGVDYWNoZWRGdW5jdGlvbiIsImtleSIsInN0cmF0ZWd5IiwibGF5b3V0cyQiLCJsYXlvdXRzJCQiLCJjb21wYWN0TGF5b3V0Q2FjaGVLZXkiLCJjb21wYWN0TGF5b3V0cyIsImNvbXBhY3RMYXlvdXRzJCIsImNvbXBhY3RMYXlvdXRzJCQiLCJhcHByb3ZhbExheW91dENhY2hlS2V5IiwiYXBwcm92YWxMYXlvdXRzIiwiYXBwcm92YWxMYXlvdXRzJCIsImFwcHJvdmFsTGF5b3V0cyQkIiwicmVjb3JkcyIsIm9wdGlvbnMiLCJyZXRyaWV2ZSIsImlkcyIsInVwZGF0ZSIsInVwc2VydCIsImV4dElkRmllbGQiLCJidWxrbG9hZCIsIm9wZXJhdGlvbiIsIm9wdGlvbnNPcklucHV0IiwiaW5wdXQiLCJidWxrIiwibG9hZCIsInVwZGF0ZUJ1bGsiLCJ1cHNlcnRCdWxrIiwiZGVzY3JpYmUiLCJkZXNjcmliZSQiLCJkZXNjcmliZSQkIiwicmVjb3JkIiwiaWQiLCJyZWNlbnQiLCJ1cGRhdGVkIiwic3RhcnQiLCJlbmQiLCJkZWxldGVkIiwidXJsIiwiYm9keSIsInJlcXVlc3QiLCJmaW5kIiwiY29uZGl0aW9ucyIsImZpZWxkcyIsInNvcnQiLCJsaW1pdCIsIm9mZnNldCIsInFvcHRpb25zIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiY29uZmlnIiwidW5kZWZpbmVkIiwiaW5jbHVkZXMiLCJfaW5jbHVkZXNJbnN0YW5jZVByb3BlcnR5IiwidGFibGUiLCJxdWVyeSIsInNldFJlc3BvbnNlVGFyZ2V0IiwiUmVjb3JkcyIsImZpbmRPbmUiLCJfY29udGV4dCIsIl9maW5kSW5zdGFuY2VQcm9wZXJ0eSIsImNhbGwiLCJfb2JqZWN0U3ByZWFkIiwiU2luZ2xlUmVjb3JkIiwic2VsZWN0IiwiX2NvbnRleHQyIiwiY291bnQiLCJfY29udGV4dDMiLCJDb3VudCIsImxpc3R2aWV3cyIsIl9iYXNlVXJsIiwibGlzdHZpZXciLCJMaXN0VmlldyIsInF1aWNrQWN0aW9ucyIsInF1aWNrQWN0aW9uIiwiYWN0aW9uTmFtZSIsInJlc3VsdHMiLCJtZXRob2QiLCJoZWFkZXJzIiwiZXhwbGFpbiJdLCJzb3VyY2VzIjpbIi4uL3NyYy9zb2JqZWN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqL1xuaW1wb3J0IHsgTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tICcuL3V0aWwvbG9nZ2VyJztcbmltcG9ydCB7XG4gIFJlY29yZCxcbiAgRGVzY3JpYmVMYXlvdXRSZXN1bHQsXG4gIERlc2NyaWJlQ29tcGFjdExheW91dHNSZXN1bHQsXG4gIERlc2NyaWJlQXBwcm92YWxMYXlvdXRzUmVzdWx0LFxuICBPcHRpb25hbCxcbiAgRG1sT3B0aW9ucyxcbiAgU2F2ZVJlc3VsdCxcbiAgVXBzZXJ0UmVzdWx0LFxuICBSZXRyaWV2ZU9wdGlvbnMsXG4gIFNjaGVtYSxcbiAgU09iamVjdE5hbWVzLFxuICBTT2JqZWN0UmVjb3JkLFxuICBTT2JqZWN0SW5wdXRSZWNvcmQsXG4gIFNPYmplY3RVcGRhdGVSZWNvcmQsXG4gIFNPYmplY3RGaWVsZE5hbWVzLFxuICBGaWVsZFByb2plY3Rpb25Db25maWcsXG4gIEZpZWxkUGF0aFNwZWNpZmllcixcbiAgRmllbGRQYXRoU2NvcGVkUHJvamVjdGlvbixcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgQ29ubmVjdGlvbiBmcm9tICcuL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IFJlY29yZFJlZmVyZW5jZSBmcm9tICcuL3JlY29yZC1yZWZlcmVuY2UnO1xuaW1wb3J0IFF1ZXJ5LCB7XG4gIFJlc3BvbnNlVGFyZ2V0cyxcbiAgUXVlcnlPcHRpb25zLFxuICBRdWVyeUZpZWxkLFxuICBRdWVyeUNvbmRpdGlvbixcbiAgUXVlcnlDb25maWcsXG59IGZyb20gJy4vcXVlcnknO1xuaW1wb3J0IFF1aWNrQWN0aW9uIGZyb20gJy4vcXVpY2stYWN0aW9uJztcbmltcG9ydCB7IENhY2hlZEZ1bmN0aW9uIH0gZnJvbSAnLi9jYWNoZSc7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7XG5cbmV4cG9ydCB0eXBlIEZpbmRPcHRpb25zPFMgZXh0ZW5kcyBTY2hlbWEsIE4gZXh0ZW5kcyBTT2JqZWN0TmFtZXM8Uz4+ID0gUGFydGlhbDxcbiAgUXVlcnlPcHRpb25zICZcbiAgICBQaWNrPFF1ZXJ5Q29uZmlnPFMsIE4+LCAnc29ydCcgfCAnaW5jbHVkZXMnPiAmIHtcbiAgICAgIGxpbWl0OiBudW1iZXI7XG4gICAgICBvZmZzZXQ6IG51bWJlcjtcbiAgICB9XG4+O1xuXG4vKipcbiAqIEEgY2xhc3MgZm9yIG9yZ2FuaXppbmcgYWxsIFNPYmplY3QgYWNjZXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBTT2JqZWN0PFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICBGaWVsZE5hbWVzIGV4dGVuZHMgU09iamVjdEZpZWxkTmFtZXM8UywgTj4gPSBTT2JqZWN0RmllbGROYW1lczxTLCBOPixcbiAgUmV0cmlldmVSZWNvcmQgZXh0ZW5kcyBTT2JqZWN0UmVjb3JkPFMsIE4sICcqJz4gPSBTT2JqZWN0UmVjb3JkPFMsIE4sICcqJz4sXG4gIElucHV0UmVjb3JkIGV4dGVuZHMgU09iamVjdElucHV0UmVjb3JkPFMsIE4+ID0gU09iamVjdElucHV0UmVjb3JkPFMsIE4+LFxuICBVcGRhdGVSZWNvcmQgZXh0ZW5kcyBTT2JqZWN0VXBkYXRlUmVjb3JkPFMsIE4+ID0gU09iamVjdFVwZGF0ZVJlY29yZDxTLCBOPlxuPiB7XG4gIHN0YXRpYyBfbG9nZ2VyID0gZ2V0TG9nZ2VyKCdzb2JqZWN0Jyk7XG5cbiAgdHlwZTogTjtcbiAgX2Nvbm46IENvbm5lY3Rpb248Uz47XG4gIF9sb2dnZXI6IExvZ2dlcjtcblxuICAvLyBsYXlvdXRzOiAobG4/OiBzdHJpbmcpID0+IFByb21pc2U8RGVzY3JpYmVMYXlvdXRSZXN1bHQ+O1xuICBsYXlvdXRzJDogQ2FjaGVkRnVuY3Rpb248KGxuPzogc3RyaW5nKSA9PiBQcm9taXNlPERlc2NyaWJlTGF5b3V0UmVzdWx0Pj47XG4gIGxheW91dHMkJDogQ2FjaGVkRnVuY3Rpb248KGxuPzogc3RyaW5nKSA9PiBEZXNjcmliZUxheW91dFJlc3VsdD47XG4gIC8vIGNvbXBhY3RMYXlvdXRzOiAoKSA9PiBQcm9taXNlPERlc2NyaWJlQ29tcGFjdExheW91dHNSZXN1bHQ+O1xuICBjb21wYWN0TGF5b3V0cyQ6IENhY2hlZEZ1bmN0aW9uPCgpID0+IFByb21pc2U8RGVzY3JpYmVDb21wYWN0TGF5b3V0c1Jlc3VsdD4+O1xuICBjb21wYWN0TGF5b3V0cyQkOiBDYWNoZWRGdW5jdGlvbjwoKSA9PiBEZXNjcmliZUNvbXBhY3RMYXlvdXRzUmVzdWx0PjtcbiAgLy8gYXBwcm92YWxMYXlvdXRzOiAoKSA9PiBQcm9taXNlPERlc2NyaWJlQXBwcm92YWxMYXlvdXRzUmVzdWx0PjtcbiAgYXBwcm92YWxMYXlvdXRzJDogQ2FjaGVkRnVuY3Rpb248XG4gICAgKCkgPT4gUHJvbWlzZTxEZXNjcmliZUFwcHJvdmFsTGF5b3V0c1Jlc3VsdD5cbiAgPjtcbiAgYXBwcm92YWxMYXlvdXRzJCQ6IENhY2hlZEZ1bmN0aW9uPCgpID0+IERlc2NyaWJlQXBwcm92YWxMYXlvdXRzUmVzdWx0PjtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbm46IENvbm5lY3Rpb248Uz4sIHR5cGU6IE4pIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuX2Nvbm4gPSBjb25uO1xuICAgIHRoaXMuX2xvZ2dlciA9IGNvbm4uX2xvZ0xldmVsXG4gICAgICA/IFNPYmplY3QuX2xvZ2dlci5jcmVhdGVJbnN0YW5jZShjb25uLl9sb2dMZXZlbClcbiAgICAgIDogU09iamVjdC5fbG9nZ2VyO1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fY29ubi5jYWNoZTtcbiAgICBjb25zdCBsYXlvdXRDYWNoZUtleSA9IChsYXlvdXROYW1lOiBzdHJpbmcpID0+XG4gICAgICBsYXlvdXROYW1lXG4gICAgICAgID8gYGxheW91dHMubmFtZWRMYXlvdXRzLiR7bGF5b3V0TmFtZX1gXG4gICAgICAgIDogYGxheW91dHMuJHt0aGlzLnR5cGV9YDtcbiAgICBjb25zdCBsYXlvdXRzID0gU09iamVjdC5wcm90b3R5cGUubGF5b3V0cztcbiAgICB0aGlzLmxheW91dHMgPSBjYWNoZS5jcmVhdGVDYWNoZWRGdW5jdGlvbihsYXlvdXRzLCB0aGlzLCB7XG4gICAgICBrZXk6IGxheW91dENhY2hlS2V5LFxuICAgICAgc3RyYXRlZ3k6ICdOT0NBQ0hFJyxcbiAgICB9KTtcbiAgICB0aGlzLmxheW91dHMkID0gY2FjaGUuY3JlYXRlQ2FjaGVkRnVuY3Rpb24obGF5b3V0cywgdGhpcywge1xuICAgICAga2V5OiBsYXlvdXRDYWNoZUtleSxcbiAgICAgIHN0cmF0ZWd5OiAnSElUJyxcbiAgICB9KTtcbiAgICB0aGlzLmxheW91dHMkJCA9IGNhY2hlLmNyZWF0ZUNhY2hlZEZ1bmN0aW9uKGxheW91dHMsIHRoaXMsIHtcbiAgICAgIGtleTogbGF5b3V0Q2FjaGVLZXksXG4gICAgICBzdHJhdGVneTogJ0lNTUVESUFURScsXG4gICAgfSkgYXMgYW55O1xuICAgIGNvbnN0IGNvbXBhY3RMYXlvdXRDYWNoZUtleSA9IGBjb21wYWN0TGF5b3V0cy4ke3RoaXMudHlwZX1gO1xuICAgIGNvbnN0IGNvbXBhY3RMYXlvdXRzID0gU09iamVjdC5wcm90b3R5cGUuY29tcGFjdExheW91dHM7XG4gICAgdGhpcy5jb21wYWN0TGF5b3V0cyA9IGNhY2hlLmNyZWF0ZUNhY2hlZEZ1bmN0aW9uKGNvbXBhY3RMYXlvdXRzLCB0aGlzLCB7XG4gICAgICBrZXk6IGNvbXBhY3RMYXlvdXRDYWNoZUtleSxcbiAgICAgIHN0cmF0ZWd5OiAnTk9DQUNIRScsXG4gICAgfSk7XG4gICAgdGhpcy5jb21wYWN0TGF5b3V0cyQgPSBjYWNoZS5jcmVhdGVDYWNoZWRGdW5jdGlvbihjb21wYWN0TGF5b3V0cywgdGhpcywge1xuICAgICAga2V5OiBjb21wYWN0TGF5b3V0Q2FjaGVLZXksXG4gICAgICBzdHJhdGVneTogJ0hJVCcsXG4gICAgfSk7XG4gICAgdGhpcy5jb21wYWN0TGF5b3V0cyQkID0gY2FjaGUuY3JlYXRlQ2FjaGVkRnVuY3Rpb24oY29tcGFjdExheW91dHMsIHRoaXMsIHtcbiAgICAgIGtleTogY29tcGFjdExheW91dENhY2hlS2V5LFxuICAgICAgc3RyYXRlZ3k6ICdJTU1FRElBVEUnLFxuICAgIH0pIGFzIGFueTtcbiAgICBjb25zdCBhcHByb3ZhbExheW91dENhY2hlS2V5ID0gYGFwcHJvdmFsTGF5b3V0cy4ke3RoaXMudHlwZX1gO1xuICAgIGNvbnN0IGFwcHJvdmFsTGF5b3V0cyA9IFNPYmplY3QucHJvdG90eXBlLmFwcHJvdmFsTGF5b3V0cztcbiAgICB0aGlzLmFwcHJvdmFsTGF5b3V0cyA9IGNhY2hlLmNyZWF0ZUNhY2hlZEZ1bmN0aW9uKGFwcHJvdmFsTGF5b3V0cywgdGhpcywge1xuICAgICAga2V5OiBhcHByb3ZhbExheW91dENhY2hlS2V5LFxuICAgICAgc3RyYXRlZ3k6ICdOT0NBQ0hFJyxcbiAgICB9KTtcbiAgICB0aGlzLmFwcHJvdmFsTGF5b3V0cyQgPSBjYWNoZS5jcmVhdGVDYWNoZWRGdW5jdGlvbihhcHByb3ZhbExheW91dHMsIHRoaXMsIHtcbiAgICAgIGtleTogYXBwcm92YWxMYXlvdXRDYWNoZUtleSxcbiAgICAgIHN0cmF0ZWd5OiAnSElUJyxcbiAgICB9KTtcbiAgICB0aGlzLmFwcHJvdmFsTGF5b3V0cyQkID0gY2FjaGUuY3JlYXRlQ2FjaGVkRnVuY3Rpb24oYXBwcm92YWxMYXlvdXRzLCB0aGlzLCB7XG4gICAgICBrZXk6IGFwcHJvdmFsTGF5b3V0Q2FjaGVLZXksXG4gICAgICBzdHJhdGVneTogJ0lNTUVESUFURScsXG4gICAgfSkgYXMgYW55O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSByZWNvcmRzXG4gICAqL1xuICBjcmVhdGUocmVjb3JkczogSW5wdXRSZWNvcmRbXSwgb3B0aW9ucz86IERtbE9wdGlvbnMpOiBQcm9taXNlPFNhdmVSZXN1bHRbXT47XG4gIGNyZWF0ZShyZWNvcmRzOiBJbnB1dFJlY29yZCwgb3B0aW9ucz86IERtbE9wdGlvbnMpOiBQcm9taXNlPFNhdmVSZXN1bHQ+O1xuICBjcmVhdGUoXG4gICAgcmVjb3JkczogSW5wdXRSZWNvcmQgfCBJbnB1dFJlY29yZFtdLFxuICAgIG9wdGlvbnM/OiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQgfCBTYXZlUmVzdWx0W10+O1xuICBjcmVhdGUocmVjb3JkczogSW5wdXRSZWNvcmQgfCBJbnB1dFJlY29yZFtdLCBvcHRpb25zPzogRG1sT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9jb25uLmNyZWF0ZSh0aGlzLnR5cGUsIHJlY29yZHMsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bm9ueW0gb2YgU09iamVjdCNjcmVhdGUoKVxuICAgKi9cbiAgaW5zZXJ0ID0gdGhpcy5jcmVhdGU7XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHNwZWNpZmllZCByZWNvcmRzXG4gICAqL1xuICByZXRyaWV2ZShpZHM6IHN0cmluZ1tdLCBvcHRpb25zPzogUmV0cmlldmVPcHRpb25zKTogUHJvbWlzZTxSZXRyaWV2ZVJlY29yZFtdPjtcbiAgcmV0cmlldmUoaWRzOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXRyaWV2ZU9wdGlvbnMpOiBQcm9taXNlPFJldHJpZXZlUmVjb3JkPjtcbiAgcmV0cmlldmUoXG4gICAgaWRzOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvcHRpb25zPzogUmV0cmlldmVPcHRpb25zLFxuICApOiBQcm9taXNlPFJldHJpZXZlUmVjb3JkIHwgUmV0cmlldmVSZWNvcmRbXT47XG4gIHJldHJpZXZlKGlkczogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM/OiBSZXRyaWV2ZU9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fY29ubi5yZXRyaWV2ZSh0aGlzLnR5cGUsIGlkcywgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHJlY29yZHNcbiAgICovXG4gIHVwZGF0ZShyZWNvcmRzOiBVcGRhdGVSZWNvcmRbXSwgb3B0aW9ucz86IERtbE9wdGlvbnMpOiBQcm9taXNlPFNhdmVSZXN1bHRbXT47XG4gIHVwZGF0ZShyZWNvcmRzOiBVcGRhdGVSZWNvcmQsIG9wdGlvbnM/OiBEbWxPcHRpb25zKTogUHJvbWlzZTxTYXZlUmVzdWx0PjtcbiAgdXBkYXRlKFxuICAgIHJlY29yZHM6IFVwZGF0ZVJlY29yZCB8IFVwZGF0ZVJlY29yZFtdLFxuICAgIG9wdGlvbnM/OiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQgfCBTYXZlUmVzdWx0W10+O1xuICB1cGRhdGUocmVjb3JkczogVXBkYXRlUmVjb3JkIHwgVXBkYXRlUmVjb3JkW10sIG9wdGlvbnM/OiBEbWxPcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm4udXBkYXRlKHRoaXMudHlwZSwgcmVjb3Jkcywgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVXBzZXJ0IHJlY29yZHNcbiAgICovXG4gIHVwc2VydChcbiAgICByZWNvcmRzOiBJbnB1dFJlY29yZFtdLFxuICAgIGV4dElkRmllbGQ6IEZpZWxkTmFtZXMsXG4gICAgb3B0aW9ucz86IERtbE9wdGlvbnMsXG4gICk6IFByb21pc2U8VXBzZXJ0UmVzdWx0W10+O1xuICB1cHNlcnQoXG4gICAgcmVjb3JkczogSW5wdXRSZWNvcmQsXG4gICAgZXh0SWRGaWVsZDogRmllbGROYW1lcyxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxVcHNlcnRSZXN1bHQ+O1xuICB1cHNlcnQoXG4gICAgcmVjb3JkczogSW5wdXRSZWNvcmQgfCBJbnB1dFJlY29yZFtdLFxuICAgIGV4dElkRmllbGQ6IEZpZWxkTmFtZXMsXG4gICAgb3B0aW9ucz86IERtbE9wdGlvbnMsXG4gICk6IFByb21pc2U8VXBzZXJ0UmVzdWx0IHwgVXBzZXJ0UmVzdWx0W10+O1xuICB1cHNlcnQoXG4gICAgcmVjb3JkczogSW5wdXRSZWNvcmQgfCBJbnB1dFJlY29yZFtdLFxuICAgIGV4dElkRmllbGQ6IEZpZWxkTmFtZXMsXG4gICAgb3B0aW9ucz86IERtbE9wdGlvbnMsXG4gICkge1xuICAgIHJldHVybiB0aGlzLl9jb25uLnVwc2VydCh0aGlzLnR5cGUsIHJlY29yZHMsIGV4dElkRmllbGQsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSByZWNvcmRzXG4gICAqL1xuICBkZXN0cm95KGlkczogc3RyaW5nW10sIG9wdGlvbnM/OiBEbWxPcHRpb25zKTogUHJvbWlzZTxTYXZlUmVzdWx0W10+O1xuICBkZXN0cm95KGlkczogc3RyaW5nLCBvcHRpb25zPzogRG1sT3B0aW9ucyk6IFByb21pc2U8U2F2ZVJlc3VsdD47XG4gIGRlc3Ryb3koXG4gICAgaWRzOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0IHwgU2F2ZVJlc3VsdFtdPjtcbiAgZGVzdHJveShpZHM6IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zPzogRG1sT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9jb25uLmRlc3Ryb3kodGhpcy50eXBlLCBpZHMsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95KClcbiAgICovXG4gIGRlbGV0ZSA9IHRoaXMuZGVzdHJveTtcblxuICAvKipcbiAgICogU3lub255bSBvZiBTT2JqZWN0I2Rlc3Ryb3koKVxuICAgKi9cbiAgZGVsID0gdGhpcy5kZXN0cm95O1xuXG4gIC8qKlxuICAgKiBDYWxsIEJ1bGsjbG9hZCgpIHRvIGV4ZWN1dGUgYnVsa2xvYWQsIHJldHVybmluZyBiYXRjaCBvYmplY3RcbiAgICovXG4gIGJ1bGtsb2FkKFxuICAgIG9wZXJhdGlvbjogJ2luc2VydCcgfCAndXBkYXRlJyB8ICd1cHNlcnQnIHwgJ2RlbGV0ZScgfCAnaGFyZERlbGV0ZScsXG4gICAgb3B0aW9uc09ySW5wdXQ/OiBPYmplY3QgfCBSZWNvcmRbXSB8IFJlYWRhYmxlIHwgc3RyaW5nLFxuICAgIGlucHV0PzogUmVjb3JkW10gfCBSZWFkYWJsZSB8IHN0cmluZyxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm4uYnVsay5sb2FkKHRoaXMudHlwZSwgb3BlcmF0aW9uLCBvcHRpb25zT3JJbnB1dCwgaW5wdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1bGtseSBpbnNlcnQgaW5wdXQgZGF0YSB1c2luZyBidWxrIEFQSVxuICAgKi9cbiAgY3JlYXRlQnVsayhpbnB1dD86IFJlY29yZFtdIHwgUmVhZGFibGUgfCBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5idWxrbG9hZCgnaW5zZXJ0JywgaW5wdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bm9ueW0gb2YgU09iamVjdCNjcmVhdGVCdWxrKClcbiAgICovXG4gIGluc2VydEJ1bGsgPSB0aGlzLmNyZWF0ZUJ1bGs7XG5cbiAgLyoqXG4gICAqIEJ1bGtseSB1cGRhdGUgcmVjb3JkcyBieSBpbnB1dCBkYXRhIHVzaW5nIGJ1bGsgQVBJXG4gICAqL1xuICB1cGRhdGVCdWxrKGlucHV0PzogUmVjb3JkW10gfCBSZWFkYWJsZSB8IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmJ1bGtsb2FkKCd1cGRhdGUnLCBpbnB1dCk7XG4gIH1cblxuICAvKipcbiAgICogQnVsa2x5IHVwc2VydCByZWNvcmRzIGJ5IGlucHV0IGRhdGEgdXNpbmcgYnVsayBBUElcbiAgICovXG4gIHVwc2VydEJ1bGsoaW5wdXQ/OiBSZWNvcmRbXSB8IFJlYWRhYmxlIHwgc3RyaW5nLCBleHRJZEZpZWxkPzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVsa2xvYWQoJ3Vwc2VydCcsIHsgZXh0SWRGaWVsZCB9LCBpbnB1dCk7XG4gIH1cblxuICAvKipcbiAgICogQnVsa2x5IGRlbGV0ZSByZWNvcmRzIHNwZWNpZmllZCBieSBpbnB1dCBkYXRhIHVzaW5nIGJ1bGsgQVBJXG4gICAqL1xuICBkZXN0cm95QnVsayhpbnB1dD86IFJlY29yZFtdIHwgUmVhZGFibGUgfCBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5idWxrbG9hZCgnZGVsZXRlJywgaW5wdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95QnVsaygpXG4gICAqL1xuICBkZWxldGVCdWxrID0gdGhpcy5kZXN0cm95QnVsaztcblxuICAvKipcbiAgICogQnVsa2x5IGhhcmQgZGVsZXRlIHJlY29yZHMgc3BlY2lmaWVkIGluIGlucHV0IGRhdGEgdXNpbmcgYnVsayBBUElcbiAgICovXG4gIGRlc3Ryb3lIYXJkQnVsayhpbnB1dDogUmVjb3JkW10gfCBSZWFkYWJsZSkge1xuICAgIHJldHVybiB0aGlzLmJ1bGtsb2FkKCdoYXJkRGVsZXRlJywgaW5wdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95SGFyZEJ1bGsoKVxuICAgKi9cbiAgZGVsZXRlSGFyZEJ1bGsgPSB0aGlzLmRlc3Ryb3lIYXJkQnVsaztcblxuICAvKipcbiAgICogRGVzY3JpYmUgU09iamVjdCBtZXRhZGF0YVxuICAgKi9cbiAgZGVzY3JpYmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm4uZGVzY3JpYmUodGhpcy50eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgZGVzY3JpYmUkKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uLmRlc2NyaWJlJCh0aGlzLnR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBkZXNjcmliZSQkKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uLmRlc2NyaWJlJCQodGhpcy50eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmVjb3JkIHJlcHJlc2VudGF0aW9uIGluc3RhbmNlIGJ5IGdpdmVuIGlkXG4gICAqL1xuICByZWNvcmQoaWQ6IHN0cmluZyk6IFJlY29yZFJlZmVyZW5jZTxTLCBOPiB7XG4gICAgcmV0dXJuIG5ldyBSZWNvcmRSZWZlcmVuY2UodGhpcy5fY29ubiwgdGhpcy50eXBlLCBpZCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgcmVjZW50bHkgYWNjZXNzZWQgcmVjb3Jkc1xuICAgKi9cbiAgcmVjZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uLnJlY2VudCh0aGlzLnR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSB1cGRhdGVkIHJlY29yZHNcbiAgICovXG4gIHVwZGF0ZWQoc3RhcnQ6IHN0cmluZyB8IERhdGUsIGVuZDogc3RyaW5nIHwgRGF0ZSkge1xuICAgIHJldHVybiB0aGlzLl9jb25uLnVwZGF0ZWQodGhpcy50eXBlLCBzdGFydCwgZW5kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZGVsZXRlZCByZWNvcmRzXG4gICAqL1xuICBkZWxldGVkKHN0YXJ0OiBzdHJpbmcgfCBEYXRlLCBlbmQ6IHN0cmluZyB8IERhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5fY29ubi5kZWxldGVkKHRoaXMudHlwZSwgc3RhcnQsIGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogRGVzY3JpYmUgbGF5b3V0IGluZm9ybWF0aW9uIGZvciBTT2JqZWN0XG4gICAqL1xuICBhc3luYyBsYXlvdXRzKGxheW91dE5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPERlc2NyaWJlTGF5b3V0UmVzdWx0PiB7XG4gICAgY29uc3QgdXJsID0gYC9zb2JqZWN0cy8ke3RoaXMudHlwZX0vZGVzY3JpYmUvJHtcbiAgICAgIGxheW91dE5hbWUgPyBgbmFtZWRMYXlvdXRzLyR7bGF5b3V0TmFtZX1gIDogJ2xheW91dHMnXG4gICAgfWA7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpO1xuICAgIHJldHVybiBib2R5IGFzIERlc2NyaWJlTGF5b3V0UmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IENvbXBhY3RMYXlvdXRJbmZvXG4gICAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gY29tcGFjdExheW91dHMgLSBBcnJheSBvZiBjb21wYWN0IGxheW91dHNcbiAgICogQHByb3Age1N0cmluZ30gZGVmYXVsdENvbXBhY3RMYXlvdXRJZCAtIElEIG9mIGRlZmF1bHQgY29tcGFjdCBsYXlvdXRcbiAgICogQHByb3Age0FycmF5LjxPYmplY3Q+fSByZWNvcmRUeXBlQ29tcGFjdExheW91dE1hcHBpbmdzIC0gQXJyYXkgb2YgcmVjb3JkIHR5cGUgbWFwcGluZ3NcbiAgICovXG4gIC8qKlxuICAgKiBEZXNjcmliZSBjb21wYWN0IGxheW91dCBpbmZvcm1hdGlvbiBkZWZpbmVkIGZvciBTT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2suPENvbXBhY3RMYXlvdXRJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxDb21wYWN0TGF5b3V0SW5mbz59XG4gICAqL1xuICBhc3luYyBjb21wYWN0TGF5b3V0cygpOiBQcm9taXNlPERlc2NyaWJlQ29tcGFjdExheW91dHNSZXN1bHQ+IHtcbiAgICBjb25zdCB1cmwgPSBgL3NvYmplY3RzLyR7dGhpcy50eXBlfS9kZXNjcmliZS9jb21wYWN0TGF5b3V0c2A7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpO1xuICAgIHJldHVybiBib2R5IGFzIERlc2NyaWJlQ29tcGFjdExheW91dHNSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRGVzY3JpYmUgY29tcGFjdCBsYXlvdXQgaW5mb3JtYXRpb24gZGVmaW5lZCBmb3IgU09iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge0NhbGxiYWNrLjxBcHByb3ZhbExheW91dEluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICogQHJldHVybnMge1Byb21pc2UuPEFwcHJvdmFsTGF5b3V0SW5mbz59XG4gICAqL1xuICBhc3luYyBhcHByb3ZhbExheW91dHMoKTogUHJvbWlzZTxEZXNjcmliZUFwcHJvdmFsTGF5b3V0c1Jlc3VsdD4ge1xuICAgIGNvbnN0IHVybCA9IGAvc29iamVjdHMvJHt0aGlzLnR5cGV9L2Rlc2NyaWJlL2FwcHJvdmFsTGF5b3V0c2A7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpO1xuICAgIHJldHVybiBib2R5IGFzIERlc2NyaWJlQXBwcm92YWxMYXlvdXRzUmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYW5kIGZldGNoIHJlY29yZHMgd2hpY2ggbWF0Y2hlcyBnaXZlbiBjb25kaXRpb25zXG4gICAqL1xuICBmaW5kPFIgZXh0ZW5kcyBSZWNvcmQgPSBSZWNvcmQ+KFxuICAgIGNvbmRpdGlvbnM/OiBPcHRpb25hbDxRdWVyeUNvbmRpdGlvbjxTLCBOPj4sXG4gICk6IFF1ZXJ5PFMsIE4sIFNPYmplY3RSZWNvcmQ8UywgTiwgJyonLCBSPiwgJ1JlY29yZHMnPjtcbiAgZmluZDxcbiAgICBSIGV4dGVuZHMgUmVjb3JkID0gUmVjb3JkLFxuICAgIEZQIGV4dGVuZHMgRmllbGRQYXRoU3BlY2lmaWVyPFMsIE4+ID0gRmllbGRQYXRoU3BlY2lmaWVyPFMsIE4+LFxuICAgIEZQQyBleHRlbmRzIEZpZWxkUHJvamVjdGlvbkNvbmZpZyA9IEZpZWxkUGF0aFNjb3BlZFByb2plY3Rpb248UywgTiwgRlA+XG4gID4oXG4gICAgY29uZGl0aW9uczogT3B0aW9uYWw8UXVlcnlDb25kaXRpb248UywgTj4+LFxuICAgIGZpZWxkcz86IE9wdGlvbmFsPFF1ZXJ5RmllbGQ8UywgTiwgRlA+PixcbiAgICBvcHRpb25zPzogRmluZE9wdGlvbnM8UywgTj4sXG4gICk6IFF1ZXJ5PFMsIE4sIFNPYmplY3RSZWNvcmQ8UywgTiwgRlBDLCBSPiwgJ1JlY29yZHMnPjtcbiAgZmluZChcbiAgICBjb25kaXRpb25zPzogT3B0aW9uYWw8UXVlcnlDb25kaXRpb248UywgTj4+LFxuICAgIGZpZWxkcz86IE9wdGlvbmFsPFF1ZXJ5RmllbGQ8UywgTiwgRmllbGRQYXRoU3BlY2lmaWVyPFMsIE4+Pj4sXG4gICAgb3B0aW9uczogRmluZE9wdGlvbnM8UywgTj4gPSB7fSxcbiAgKTogUXVlcnk8UywgTiwgYW55LCAnUmVjb3Jkcyc+IHtcbiAgICBjb25zdCB7IHNvcnQsIGxpbWl0LCBvZmZzZXQsIC4uLnFvcHRpb25zIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGNvbmZpZzogUXVlcnlDb25maWc8UywgTj4gPSB7XG4gICAgICBmaWVsZHM6IGZpZWxkcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZmllbGRzLFxuICAgICAgaW5jbHVkZXM6IG9wdGlvbnMuaW5jbHVkZXMsXG4gICAgICB0YWJsZTogdGhpcy50eXBlLFxuICAgICAgY29uZGl0aW9uczogY29uZGl0aW9ucyA9PSBudWxsID8gdW5kZWZpbmVkIDogY29uZGl0aW9ucyxcbiAgICAgIHNvcnQsXG4gICAgICBsaW1pdCxcbiAgICAgIG9mZnNldCxcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gbmV3IFF1ZXJ5PFMsIE4+KHRoaXMuX2Nvbm4sIGNvbmZpZywgcW9wdGlvbnMpO1xuICAgIHJldHVybiBxdWVyeS5zZXRSZXNwb25zZVRhcmdldChSZXNwb25zZVRhcmdldHMuUmVjb3Jkcyk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggb25lIHJlY29yZCB3aGljaCBtYXRjaGVzIGdpdmVuIGNvbmRpdGlvbnNcbiAgICovXG4gIGZpbmRPbmU8UiBleHRlbmRzIFJlY29yZCA9IFJlY29yZD4oXG4gICAgY29uZGl0aW9ucz86IE9wdGlvbmFsPFF1ZXJ5Q29uZGl0aW9uPFMsIE4+PixcbiAgKTogUXVlcnk8UywgTiwgU09iamVjdFJlY29yZDxTLCBOLCAnKicsIFI+LCAnU2luZ2xlUmVjb3JkJz47XG4gIGZpbmRPbmU8XG4gICAgUiBleHRlbmRzIFJlY29yZCA9IFJlY29yZCxcbiAgICBGUCBleHRlbmRzIEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPiA9IEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPixcbiAgICBGUEMgZXh0ZW5kcyBGaWVsZFByb2plY3Rpb25Db25maWcgPSBGaWVsZFBhdGhTY29wZWRQcm9qZWN0aW9uPFMsIE4sIEZQPlxuICA+KFxuICAgIGNvbmRpdGlvbnM6IE9wdGlvbmFsPFF1ZXJ5Q29uZGl0aW9uPFMsIE4+PixcbiAgICBmaWVsZHM/OiBPcHRpb25hbDxRdWVyeUZpZWxkPFMsIE4sIEZQPj4sXG4gICAgb3B0aW9ucz86IEZpbmRPcHRpb25zPFMsIE4+LFxuICApOiBRdWVyeTxTLCBOLCBTT2JqZWN0UmVjb3JkPFMsIE4sIEZQQywgUj4sICdTaW5nbGVSZWNvcmQnPjtcbiAgZmluZE9uZShcbiAgICBjb25kaXRpb25zPzogT3B0aW9uYWw8UXVlcnlDb25kaXRpb248UywgTj4+LFxuICAgIGZpZWxkcz86IE9wdGlvbmFsPFF1ZXJ5RmllbGQ8UywgTiwgRmllbGRQYXRoU3BlY2lmaWVyPFMsIE4+Pj4sXG4gICAgb3B0aW9uczogRmluZE9wdGlvbnM8UywgTj4gPSB7fSxcbiAgKTogUXVlcnk8UywgTiwgYW55LCAnU2luZ2xlUmVjb3JkJz4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5maW5kKGNvbmRpdGlvbnMsIGZpZWxkcywgeyAuLi5vcHRpb25zLCBsaW1pdDogMSB9KTtcbiAgICByZXR1cm4gcXVlcnkuc2V0UmVzcG9uc2VUYXJnZXQoUmVzcG9uc2VUYXJnZXRzLlNpbmdsZVJlY29yZCk7XG4gIH1cblxuICAvKipcbiAgICogRmluZCBhbmQgZmV0Y2ggcmVjb3JkcyBvbmx5IGJ5IHNwZWNpZnlpbmcgZmllbGRzIHRvIGZldGNoLlxuICAgKi9cbiAgc2VsZWN0PFxuICAgIFIgZXh0ZW5kcyBSZWNvcmQgPSBSZWNvcmQsXG4gICAgRlAgZXh0ZW5kcyBGaWVsZFBhdGhTcGVjaWZpZXI8UywgTj4gPSBGaWVsZFBhdGhTcGVjaWZpZXI8UywgTj4sXG4gICAgRlBDIGV4dGVuZHMgRmllbGRQcm9qZWN0aW9uQ29uZmlnID0gRmllbGRQYXRoU2NvcGVkUHJvamVjdGlvbjxTLCBOLCBGUD5cbiAgPihcbiAgICBmaWVsZHM6IFF1ZXJ5RmllbGQ8UywgTiwgRlA+LFxuICApOiBRdWVyeTxTLCBOLCBTT2JqZWN0UmVjb3JkPFMsIE4sIEZQQywgUj4sICdSZWNvcmRzJz4ge1xuICAgIHJldHVybiB0aGlzLmZpbmQobnVsbCwgZmllbGRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3VudCBudW0gb2YgcmVjb3JkcyB3aGljaCBtYXRjaGVzIGdpdmVuIGNvbmRpdGlvbnNcbiAgICovXG4gIGNvdW50KGNvbmRpdGlvbnM/OiBPcHRpb25hbDxRdWVyeUNvbmRpdGlvbjxTLCBOPj4pIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuZmluZChjb25kaXRpb25zLCAnY291bnQoKScpO1xuICAgIHJldHVybiBxdWVyeS5zZXRSZXNwb25zZVRhcmdldChSZXNwb25zZVRhcmdldHMuQ291bnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgbGlzdCB2aWV3cyBmb3IgdGhlIFNPYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtDYWxsYmFjay48TGlzdFZpZXdzSW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48TGlzdFZpZXdzSW5mbz59XG4gICAqL1xuICBsaXN0dmlld3MoKSB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5fY29ubi5fYmFzZVVybCgpfS9zb2JqZWN0cy8ke3RoaXMudHlwZX0vbGlzdHZpZXdzYDtcbiAgICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHVybCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGlzdCB2aWV3IGluZm8gaW4gc3BlY2lmZWQgdmlldyBpZFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBMaXN0IHZpZXcgSURcbiAgICogQHJldHVybnMge0xpc3RWaWV3fVxuICAgKi9cbiAgbGlzdHZpZXcoaWQ6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgTGlzdFZpZXcodGhpcy5fY29ubiwgdGhpcy50eXBlLCBpZCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCByZWdpc3RlcmVkIHF1aWNrIGFjdGlvbnMgZm9yIHRoZSBTT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxRdWlja0FjdGlvbn5RdWlja0FjdGlvbkluZm8+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UXVpY2tBY3Rpb25+UXVpY2tBY3Rpb25JbmZvPj59XG4gICAqL1xuICBxdWlja0FjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdChgL3NvYmplY3RzLyR7dGhpcy50eXBlfS9xdWlja0FjdGlvbnNgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmVmZXJlbmNlIGZvciBzcGVjaWZpZWQgcXVpY2sgYWNpdG9uIGluIHRoZSBTT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25OYW1lIC0gTmFtZSBvZiB0aGUgcXVpY2sgYWN0aW9uXG4gICAqIEByZXR1cm5zIHtRdWlja0FjdGlvbn1cbiAgICovXG4gIHF1aWNrQWN0aW9uKGFjdGlvbk5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgUXVpY2tBY3Rpb24oXG4gICAgICB0aGlzLl9jb25uLFxuICAgICAgYC9zb2JqZWN0cy8ke3RoaXMudHlwZX0vcXVpY2tBY3Rpb25zLyR7YWN0aW9uTmFtZX1gLFxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIGZvciBvcmdhbml6aW5nIGxpc3QgdmlldyBpbmZvcm1hdGlvblxuICpcbiAqIEBwcm90ZWN0ZWRcbiAqIEBjbGFzcyBMaXN0Vmlld1xuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBpbnN0YW5jZVxuICogQHBhcmFtIHtTT2JqZWN0fSB0eXBlIC0gU09iamVjdCB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBMaXN0IHZpZXcgSURcbiAqL1xuY2xhc3MgTGlzdFZpZXcge1xuICBfY29ubjogQ29ubmVjdGlvbjtcbiAgdHlwZTogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IoY29ubjogQ29ubmVjdGlvbiwgdHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5fY29ubiA9IGNvbm47XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmlkID0gaWQ7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgcXVlcnkgZm9yIHRoZSBsaXN0IHZpZXcgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBkYXRhIGFuZCBwcmVzZW50YXRpb24gaW5mb3JtYXRpb24uXG4gICAqL1xuICByZXN1bHRzKCkge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuX2Nvbm4uX2Jhc2VVcmwoKX0vc29iamVjdHMvJHt0aGlzLnR5cGV9L2xpc3R2aWV3cy8ke1xuICAgICAgdGhpcy5pZFxuICAgIH0vcmVzdWx0c2A7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgYSBsaXN0IHZpZXdcbiAgICovXG4gIGRlc2NyaWJlKG9wdGlvbnM6IHsgaGVhZGVycz86IHsgW25hbWU6IHN0cmluZ106IHN0cmluZyB9IH0gPSB7fSkge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuX2Nvbm4uX2Jhc2VVcmwoKX0vc29iamVjdHMvJHt0aGlzLnR5cGV9L2xpc3R2aWV3cy8ke1xuICAgICAgdGhpcy5pZFxuICAgIH0vZGVzY3JpYmVgO1xuICAgIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QoeyBtZXRob2Q6ICdHRVQnLCB1cmwsIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBsYWluIHBsYW4gZm9yIGV4ZWN1dGluZyBsaXN0IHZpZXdcbiAgICovXG4gIGV4cGxhaW4oKSB7XG4gICAgY29uc3QgdXJsID0gYC9xdWVyeS8/ZXhwbGFpbj0ke3RoaXMuaWR9YDtcbiAgICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0PGFueT4odXJsKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTT2JqZWN0O1xuXG4vLyBUT0RPIEJ1bGtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLFNBQWlCQSxTQUFTLFFBQVEsZUFBZTtBQXNCakQsT0FBT0MsZUFBZSxNQUFNLG9CQUFvQjtBQUNoRCxPQUFPQyxLQUFLLElBQ1ZDLGVBQWUsUUFLVixTQUFTO0FBQ2hCLE9BQU9DLFdBQVcsTUFBTSxnQkFBZ0I7QUFZeEM7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFNQyxPQUFPLENBT2xCO0VBT0E7O0VBR0E7O0VBR0E7O0VBTUE7QUFDRjtBQUNBO0VBQ0VDLFdBQVdBLENBQUNDLElBQW1CLEVB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