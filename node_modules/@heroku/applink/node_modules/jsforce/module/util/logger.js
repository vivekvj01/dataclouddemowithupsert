import "core-js/modules/es.array.iterator";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
/**
 *
 */
export const LogLevels = {
  DEBUG: 1,
  INFO: 2,
  WARN: 3,
  ERROR: 4,
  FATAL: 5,
  NONE: 6
};
const LogLevelLabels = ['', 'DEBUG', 'INFO', 'WARN', 'ERROR', 'FATAL', 'NONE'];
const globalLogLevelConfig = (() => {
  const globalLogLevelStr = process.env.JSFORCE_LOG_LEVEL || global.__JSFORCE_LOG_LEVEL__ || 'NONE';
  if (/^(DEBUG|INFO|WARN|ERROR|FATAL|NONE)$/i.test(globalLogLevelStr)) {
    return {
      '*': globalLogLevelStr
    };
  }
  try {
    return JSON.parse(globalLogLevelStr);
  } catch (e) {
    return {
      '*': 'NONE'
    };
  }
})();
function getModuleLogLevel(logLevelConfig, moduleName) {
  const logLevel = logLevelConfig[moduleName] || logLevelConfig['*'];
  return typeof logLevel === 'number' ? logLevel : LogLevels[logLevel] || LogLevels.NONE;
}

/**
 *
 */
export class Logger {
  constructor(moduleName, logLevelConfig = globalLogLevelConfig) {
    _defineProperty(this, "_moduleName", void 0);
    _defineProperty(this, "_logLevel", void 0);
    this._moduleName = moduleName;
    this._logLevel = typeof logLevelConfig === 'number' ? logLevelConfig : typeof logLevelConfig === 'string' ? LogLevels[logLevelConfig] || LogLevels.NONE : getModuleLogLevel(logLevelConfig, moduleName);
  }
  createInstance(logLevelConfig = this._logLevel) {
    return new Logger(this._moduleName, logLevelConfig);
  }
  setLogLevel(logLevel) {
    if (typeof logLevel === 'string') {
      this._logLevel = LogLevels[logLevel] || LogLevels.NONE;
    } else {
      this._logLevel = logLevel;
    }
  }
  log(logLevel, ...messages) {
    if (this._logLevel <= logLevel) {
      const msgs = [`${LogLevelLabels[logLevel]}\t[${this._moduleName}] `, ...messages];
      if (logLevel < LogLevels.ERROR) {
        console.log(...msgs); // eslint-disable-line no-console
      } else {
        console.error(...msgs); // eslint-disable-line no-console
      }
    }
  }

  debug(...messages) {
    this.log(LogLevels.DEBUG, ...messages);
  }
  info(...messages) {
    this.log(LogLevels.INFO, ...messages);
  }
  warn(...messages) {
    this.log(LogLevels.WARN, ...messages);
  }
  error(...messages) {
    this.log(LogLevels.ERROR, ...messages);
  }
  fatal(...messages) {
    this.log(LogLevels.FATAL, ...messages);
  }
}
const loggers = {};

/**
 *
 */
export function getLogger(moduleName) {
  const logger = loggers[moduleName] || new Logger(moduleName);
  loggers[moduleName] = logger;
  return logger;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMb2dMZXZlbHMiLCJERUJVRyIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJGQVRBTCIsIk5PTkUiLCJMb2dMZXZlbExhYmVscyIsImdsb2JhbExvZ0xldmVsQ29uZmlnIiwiZ2xvYmFsTG9nTGV2ZWxTdHIiLCJwcm9jZXNzIiwiZW52IiwiSlNGT1JDRV9MT0dfTEVWRUwiLCJnbG9iYWwiLCJfX0pTRk9SQ0VfTE9HX0xFVkVMX18iLCJ0ZXN0IiwiSlNPTiIsInBhcnNlIiwiZSIsImdldE1vZHVsZUxvZ0xldmVsIiwibG9nTGV2ZWxDb25maWciLCJtb2R1bGVOYW1lIiwibG9nTGV2ZWwiLCJMb2dnZXIiLCJjb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9tb2R1bGVOYW1lIiwiX2xvZ0xldmVsIiwiY3JlYXRlSW5zdGFuY2UiLCJzZXRMb2dMZXZlbCIsImxvZyIsIm1lc3NhZ2VzIiwibXNncyIsImNvbnNvbGUiLCJlcnJvciIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJmYXRhbCIsImxvZ2dlcnMiLCJnZXRMb2dnZXIiLCJsb2dnZXIiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbC9sb2dnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5leHBvcnQgY29uc3QgTG9nTGV2ZWxzOiB7IFtsZXZlbDogc3RyaW5nXTogbnVtYmVyIH0gPSB7XG4gIERFQlVHOiAxLFxuICBJTkZPOiAyLFxuICBXQVJOOiAzLFxuICBFUlJPUjogNCxcbiAgRkFUQUw6IDUsXG4gIE5PTkU6IDYsXG59O1xuXG5jb25zdCBMb2dMZXZlbExhYmVscyA9IFsnJywgJ0RFQlVHJywgJ0lORk8nLCAnV0FSTicsICdFUlJPUicsICdGQVRBTCcsICdOT05FJ107XG5cbmNvbnN0IGdsb2JhbExvZ0xldmVsQ29uZmlnID0gKCgpID0+IHtcbiAgY29uc3QgZ2xvYmFsTG9nTGV2ZWxTdHIgPVxuICAgIHByb2Nlc3MuZW52LkpTRk9SQ0VfTE9HX0xFVkVMIHx8XG4gICAgKGdsb2JhbCBhcyBhbnkpLl9fSlNGT1JDRV9MT0dfTEVWRUxfXyB8fFxuICAgICdOT05FJztcbiAgaWYgKC9eKERFQlVHfElORk98V0FSTnxFUlJPUnxGQVRBTHxOT05FKSQvaS50ZXN0KGdsb2JhbExvZ0xldmVsU3RyKSkge1xuICAgIHJldHVybiB7ICcqJzogZ2xvYmFsTG9nTGV2ZWxTdHIgfTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGdsb2JhbExvZ0xldmVsU3RyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7ICcqJzogJ05PTkUnIH07XG4gIH1cbn0pKCk7XG5cbmV4cG9ydCB0eXBlIExvZ0xldmVsQ29uZmlnID1cbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfTtcblxuZnVuY3Rpb24gZ2V0TW9kdWxlTG9nTGV2ZWwoXG4gIGxvZ0xldmVsQ29uZmlnOiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSxcbiAgbW9kdWxlTmFtZTogc3RyaW5nLFxuKSB7XG4gIGNvbnN0IGxvZ0xldmVsID0gbG9nTGV2ZWxDb25maWdbbW9kdWxlTmFtZV0gfHwgbG9nTGV2ZWxDb25maWdbJyonXTtcbiAgcmV0dXJuIHR5cGVvZiBsb2dMZXZlbCA9PT0gJ251bWJlcidcbiAgICA/IGxvZ0xldmVsXG4gICAgOiBMb2dMZXZlbHNbbG9nTGV2ZWxdIHx8IExvZ0xldmVscy5OT05FO1xufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBfbW9kdWxlTmFtZTogc3RyaW5nO1xuICBfbG9nTGV2ZWw6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBtb2R1bGVOYW1lOiBzdHJpbmcsXG4gICAgbG9nTGV2ZWxDb25maWc6IExvZ0xldmVsQ29uZmlnID0gZ2xvYmFsTG9nTGV2ZWxDb25maWcsXG4gICkge1xuICAgIHRoaXMuX21vZHVsZU5hbWUgPSBtb2R1bGVOYW1lO1xuICAgIHRoaXMuX2xvZ0xldmVsID1cbiAgICAgIHR5cGVvZiBsb2dMZXZlbENvbmZpZyA9PT0gJ251bWJlcidcbiAgICAgICAgPyBsb2dMZXZlbENvbmZpZ1xuICAgICAgICA6IHR5cGVvZiBsb2dMZXZlbENvbmZpZyA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBMb2dMZXZlbHNbbG9nTGV2ZWxDb25maWddIHx8IExvZ0xldmVscy5OT05FXG4gICAgICAgIDogZ2V0TW9kdWxlTG9nTGV2ZWwobG9nTGV2ZWxDb25maWcsIG1vZHVsZU5hbWUpO1xuICB9XG5cbiAgY3JlYXRlSW5zdGFuY2UobG9nTGV2ZWxDb25maWc6IExvZ0xldmVsQ29uZmlnID0gdGhpcy5fbG9nTGV2ZWwpIHtcbiAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLl9tb2R1bGVOYW1lLCBsb2dMZXZlbENvbmZpZyk7XG4gIH1cblxuICBzZXRMb2dMZXZlbChsb2dMZXZlbDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgaWYgKHR5cGVvZiBsb2dMZXZlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2xvZ0xldmVsID0gTG9nTGV2ZWxzW2xvZ0xldmVsXSB8fCBMb2dMZXZlbHMuTk9ORTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICB9XG4gIH1cblxuICBsb2cobG9nTGV2ZWw6IG51bWJlciwgLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gbG9nTGV2ZWwpIHtcbiAgICAgIGNvbnN0IG1zZ3MgPSBbXG4gICAgICAgIGAke0xvZ0xldmVsTGFiZWxzW2xvZ0xldmVsXX1cXHRbJHt0aGlzLl9tb2R1bGVOYW1lfV0gYCxcbiAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICBdO1xuICAgICAgaWYgKGxvZ0xldmVsIDwgTG9nTGV2ZWxzLkVSUk9SKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKC4uLm1zZ3MpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoLi4ubXNncyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlYnVnKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLkRFQlVHLCAuLi5tZXNzYWdlcyk7XG4gIH1cblxuICBpbmZvKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLklORk8sIC4uLm1lc3NhZ2VzKTtcbiAgfVxuXG4gIHdhcm4oLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbHMuV0FSTiwgLi4ubWVzc2FnZXMpO1xuICB9XG5cbiAgZXJyb3IoLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbHMuRVJST1IsIC4uLm1lc3NhZ2VzKTtcbiAgfVxuXG4gIGZhdGFsKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLkZBVEFMLCAuLi5tZXNzYWdlcyk7XG4gIH1cbn1cblxuY29uc3QgbG9nZ2VyczogeyBbbmFtZTogc3RyaW5nXTogTG9nZ2VyIH0gPSB7fTtcblxuLyoqXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG1vZHVsZU5hbWU6IHN0cmluZykge1xuICBjb25zdCBsb2dnZXIgPSBsb2dnZXJzW21vZHVsZU5hbWVdIHx8IG5ldyBMb2dnZXIobW9kdWxlTmFtZSk7XG4gIGxvZ2dlcnNbbW9kdWxlTmFtZV0gPSBsb2dnZXI7XG4gIHJldHVybiBsb2dnZXI7XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFNQSxTQUFzQyxHQUFHO0VBQ3BEQyxLQUFLLEVBQUUsQ0FBQztFQUNSQyxJQUFJLEVBQUUsQ0FBQztFQUNQQyxJQUFJLEVBQUUsQ0FBQztFQUNQQyxLQUFLLEVBQUUsQ0FBQztFQUNSQyxLQUFLLEVBQUUsQ0FBQztFQUNSQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRUQsTUFBTUMsY0FBYyxHQUFHLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDO0FBRTlFLE1BQU1DLG9CQUFvQixHQUFHLENBQUMsTUFBTTtFQUNsQyxNQUFNQyxpQkFBaUIsR0FDckJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxpQkFBaUIsSUFDNUJDLE1BQU0sQ0FBU0MscUJBQXFCLElBQ3JDLE1BQU07RUFDUixJQUFJLHVDQUF1QyxDQUFDQyxJQUFJLENBQUNOLGlCQUFpQixDQUFDLEVBQUU7SUFDbkUsT0FBTztNQUFFLEdBQUcsRUFBRUE7SUFBa0IsQ0FBQztFQUNuQztFQUNBLElBQUk7SUFDRixPQUFPTyxJQUFJLENBQUNDLEtBQUssQ0FBQ1IsaUJBQWlCLENBQUM7RUFDdEMsQ0FBQyxDQUFDLE9BQU9TLENBQUMsRUFBRTtJQUNWLE9BQU87TUFBRSxHQUFHLEVBQUU7SUFBTyxDQUFDO0VBQ3hCO0FBQ0YsQ0FBQyxFQUFFLENBQUM7QUFPSixTQUFTQyxpQkFBaUJBLENBQ3hCQyxjQUFtRCxFQUNuREMsVUFBa0IsRUFDbEI7RUFDQSxNQUFNQyxRQUFRLEdBQUdGLGNBQWMsQ0FBQ0MsVUFBVSxDQUFDLElBQUlELGNBQWMsQ0FBQyxHQUFHLENBQUM7RUFDbEUsT0FBTyxPQUFPRSxRQUFRLEtBQUssUUFBUSxHQUMvQkEsUUFBUSxHQUNSdEIsU0FBUyxDQUFDc0IsUUFBUSxDQUFDLElBQUl0QixTQUFTLENBQUNNLElBQUk7QUFDM0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFNaUIsTUFBTSxDQUFDO0VBSWxCQyxXQUFXQSxDQUNUSCxVQUFrQixFQUNsQkQsY0FBOEIsR0FBR1osb0JBQW9CLEVBQ3JEO0lBQUFpQixlQUFBO0lBQUFBLGVBQUE7SUFDQSxJQUFJLENBQUNDLFdBQVcsR0FBR0wsVUFBVTtJQUM3QixJQUFJLENBQUNNLFNBQVMsR0FDWixPQUFPUCxjQUFjLEtBQUssUUFBUSxHQUM5QkEsY0FBYyxHQUNkLE9BQU9BLGNBQWMsS0FBSyxRQUFRLEdBQ2xDcEIsU0FBUyxDQUFDb0IsY0FBYyxDQUFDLElBQUlwQixTQUFTLENBQUNNLElBQUksR0FDM0NhLGlCQUFpQixDQUFDQyxjQUFjLEVBQUVDLFVBQVUsQ0FBQztFQUNyRDtFQUVBTyxjQUFjQSxDQUFDUixjQUE4QixHQUFHLElBQUksQ0FBQ08sU0FBUyxFQUFFO0lBQzlELE9BQU8sSUFBSUosTUFBTSxDQUFDLElBQUksQ0FBQ0csV0FBVyxFQUFFTixjQUFjLENBQUM7RUFDckQ7RUFFQVMsV0FBV0EsQ0FBQ1AsUUFBeUIsRUFBRTtJQUNyQyxJQUFJLE9BQU9BLFFBQVEsS0FBSyxRQUFRLEVBQUU7TUFDaEMsSUFBSSxDQUFDSyxTQUFTLEdBQUczQixTQUFTLENBQUNzQixRQUFRLENBQUMsSUFBSXRCLFNBQVMsQ0FBQ00sSUFBSTtJQUN4RCxDQUFDLE1BQU07TUFDTCxJQUFJLENBQUNxQixTQUFTLEdBQUdMLFFBQVE7SUFDM0I7RUFDRjtFQUVBUSxHQUFHQSxDQUFDUixRQUFnQixFQUFFLEdBQUdTLFFBQW9CLEVBQUU7SUFDN0MsSUFBSSxJQUFJLENBQUNKLFNBQVMsSUFBSUwsUUFBUSxFQUFFO01BQzlCLE1BQU1VLElBQUksR0FBRyxDQUNWLEdBQUV6QixjQUFjLENBQUNlLFFBQVEsQ0FBRSxNQUFLLElBQUksQ0FBQ0ksV0FBWSxJQUFHLEVBQ3JELEdBQUdLLFFBQVEsQ0FDWjtNQUNELElBQUlULFFBQVEsR0FBR3RCLFNBQVMsQ0FBQ0ksS0FBSyxFQUFFO1FBQzlCNkIsT0FBTyxDQUFDSCxHQUFHLENBQUMsR0FBR0UsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUN4QixDQUFDLE1BQU07UUFDTEMsT0FBTyxDQUFDQyxLQUFLLENBQUMsR0FBR0YsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUMxQjtJQUNGO0VBQ0Y7O0VBRUFHLEtBQUtBLENBQUMsR0FBR0osUUFBb0IsRUFBRTtJQUM3QixJQUFJLENBQUNELEdBQUcsQ0FBQzlCLFNBQVMsQ0FBQ0MsS0FBSyxFQUFFLEdBQUc4QixRQUFRLENBQUM7RUFDeEM7RUFFQUssSUFBSUEsQ0FBQyxHQUFHTCxRQUFvQixFQUFFO0lBQzVCLElBQUksQ0FBQ0QsR0FBRyxDQUFDOUIsU0FBUyxDQUFDRSxJQUFJLEVBQUUsR0FBRzZCLFFBQVEsQ0FBQztFQUN2QztFQUVBTSxJQUFJQSxDQUFDLEdBQUdOLFFBQW9CLEVBQUU7SUFDNUIsSUFBSSxDQUFDRCxHQUFHLENBQUM5QixTQUFTLENBQUNHLElBQUksRUFBRSxHQUFHNEIsUUFBUSxDQUFDO0VBQ3ZDO0VBRUFHLEtBQUtBLENBQUMsR0FBR0gsUUFBb0IsRUFBRTtJQUM3QixJQUFJLENBQUNELEdBQUcsQ0FBQzlCLFNBQVMsQ0FBQ0ksS0FBSyxFQUFFLEdBQUcyQixRQUFRLENBQUM7RUFDeEM7RUFFQU8sS0FBS0EsQ0FBQyxHQUFHUCxRQUFvQixFQUFFO0lBQzdCLElBQUksQ0FBQ0QsR0FBRyxDQUFDOUIsU0FBUyxDQUFDSyxLQUFLLEVBQUUsR0FBRzBCLFFBQVEsQ0FBQztFQUN4QztBQUNGO0FBRUEsTUFBTVEsT0FBbUMsR0FBRyxDQUFDLENBQUM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBLE9BQU8sU0FBU0MsU0FBU0EsQ0FBQ25CLFVBQWtCLEVBQUU7RUFDNUMsTUFBTW9CLE1BQU0sR0FBR0YsT0FBTyxDQUFDbEIsVUFBVSxDQUFDLElBQUksSUFBSUUsTUFBTSxDQUFDRixVQUFVLENBQUM7RUFDNURrQixPQUFPLENBQUNsQixVQUFVLENBQUMsR0FBR29CLE1BQU07RUFDNUIsT0FBT0EsTUFBTTtBQUNmIn0=