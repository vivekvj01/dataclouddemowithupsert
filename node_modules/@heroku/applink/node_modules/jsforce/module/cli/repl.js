import "core-js/modules/es.array.iterator";
import "core-js/modules/es.promise";
import "core-js/modules/es.string.replace";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _Object$getPrototypeOf from "@babel/runtime-corejs3/core-js-stable/object/get-prototype-of";
import _Object$getOwnPropertyNames from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-names";
import _indexOfInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/index-of";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _JSON$stringify from "@babel/runtime-corejs3/core-js-stable/json/stringify";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
/**
 * @file Creates REPL interface with built in Salesforce API objects and automatically resolves promise object
 * @author Shinichi Tomita <shinichi.tomita@gmail.com>
 * @private
 */
import { EventEmitter } from 'events';
import { start as startRepl } from 'repl';
import { Transform } from 'stream';
import jsforce from '..';
import { isPromiseLike, isNumber, isFunction, isObject } from '../util/function';
/**
 * Intercept the evaled value returned from repl evaluator, convert and send back to output.
 * @private
 */
function injectBefore(replServer, method, beforeFn) {
  const _orig = replServer[method];
  replServer[method] = (...args) => {
    const callback = args.pop();
    beforeFn.apply(null, _concatInstanceProperty(args).call(args, (err, res) => {
      if (err || res) {
        callback(err, res);
      } else {
        _orig.apply(replServer, _concatInstanceProperty(args).call(args, callback));
      }
    }));
  };
  return replServer;
}

/**
 * @private
 */
function injectAfter(replServer, method, afterFn) {
  const _orig = replServer[method];
  replServer[method] = (...args) => {
    const callback = args.pop();
    _orig.apply(replServer, _concatInstanceProperty(args).call(args, (...args) => {
      try {
        afterFn.apply(null, _concatInstanceProperty(args).call(args, callback));
      } catch (e) {
        callback(e);
      }
    }));
  };
  return replServer;
}

/**
 * When the result was "promise", resolve its value
 * @private
 */
function promisify(err, value, callback) {
  // callback immediately if no value passed
  if (!callback && isFunction(value)) {
    callback = value;
    return callback();
  }
  if (err) {
    throw err;
  }
  if (isPromiseLike(value)) {
    value.then(v => {
      callback(null, v);
    }, err => {
      callback(err);
    });
  } else {
    callback(null, value);
  }
}

/**
 * Output object to stdout in JSON representation
 * @private
 */
function outputToStdout(prettyPrint) {
  if (prettyPrint && !isNumber(prettyPrint)) {
    prettyPrint = 4;
  }
  return (err, value, callback) => {
    if (err) {
      console.error(err);
    } else {
      const str = _JSON$stringify(value, null, prettyPrint);
      console.log(str);
    }
    callback(err, value);
  };
}

/**
 * define get accessor using Object.defineProperty
 * @private
 */
function defineProp(obj, prop, getter) {
  if (_Object$defineProperty) {
    _Object$defineProperty(obj, prop, {
      get: getter
    });
  }
}

/**
 *
 */
export class Repl {
  constructor(cli) {
    _defineProperty(this, "_cli", void 0);
    _defineProperty(this, "_in", void 0);
    _defineProperty(this, "_out", void 0);
    _defineProperty(this, "_interactive", true);
    _defineProperty(this, "_paused", false);
    _defineProperty(this, "_replServer", undefined);
    this._cli = cli;
    this._in = new Transform();
    this._out = new Transform();
    this._in._transform = (chunk, encoding, callback) => {
      if (!this._paused) {
        this._in.push(chunk);
      }
      callback();
    };
    this._out._transform = (chunk, encoding, callback) => {
      if (!this._paused && this._interactive !== false) {
        this._out.push(chunk);
      }
      callback();
    };
  }

  /**
   *
   */
  start(options = {}) {
    this._interactive = options.interactive !== false;
    process.stdin.resume();
    if (process.stdin.setRawMode) {
      process.stdin.setRawMode(true);
    }
    process.stdin.pipe(this._in);
    this._out.pipe(process.stdout);
    defineProp(this._out, 'columns', () => process.stdout.columns);
    this._replServer = startRepl({
      input: this._in,
      output: this._out,
      terminal: true
    });
    this._defineAdditionalCommands();
    this._replServer = injectBefore(this._replServer, 'completer', (line, callback) => {
      this.complete(line).then(rets => {
        callback(null, rets);
      }).catch(err => {
        callback(err);
      });
    });
    this._replServer = injectAfter(this._replServer, 'eval', promisify);
    if (options.interactive === false) {
      this._replServer = injectAfter(this._replServer, 'eval', outputToStdout(options.prettyPrint));
      this._replServer = injectAfter(this._replServer, 'eval', function () {
        process.exit();
      });
    }
    this._replServer.on('exit', () => process.exit());
    this._defineBuiltinVars(this._replServer.context);
    if (options.evalScript) {
      this._in.write(options.evalScript + '\n', 'utf-8');
    }
    return this;
  }

  /**
   *
   */
  _defineAdditionalCommands() {
    const cli = this._cli;
    const replServer = this._replServer;
    if (!replServer) {
      return;
    }
    replServer.defineCommand('connections', {
      help: 'List currenty registered Salesforce connections',
      action: async () => {
        await cli.listConnections();
        replServer.displayPrompt();
      }
    });
    replServer.defineCommand('connect', {
      help: 'Connect to Salesforce instance',
      action: async (...args) => {
        const [name, password] = args;
        const params = password ? {
          connection: name,
          username: name,
          password: password
        } : {
          connection: name,
          username: name
        };
        try {
          await cli.connect(params);
        } catch (err) {
          if (err instanceof Error) {
            console.error(err.message);
          }
        }
        replServer.displayPrompt();
      }
    });
    replServer.defineCommand('disconnect', {
      help: 'Disconnect connection and erase it from registry',
      action: name => {
        cli.disconnect(name);
        replServer.displayPrompt();
      }
    });
    replServer.defineCommand('use', {
      help: 'Specify login server to establish connection',
      action: loginServer => {
        cli.setLoginServer(loginServer);
        replServer.displayPrompt();
      }
    });
    replServer.defineCommand('authorize', {
      help: 'Connect to Salesforce using OAuth2 authorization flow',
      action: async clientName => {
        try {
          await cli.authorize(clientName);
        } catch (err) {
          if (err instanceof Error) {
            console.error(err.message);
          }
        }
        replServer.displayPrompt();
      }
    });
    replServer.defineCommand('register', {
      help: 'Register OAuth2 client information',
      action: async (...args) => {
        const [clientName, clientId, clientSecret, redirectUri, loginUrl] = args;
        const config = {
          clientId,
          clientSecret,
          redirectUri,
          loginUrl
        };
        try {
          await cli.register(clientName, config);
        } catch (err) {
          if (err instanceof Error) {
            console.error(err.message);
          }
        }
        replServer.displayPrompt();
      }
    });
    replServer.defineCommand('open', {
      help: 'Open Salesforce web page using established connection',
      action: url => {
        cli.openUrlUsingSession(url);
        replServer.displayPrompt();
      }
    });
  }

  /**
   *
   */
  pause() {
    this._paused = true;
    if (process.stdin.setRawMode) {
      process.stdin.setRawMode(false);
    }
  }

  /**
   *
   */
  resume() {
    this._paused = false;
    process.stdin.resume();
    if (process.stdin.setRawMode) {
      process.stdin.setRawMode(true);
    }
  }

  /**
   *
   */
  async complete(line) {
    const tokens = line.replace(/^\s+/, '').split(/\s+/);
    const [command, keyword = ''] = tokens;
    if (command[0] === '.' && tokens.length === 2) {
      let candidates = [];
      if (command === '.connect' || command === '.disconnect') {
        candidates = await this._cli.getConnectionNames();
      } else if (command === '.authorize') {
        candidates = await this._cli.getClientNames();
      } else if (command === '.use') {
        candidates = ['production', 'sandbox'];
      }
      candidates = _filterInstanceProperty(candidates).call(candidates, name => _indexOfInstanceProperty(name).call(name, keyword) === 0);
      return [candidates, keyword];
    }
  }

  /**
   * Map all jsforce object to REPL context
   * @private
   */
  _defineBuiltinVars(context) {
    const cli = this._cli;

    // define salesforce package root objects
    for (const key in jsforce) {
      if (Object.prototype.hasOwnProperty.call(jsforce, key) && !global[key]) {
        context[key] = jsforce[key];
      }
    }
    // expose jsforce package root object in context.
    context.jsforce = jsforce;
    function createProxyFunc(prop) {
      return (...args) => {
        const conn = cli.getCurrentConnection();
        return conn[prop](...args);
      };
    }
    function createProxyAccessor(prop) {
      return () => {
        const conn = cli.getCurrentConnection();
        return conn[prop];
      };
    }
    const conn = cli.getCurrentConnection();
    // list all props in connection instance, other than EventEmitter or object built-in methods
    const props = {};
    let o = conn;
    while (o && o !== EventEmitter.prototype && o !== Object.prototype) {
      for (const p of _Object$getOwnPropertyNames(o)) {
        if (p !== 'constructor') {
          props[p] = true;
        }
      }
      o = _Object$getPrototypeOf(o);
    }
    for (const prop of _Object$keys(props)) {
      if (typeof global[prop] !== 'undefined') {
        // avoid global override
        continue;
      }
      if (_indexOfInstanceProperty(prop).call(prop, '_') === 0) {
        // ignore private
        continue;
      }
      if (isFunction(conn[prop])) {
        context[prop] = createProxyFunc(prop);
      } else if (isObject(conn[prop])) {
        defineProp(context, prop, createProxyAccessor(prop));
      }
    }

    // expose default connection as "$conn"
    defineProp(context, '$conn', () => {
      return cli.getCurrentConnection();
    });
  }
}
export default Repl;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJzdGFydCIsInN0YXJ0UmVwbCIsIlRyYW5zZm9ybSIsImpzZm9yY2UiLCJpc1Byb21pc2VMaWtlIiwiaXNOdW1iZXIiLCJpc0Z1bmN0aW9uIiwiaXNPYmplY3QiLCJpbmplY3RCZWZvcmUiLCJyZXBsU2VydmVyIiwibWV0aG9kIiwiYmVmb3JlRm4iLCJfb3JpZyIsImFyZ3MiLCJjYWxsYmFjayIsInBvcCIsImFwcGx5IiwiX2NvbmNhdEluc3RhbmNlUHJvcGVydHkiLCJjYWxsIiwiZXJyIiwicmVzIiwiaW5qZWN0QWZ0ZXIiLCJhZnRlckZuIiwiZSIsInByb21pc2lmeSIsInZhbHVlIiwidGhlbiIsInYiLCJvdXRwdXRUb1N0ZG91dCIsInByZXR0eVByaW50IiwiY29uc29sZSIsImVycm9yIiwic3RyIiwiX0pTT04kc3RyaW5naWZ5IiwibG9nIiwiZGVmaW5lUHJvcCIsIm9iaiIsInByb3AiLCJnZXR0ZXIiLCJfT2JqZWN0JGRlZmluZVByb3BlcnR5IiwiZ2V0IiwiUmVwbCIsImNvbnN0cnVjdG9yIiwiY2xpIiwiX2RlZmluZVByb3BlcnR5IiwidW5kZWZpbmVkIiwiX2NsaSIsIl9pbiIsIl9vdXQiLCJfdHJhbnNmb3JtIiwiY2h1bmsiLCJlbmNvZGluZyIsIl9wYXVzZWQiLCJwdXNoIiwiX2ludGVyYWN0aXZlIiwib3B0aW9ucyIsImludGVyYWN0aXZlIiwicHJvY2VzcyIsInN0ZGluIiwicmVzdW1lIiwic2V0UmF3TW9kZSIsInBpcGUiLCJzdGRvdXQiLCJjb2x1bW5zIiwiX3JlcGxTZXJ2ZXIiLCJpbnB1dCIsIm91dHB1dCIsInRlcm1pbmFsIiwiX2RlZmluZUFkZGl0aW9uYWxDb21tYW5kcyIsImxpbmUiLCJjb21wbGV0ZSIsInJldHMiLCJjYXRjaCIsImV4aXQiLCJvbiIsIl9kZWZpbmVCdWlsdGluVmFycyIsImNvbnRleHQiLCJldmFsU2NyaXB0Iiwid3JpdGUiLCJkZWZpbmVDb21tYW5kIiwiaGVscCIsImFjdGlvbiIsImxpc3RDb25uZWN0aW9ucyIsImRpc3BsYXlQcm9tcHQiLCJuYW1lIiwicGFzc3dvcmQiLCJwYXJhbXMiLCJjb25uZWN0aW9uIiwidXNlcm5hbWUiLCJjb25uZWN0IiwiRXJyb3IiLCJtZXNzYWdlIiwiZGlzY29ubmVjdCIsImxvZ2luU2VydmVyIiwic2V0TG9naW5TZXJ2ZXIiLCJjbGllbnROYW1lIiwiYXV0aG9yaXplIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJyZWRpcmVjdFVyaSIsImxvZ2luVXJsIiwiY29uZmlnIiwicmVnaXN0ZXIiLCJ1cmwiLCJvcGVuVXJsVXNpbmdTZXNzaW9uIiwicGF1c2UiLCJ0b2tlbnMiLCJyZXBsYWNlIiwic3BsaXQiLCJjb21tYW5kIiwia2V5d29yZCIsImxlbmd0aCIsImNhbmRpZGF0ZXMiLCJnZXRDb25uZWN0aW9uTmFtZXMiLCJnZXRDbGllbnROYW1lcyIsIl9maWx0ZXJJbnN0YW5jZVByb3BlcnR5IiwiX2luZGV4T2ZJbnN0YW5jZVByb3BlcnR5Iiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJnbG9iYWwiLCJjcmVhdGVQcm94eUZ1bmMiLCJjb25uIiwiZ2V0Q3VycmVudENvbm5lY3Rpb24iLCJjcmVhdGVQcm94eUFjY2Vzc29yIiwicHJvcHMiLCJvIiwicCIsIl9PYmplY3QkZ2V0T3duUHJvcGVydHlOYW1lcyIsIl9PYmplY3QkZ2V0UHJvdG90eXBlT2YiLCJfT2JqZWN0JGtleXMiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvY2xpL3JlcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBDcmVhdGVzIFJFUEwgaW50ZXJmYWNlIHdpdGggYnVpbHQgaW4gU2FsZXNmb3JjZSBBUEkgb2JqZWN0cyBhbmQgYXV0b21hdGljYWxseSByZXNvbHZlcyBwcm9taXNlIG9iamVjdFxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKiBAcHJpdmF0ZVxuICovXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgUkVQTFNlcnZlciwgc3RhcnQgYXMgc3RhcnRSZXBsIH0gZnJvbSAncmVwbCc7XG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IGpzZm9yY2UgZnJvbSAnLi4nO1xuaW1wb3J0IHtcbiAgaXNQcm9taXNlTGlrZSxcbiAgaXNOdW1iZXIsXG4gIGlzRnVuY3Rpb24sXG4gIGlzT2JqZWN0LFxufSBmcm9tICcuLi91dGlsL2Z1bmN0aW9uJztcbmltcG9ydCB7IENsaSB9IGZyb20gJy4vY2xpJztcblxuLyoqXG4gKiBJbnRlcmNlcHQgdGhlIGV2YWxlZCB2YWx1ZSByZXR1cm5lZCBmcm9tIHJlcGwgZXZhbHVhdG9yLCBjb252ZXJ0IGFuZCBzZW5kIGJhY2sgdG8gb3V0cHV0LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5qZWN0QmVmb3JlKFxuICByZXBsU2VydmVyOiBSRVBMU2VydmVyLFxuICBtZXRob2Q6IHN0cmluZyxcbiAgYmVmb3JlRm46IEZ1bmN0aW9uLFxuKSB7XG4gIGNvbnN0IF9vcmlnOiBGdW5jdGlvbiA9IChyZXBsU2VydmVyIGFzIGFueSlbbWV0aG9kXTtcbiAgKHJlcGxTZXJ2ZXIgYXMgYW55KVttZXRob2RdID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSBhcmdzLnBvcCgpO1xuICAgIGJlZm9yZUZuLmFwcGx5KFxuICAgICAgbnVsbCxcbiAgICAgIGFyZ3MuY29uY2F0KChlcnI6IGFueSwgcmVzOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVyciB8fCByZXMpIHtcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIHJlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX29yaWcuYXBwbHkocmVwbFNlcnZlciwgYXJncy5jb25jYXQoY2FsbGJhY2spKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcbiAgfTtcbiAgcmV0dXJuIHJlcGxTZXJ2ZXI7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5qZWN0QWZ0ZXIoXG4gIHJlcGxTZXJ2ZXI6IFJFUExTZXJ2ZXIsXG4gIG1ldGhvZDogc3RyaW5nLFxuICBhZnRlckZuOiBGdW5jdGlvbixcbikge1xuICBjb25zdCBfb3JpZzogRnVuY3Rpb24gPSAocmVwbFNlcnZlciBhcyBhbnkpW21ldGhvZF07XG4gIChyZXBsU2VydmVyIGFzIGFueSlbbWV0aG9kXSA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gYXJncy5wb3AoKTtcbiAgICBfb3JpZy5hcHBseShcbiAgICAgIHJlcGxTZXJ2ZXIsXG4gICAgICBhcmdzLmNvbmNhdCgoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhZnRlckZuLmFwcGx5KG51bGwsIGFyZ3MuY29uY2F0KGNhbGxiYWNrKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcbiAgfTtcbiAgcmV0dXJuIHJlcGxTZXJ2ZXI7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgcmVzdWx0IHdhcyBcInByb21pc2VcIiwgcmVzb2x2ZSBpdHMgdmFsdWVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHByb21pc2lmeShcbiAgZXJyOiBFcnJvciB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHZhbHVlOiBhbnksXG4gIGNhbGxiYWNrOiBGdW5jdGlvbixcbikge1xuICAvLyBjYWxsYmFjayBpbW1lZGlhdGVseSBpZiBubyB2YWx1ZSBwYXNzZWRcbiAgaWYgKCFjYWxsYmFjayAmJiBpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIGNhbGxiYWNrID0gdmFsdWU7XG4gICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gIH1cbiAgaWYgKGVycikge1xuICAgIHRocm93IGVycjtcbiAgfVxuICBpZiAoaXNQcm9taXNlTGlrZSh2YWx1ZSkpIHtcbiAgICB2YWx1ZS50aGVuKFxuICAgICAgKHY6IGFueSkgPT4ge1xuICAgICAgICBjYWxsYmFjayhudWxsLCB2KTtcbiAgICAgIH0sXG4gICAgICAoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIH0sXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBjYWxsYmFjayhudWxsLCB2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBPdXRwdXQgb2JqZWN0IHRvIHN0ZG91dCBpbiBKU09OIHJlcHJlc2VudGF0aW9uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBvdXRwdXRUb1N0ZG91dChwcmV0dHlQcmludD86IHN0cmluZyB8IG51bWJlcikge1xuICBpZiAocHJldHR5UHJpbnQgJiYgIWlzTnVtYmVyKHByZXR0eVByaW50KSkge1xuICAgIHByZXR0eVByaW50ID0gNDtcbiAgfVxuICByZXR1cm4gKGVycjogYW55LCB2YWx1ZTogYW55LCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBwcmV0dHlQcmludCk7XG4gICAgICBjb25zb2xlLmxvZyhzdHIpO1xuICAgIH1cbiAgICBjYWxsYmFjayhlcnIsIHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBkZWZpbmUgZ2V0IGFjY2Vzc29yIHVzaW5nIE9iamVjdC5kZWZpbmVQcm9wZXJ0eVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZGVmaW5lUHJvcChvYmo6IE9iamVjdCwgcHJvcDogc3RyaW5nLCBnZXR0ZXI6ICgpID0+IGFueSkge1xuICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgeyBnZXQ6IGdldHRlciB9KTtcbiAgfVxufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXBsIHtcbiAgX2NsaTogQ2xpO1xuICBfaW46IFRyYW5zZm9ybTtcbiAgX291dDogVHJhbnNmb3JtO1xuICBfaW50ZXJhY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xuICBfcGF1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gIF9yZXBsU2VydmVyOiBSRVBMU2VydmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKGNsaTogQ2xpKSB7XG4gICAgdGhpcy5fY2xpID0gY2xpO1xuICAgIHRoaXMuX2luID0gbmV3IFRyYW5zZm9ybSgpO1xuICAgIHRoaXMuX291dCA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICB0aGlzLl9pbi5fdHJhbnNmb3JtID0gKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spID0+IHtcbiAgICAgIGlmICghdGhpcy5fcGF1c2VkKSB7XG4gICAgICAgIHRoaXMuX2luLnB1c2goY2h1bmspO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soKTtcbiAgICB9O1xuICAgIHRoaXMuX291dC5fdHJhbnNmb3JtID0gKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spID0+IHtcbiAgICAgIGlmICghdGhpcy5fcGF1c2VkICYmIHRoaXMuX2ludGVyYWN0aXZlICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLl9vdXQucHVzaChjaHVuayk7XG4gICAgICB9XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXJ0KFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGludGVyYWN0aXZlPzogYm9vbGVhbjtcbiAgICAgIHByZXR0eVByaW50Pzogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgZXZhbFNjcmlwdD86IHN0cmluZztcbiAgICB9ID0ge30sXG4gICkge1xuICAgIHRoaXMuX2ludGVyYWN0aXZlID0gb3B0aW9ucy5pbnRlcmFjdGl2ZSAhPT0gZmFsc2U7XG5cbiAgICBwcm9jZXNzLnN0ZGluLnJlc3VtZSgpO1xuICAgIGlmIChwcm9jZXNzLnN0ZGluLnNldFJhd01vZGUpIHtcbiAgICAgIHByb2Nlc3Muc3RkaW4uc2V0UmF3TW9kZSh0cnVlKTtcbiAgICB9XG4gICAgcHJvY2Vzcy5zdGRpbi5waXBlKHRoaXMuX2luKTtcblxuICAgIHRoaXMuX291dC5waXBlKHByb2Nlc3Muc3Rkb3V0KTtcblxuICAgIGRlZmluZVByb3AodGhpcy5fb3V0LCAnY29sdW1ucycsICgpID0+IHByb2Nlc3Muc3Rkb3V0LmNvbHVtbnMpO1xuXG4gICAgdGhpcy5fcmVwbFNlcnZlciA9IHN0YXJ0UmVwbCh7XG4gICAgICBpbnB1dDogdGhpcy5faW4sXG4gICAgICBvdXRwdXQ6IHRoaXMuX291dCxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVmaW5lQWRkaXRpb25hbENvbW1hbmRzKCk7XG5cbiAgICB0aGlzLl9yZXBsU2VydmVyID0gaW5qZWN0QmVmb3JlKFxuICAgICAgdGhpcy5fcmVwbFNlcnZlcixcbiAgICAgICdjb21wbGV0ZXInLFxuICAgICAgKGxpbmU6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgIHRoaXMuY29tcGxldGUobGluZSlcbiAgICAgICAgICAudGhlbigocmV0cykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV0cyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgKTtcbiAgICB0aGlzLl9yZXBsU2VydmVyID0gaW5qZWN0QWZ0ZXIodGhpcy5fcmVwbFNlcnZlciwgJ2V2YWwnLCBwcm9taXNpZnkpO1xuXG4gICAgaWYgKG9wdGlvbnMuaW50ZXJhY3RpdmUgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLl9yZXBsU2VydmVyID0gaW5qZWN0QWZ0ZXIoXG4gICAgICAgIHRoaXMuX3JlcGxTZXJ2ZXIsXG4gICAgICAgICdldmFsJyxcbiAgICAgICAgb3V0cHV0VG9TdGRvdXQob3B0aW9ucy5wcmV0dHlQcmludCksXG4gICAgICApO1xuICAgICAgdGhpcy5fcmVwbFNlcnZlciA9IGluamVjdEFmdGVyKHRoaXMuX3JlcGxTZXJ2ZXIsICdldmFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBwcm9jZXNzLmV4aXQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLl9yZXBsU2VydmVyLm9uKCdleGl0JywgKCkgPT4gcHJvY2Vzcy5leGl0KCkpO1xuXG4gICAgdGhpcy5fZGVmaW5lQnVpbHRpblZhcnModGhpcy5fcmVwbFNlcnZlci5jb250ZXh0KTtcblxuICAgIGlmIChvcHRpb25zLmV2YWxTY3JpcHQpIHtcbiAgICAgIHRoaXMuX2luLndyaXRlKG9wdGlvbnMuZXZhbFNjcmlwdCArICdcXG4nLCAndXRmLTgnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgX2RlZmluZUFkZGl0aW9uYWxDb21tYW5kcygpIHtcbiAgICBjb25zdCBjbGkgPSB0aGlzLl9jbGk7XG4gICAgY29uc3QgcmVwbFNlcnZlciA9IHRoaXMuX3JlcGxTZXJ2ZXI7XG4gICAgaWYgKCFyZXBsU2VydmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcGxTZXJ2ZXIuZGVmaW5lQ29tbWFuZCgnY29ubmVjdGlvbnMnLCB7XG4gICAgICBoZWxwOiAnTGlzdCBjdXJyZW50eSByZWdpc3RlcmVkIFNhbGVzZm9yY2UgY29ubmVjdGlvbnMnLFxuICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGNsaS5saXN0Q29ubmVjdGlvbnMoKTtcbiAgICAgICAgcmVwbFNlcnZlci5kaXNwbGF5UHJvbXB0KCk7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJlcGxTZXJ2ZXIuZGVmaW5lQ29tbWFuZCgnY29ubmVjdCcsIHtcbiAgICAgIGhlbHA6ICdDb25uZWN0IHRvIFNhbGVzZm9yY2UgaW5zdGFuY2UnLFxuICAgICAgYWN0aW9uOiBhc3luYyAoLi4uYXJnczogc3RyaW5nW10pID0+IHtcbiAgICAgICAgY29uc3QgW25hbWUsIHBhc3N3b3JkXSA9IGFyZ3M7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHBhc3N3b3JkXG4gICAgICAgICAgPyB7IGNvbm5lY3Rpb246IG5hbWUsIHVzZXJuYW1lOiBuYW1lLCBwYXNzd29yZDogcGFzc3dvcmQgfVxuICAgICAgICAgIDogeyBjb25uZWN0aW9uOiBuYW1lLCB1c2VybmFtZTogbmFtZSB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGNsaS5jb25uZWN0KHBhcmFtcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcGxTZXJ2ZXIuZGlzcGxheVByb21wdCgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXBsU2VydmVyLmRlZmluZUNvbW1hbmQoJ2Rpc2Nvbm5lY3QnLCB7XG4gICAgICBoZWxwOiAnRGlzY29ubmVjdCBjb25uZWN0aW9uIGFuZCBlcmFzZSBpdCBmcm9tIHJlZ2lzdHJ5JyxcbiAgICAgIGFjdGlvbjogKG5hbWUpID0+IHtcbiAgICAgICAgY2xpLmRpc2Nvbm5lY3QobmFtZSk7XG4gICAgICAgIHJlcGxTZXJ2ZXIuZGlzcGxheVByb21wdCgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXBsU2VydmVyLmRlZmluZUNvbW1hbmQoJ3VzZScsIHtcbiAgICAgIGhlbHA6ICdTcGVjaWZ5IGxvZ2luIHNlcnZlciB0byBlc3RhYmxpc2ggY29ubmVjdGlvbicsXG4gICAgICBhY3Rpb246IChsb2dpblNlcnZlcikgPT4ge1xuICAgICAgICBjbGkuc2V0TG9naW5TZXJ2ZXIobG9naW5TZXJ2ZXIpO1xuICAgICAgICByZXBsU2VydmVyLmRpc3BsYXlQcm9tcHQoKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgcmVwbFNlcnZlci5kZWZpbmVDb21tYW5kKCdhdXRob3JpemUnLCB7XG4gICAgICBoZWxwOiAnQ29ubmVjdCB0byBTYWxlc2ZvcmNlIHVzaW5nIE9BdXRoMiBhdXRob3JpemF0aW9uIGZsb3cnLFxuICAgICAgYWN0aW9uOiBhc3luYyAoY2xpZW50TmFtZSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGNsaS5hdXRob3JpemUoY2xpZW50TmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcGxTZXJ2ZXIuZGlzcGxheVByb21wdCgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXBsU2VydmVyLmRlZmluZUNvbW1hbmQoJ3JlZ2lzdGVyJywge1xuICAgICAgaGVscDogJ1JlZ2lzdGVyIE9BdXRoMiBjbGllbnQgaW5mb3JtYXRpb24nLFxuICAgICAgYWN0aW9uOiBhc3luYyAoLi4uYXJnczogc3RyaW5nW10pID0+IHtcbiAgICAgICAgY29uc3QgW1xuICAgICAgICAgIGNsaWVudE5hbWUsXG4gICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50U2VjcmV0LFxuICAgICAgICAgIHJlZGlyZWN0VXJpLFxuICAgICAgICAgIGxvZ2luVXJsLFxuICAgICAgICBdID0gYXJncztcbiAgICAgICAgY29uc3QgY29uZmlnID0geyBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCByZWRpcmVjdFVyaSwgbG9naW5VcmwgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBjbGkucmVnaXN0ZXIoY2xpZW50TmFtZSwgY29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVwbFNlcnZlci5kaXNwbGF5UHJvbXB0KCk7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJlcGxTZXJ2ZXIuZGVmaW5lQ29tbWFuZCgnb3BlbicsIHtcbiAgICAgIGhlbHA6ICdPcGVuIFNhbGVzZm9yY2Ugd2ViIHBhZ2UgdXNpbmcgZXN0YWJsaXNoZWQgY29ubmVjdGlvbicsXG4gICAgICBhY3Rpb246ICh1cmwpID0+IHtcbiAgICAgICAgY2xpLm9wZW5VcmxVc2luZ1Nlc3Npb24odXJsKTtcbiAgICAgICAgcmVwbFNlcnZlci5kaXNwbGF5UHJvbXB0KCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBwYXVzZSgpIHtcbiAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xuICAgIGlmIChwcm9jZXNzLnN0ZGluLnNldFJhd01vZGUpIHtcbiAgICAgIHByb2Nlc3Muc3RkaW4uc2V0UmF3TW9kZShmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICByZXN1bWUoKSB7XG4gICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XG4gICAgcHJvY2Vzcy5zdGRpbi5yZXN1bWUoKTtcbiAgICBpZiAocHJvY2Vzcy5zdGRpbi5zZXRSYXdNb2RlKSB7XG4gICAgICBwcm9jZXNzLnN0ZGluLnNldFJhd01vZGUodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBhc3luYyBjb21wbGV0ZShsaW5lOiBzdHJpbmcpIHtcbiAgICBjb25zdCB0b2tlbnMgPSBsaW5lLnJlcGxhY2UoL15cXHMrLywgJycpLnNwbGl0KC9cXHMrLyk7XG4gICAgY29uc3QgW2NvbW1hbmQsIGtleXdvcmQgPSAnJ10gPSB0b2tlbnM7XG4gICAgaWYgKGNvbW1hbmRbMF0gPT09ICcuJyAmJiB0b2tlbnMubGVuZ3RoID09PSAyKSB7XG4gICAgICBsZXQgY2FuZGlkYXRlczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmIChjb21tYW5kID09PSAnLmNvbm5lY3QnIHx8IGNvbW1hbmQgPT09ICcuZGlzY29ubmVjdCcpIHtcbiAgICAgICAgY2FuZGlkYXRlcyA9IGF3YWl0IHRoaXMuX2NsaS5nZXRDb25uZWN0aW9uTmFtZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJy5hdXRob3JpemUnKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMgPSBhd2FpdCB0aGlzLl9jbGkuZ2V0Q2xpZW50TmFtZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJy51c2UnKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMgPSBbJ3Byb2R1Y3Rpb24nLCAnc2FuZGJveCddO1xuICAgICAgfVxuICAgICAgY2FuZGlkYXRlcyA9IGNhbmRpZGF0ZXMuZmlsdGVyKChuYW1lKSA9PiBuYW1lLmluZGV4T2Yoa2V5d29yZCkgPT09IDApO1xuICAgICAgcmV0dXJuIFtjYW5kaWRhdGVzLCBrZXl3b3JkXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFwIGFsbCBqc2ZvcmNlIG9iamVjdCB0byBSRVBMIGNvbnRleHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kZWZpbmVCdWlsdGluVmFycyhjb250ZXh0OiB7IFt2YXJOYW1lOiBzdHJpbmddOiBhbnkgfSkge1xuICAgIGNvbnN0IGNsaSA9IHRoaXMuX2NsaTtcblxuICAgIC8vIGRlZmluZSBzYWxlc2ZvcmNlIHBhY2thZ2Ugcm9vdCBvYmplY3RzXG4gICAgZm9yIChjb25zdCBrZXkgaW4ganNmb3JjZSkge1xuICAgICAgaWYgKFxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoanNmb3JjZSwga2V5KSAmJlxuICAgICAgICAhKGdsb2JhbCBhcyBhbnkpW2tleV1cbiAgICAgICkge1xuICAgICAgICBjb250ZXh0W2tleV0gPSAoanNmb3JjZSBhcyBhbnkpW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGV4cG9zZSBqc2ZvcmNlIHBhY2thZ2Ugcm9vdCBvYmplY3QgaW4gY29udGV4dC5cbiAgICBjb250ZXh0LmpzZm9yY2UgPSBqc2ZvcmNlO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHJveHlGdW5jKHByb3A6IHN0cmluZykge1xuICAgICAgcmV0dXJuICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICBjb25zdCBjb25uID0gY2xpLmdldEN1cnJlbnRDb25uZWN0aW9uKCk7XG4gICAgICAgIHJldHVybiAoY29ubiBhcyBhbnkpW3Byb3BdKC4uLmFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQcm94eUFjY2Vzc29yKHByb3A6IHN0cmluZykge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY29uc3QgY29ubiA9IGNsaS5nZXRDdXJyZW50Q29ubmVjdGlvbigpO1xuICAgICAgICByZXR1cm4gKGNvbm4gYXMgYW55KVtwcm9wXTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgY29ubiA9IGNsaS5nZXRDdXJyZW50Q29ubmVjdGlvbigpO1xuICAgIC8vIGxpc3QgYWxsIHByb3BzIGluIGNvbm5lY3Rpb24gaW5zdGFuY2UsIG90aGVyIHRoYW4gRXZlbnRFbWl0dGVyIG9yIG9iamVjdCBidWlsdC1pbiBtZXRob2RzXG4gICAgY29uc3QgcHJvcHM6IHsgW3Byb3A6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuICAgIGxldCBvOiBvYmplY3QgPSBjb25uO1xuICAgIHdoaWxlIChvICYmIG8gIT09IEV2ZW50RW1pdHRlci5wcm90b3R5cGUgJiYgbyAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgZm9yIChjb25zdCBwIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG8pKSB7XG4gICAgICAgIGlmIChwICE9PSAnY29uc3RydWN0b3InKSB7XG4gICAgICAgICAgcHJvcHNbcF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMocHJvcHMpKSB7XG4gICAgICBpZiAodHlwZW9mIChnbG9iYWwgYXMgYW55KVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gYXZvaWQgZ2xvYmFsIG92ZXJyaWRlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3AuaW5kZXhPZignXycpID09PSAwKSB7XG4gICAgICAgIC8vIGlnbm9yZSBwcml2YXRlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzRnVuY3Rpb24oKGNvbm4gYXMgYW55KVtwcm9wXSkpIHtcbiAgICAgICAgY29udGV4dFtwcm9wXSA9IGNyZWF0ZVByb3h5RnVuYyhwcm9wKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoKGNvbm4gYXMgYW55KVtwcm9wXSkpIHtcbiAgICAgICAgZGVmaW5lUHJvcChjb250ZXh0LCBwcm9wLCBjcmVhdGVQcm94eUFjY2Vzc29yKHByb3ApKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBleHBvc2UgZGVmYXVsdCBjb25uZWN0aW9uIGFzIFwiJGNvbm5cIlxuICAgIGRlZmluZVByb3AoY29udGV4dCwgJyRjb25uJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIGNsaS5nZXRDdXJyZW50Q29ubmVjdGlvbigpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlcGw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQSxZQUFZLFFBQVEsUUFBUTtBQUNyQyxTQUFxQkMsS0FBSyxJQUFJQyxTQUFTLFFBQVEsTUFBTTtBQUNyRCxTQUFTQyxTQUFTLFFBQVEsUUFBUTtBQUNsQyxPQUFPQyxPQUFPLE1BQU0sSUFBSTtBQUN4QixTQUNFQyxhQUFhLEVBQ2JDLFFBQVEsRUFDUkMsVUFBVSxFQUNWQyxRQUFRLFFBQ0gsa0JBQWtCO0FBR3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsWUFBWUEsQ0FDbkJDLFVBQXNCLEVBQ3RCQyxNQUFjLEVBQ2RDLFFBQWtCLEVBQ2xCO0VBQ0EsTUFBTUMsS0FBZSxHQUFJSCxVQUFVLENBQVNDLE1BQU0sQ0FBQztFQUNsREQsVUFBVSxDQUFTQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUdHLElBQVcsS0FBSztJQUNoRCxNQUFNQyxRQUFRLEdBQUdELElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUM7SUFDM0JKLFFBQVEsQ0FBQ0ssS0FBSyxDQUNaLElBQUksRUFDSkMsdUJBQUEsQ0FBQUosSUFBSSxFQUFBSyxJQUFBLENBQUpMLElBQUksRUFBUSxDQUFDTSxHQUFRLEVBQUVDLEdBQVEsS0FBSztNQUNsQyxJQUFJRCxHQUFHLElBQUlDLEdBQUcsRUFBRTtRQUNkTixRQUFRLENBQUNLLEdBQUcsRUFBRUMsR0FBRyxDQUFDO01BQ3BCLENBQUMsTUFBTTtRQUNMUixLQUFLLENBQUNJLEtBQUssQ0FBQ1AsVUFBVSxFQUFFUSx1QkFBQSxDQUFBSixJQUFJLEVBQUFLLElBQUEsQ0FBSkwsSUFBSSxFQUFRQyxRQUFRLENBQUMsQ0FBQztNQUNoRDtJQUNGLENBQUMsQ0FDSCxDQUFDO0VBQ0gsQ0FBQztFQUNELE9BQU9MLFVBQVU7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBU1ksV0FBV0EsQ0FDbEJaLFVBQXNCLEVBQ3RCQyxNQUFjLEVBQ2RZLE9BQWlCLEVBQ2pCO0VBQ0EsTUFBTVYsS0FBZSxHQUFJSCxVQUFVLENBQVNDLE1BQU0sQ0FBQztFQUNsREQsVUFBVSxDQUFTQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUdHLElBQVcsS0FBSztJQUNoRCxNQUFNQyxRQUFRLEdBQUdELElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUM7SUFDM0JILEtBQUssQ0FBQ0ksS0FBSyxDQUNUUCxVQUFVLEVBQ1ZRLHVCQUFBLENBQUFKLElBQUksRUFBQUssSUFBQSxDQUFKTCxJQUFJLEVBQVEsQ0FBQyxHQUFHQSxJQUFXLEtBQUs7TUFDOUIsSUFBSTtRQUNGUyxPQUFPLENBQUNOLEtBQUssQ0FBQyxJQUFJLEVBQUVDLHVCQUFBLENBQUFKLElBQUksRUFBQUssSUFBQSxDQUFKTCxJQUFJLEVBQVFDLFFBQVEsQ0FBQyxDQUFDO01BQzVDLENBQUMsQ0FBQyxPQUFPUyxDQUFDLEVBQUU7UUFDVlQsUUFBUSxDQUFDUyxDQUFDLENBQUM7TUFDYjtJQUNGLENBQUMsQ0FDSCxDQUFDO0VBQ0gsQ0FBQztFQUNELE9BQU9kLFVBQVU7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTZSxTQUFTQSxDQUNoQkwsR0FBNkIsRUFDN0JNLEtBQVUsRUFDVlgsUUFBa0IsRUFDbEI7RUFDQTtFQUNBLElBQUksQ0FBQ0EsUUFBUSxJQUFJUixVQUFVLENBQUNtQixLQUFLLENBQUMsRUFBRTtJQUNsQ1gsUUFBUSxHQUFHVyxLQUFLO0lBQ2hCLE9BQU9YLFFBQVEsQ0FBQyxDQUFDO0VBQ25CO0VBQ0EsSUFBSUssR0FBRyxFQUFFO0lBQ1AsTUFBTUEsR0FBRztFQUNYO0VBQ0EsSUFBSWYsYUFBYSxDQUFDcUIsS0FBSyxDQUFDLEVBQUU7SUFDeEJBLEtBQUssQ0FBQ0MsSUFBSSxDQUNQQyxDQUFNLElBQUs7TUFDVmIsUUFBUSxDQUFDLElBQUksRUFBRWEsQ0FBQyxDQUFDO0lBQ25CLENBQUMsRUFDQVIsR0FBUSxJQUFLO01BQ1pMLFFBQVEsQ0FBQ0ssR0FBRyxDQUFDO0lBQ2YsQ0FDRixDQUFDO0VBQ0gsQ0FBQyxNQUFNO0lBQ0xMLFFBQVEsQ0FBQyxJQUFJLEVBQUVXLEtBQUssQ0FBQztFQUN2QjtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0csY0FBY0EsQ0FBQ0MsV0FBNkIsRUFBRTtFQUNyRCxJQUFJQSxXQUFXLElBQUksQ0FBQ3hCLFFBQVEsQ0FBQ3dCLFdBQVcsQ0FBQyxFQUFFO0lBQ3pDQSxXQUFXLEdBQUcsQ0FBQztFQUNqQjtFQUNBLE9BQU8sQ0FBQ1YsR0FBUSxFQUFFTSxLQUFVLEVBQUVYLFFBQWtCLEtBQUs7SUFDbkQsSUFBSUssR0FBRyxFQUFFO01BQ1BXLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDWixHQUFHLENBQUM7SUFDcEIsQ0FBQyxNQUFNO01BQ0wsTUFBTWEsR0FBRyxHQUFHQyxlQUFBLENBQWVSLEtBQUssRUFBRSxJQUFJLEVBQUVJLFdBQVcsQ0FBQztNQUNwREMsT0FBTyxDQUFDSSxHQUFHLENBQUNGLEdBQUcsQ0FBQztJQUNsQjtJQUNBbEIsUUFBUSxDQUFDSyxHQUFHLEVBQUVNLEtBQUssQ0FBQztFQUN0QixDQUFDO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTVSxVQUFVQSxDQUFDQyxHQUFXLEVBQUVDLElBQVksRUFBRUMsTUFBaUIsRUFBRTtFQUNoRSxJQUFBQyxzQkFBQSxFQUEyQjtJQUN6QkEsc0JBQUEsQ0FBc0JILEdBQUcsRUFBRUMsSUFBSSxFQUFFO01BQUVHLEdBQUcsRUFBRUY7SUFBTyxDQUFDLENBQUM7RUFDbkQ7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLE1BQU1HLElBQUksQ0FBQztFQVFoQkMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFO0lBQUFDLGVBQUE7SUFBQUEsZUFBQTtJQUFBQSxlQUFBO0lBQUFBLGVBQUEsdUJBSkUsSUFBSTtJQUFBQSxlQUFBLGtCQUNULEtBQUs7SUFBQUEsZUFBQSxzQkFDY0MsU0FBUztJQUc3QyxJQUFJLENBQUNDLElBQUksR0FBR0gsR0FBRztJQUNmLElBQUksQ0FBQ0ksR0FBRyxHQUFHLElBQUk3QyxTQUFTLENBQUMsQ0FBQztJQUMxQixJQUFJLENBQUM4QyxJQUFJLEdBQUcsSUFBSTlDLFNBQVMsQ0FBQyxDQUFDO0lBQzNCLElBQUksQ0FBQzZDLEdBQUcsQ0FBQ0UsVUFBVSxHQUFHLENBQUNDLEtBQUssRUFBRUMsUUFBUSxFQUFFckMsUUFBUSxLQUFLO01BQ25ELElBQUksQ0FBQyxJQUFJLENBQUNzQyxPQUFPLEVBQUU7UUFDakIsSUFBSSxDQUFDTCxHQUFHLENBQUNNLElBQUksQ0FBQ0gsS0FBSyxDQUFDO01BQ3RCO01BQ0FwQyxRQUFRLENBQUMsQ0FBQztJQUNaLENBQUM7SUFDRCxJQUFJLENBQUNrQyxJQUFJLENBQUNDLFVBQVUsR0FBRyxDQUFDQyxLQUFLLEVBQUVDLFFBQVEsRUFBRXJDLFFBQVEsS0FBSztNQUNwRCxJQUFJLENBQUMsSUFBSSxDQUFDc0MsT0FBTyxJQUFJLElBQUksQ0FBQ0UsWUFBWSxLQUFLLEtBQUssRUFBRTtRQUNoRCxJQUFJLENBQUNOLElBQUksQ0FBQ0ssSUFBSSxDQUFDSCxLQUFLLENBQUM7TUFDdkI7TUFDQXBDLFFBQVEsQ0FBQyxDQUFDO0lBQ1osQ0FBQztFQUNIOztFQUVBO0FBQ0Y7QUFDQTtFQUNFZCxLQUFLQSxDQUNIdUQsT0FJQyxHQUFHLENBQUMsQ0FBQyxFQUNOO0lBQ0EsSUFBSSxDQUFDRCxZQUFZLEdBQUdDLE9BQU8sQ0FBQ0MsV0FBVyxLQUFLLEtBQUs7SUFFakRDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDQyxNQUFNLENBQUMsQ0FBQztJQUN0QixJQUFJRixPQUFPLENBQUNDLEtBQUssQ0FBQ0UsVUFBVSxFQUFFO01BQzVCSCxPQUFPLENBQUNDLEtBQUssQ0FBQ0UsVUFBVSxDQUFDLElBQUksQ0FBQztJQUNoQztJQUNBSCxPQUFPLENBQUNDLEtBQUssQ0FBQ0csSUFBSSxDQUFDLElBQUksQ0FBQ2QsR0FBRyxDQUFDO0lBRTVCLElBQUksQ0FBQ0MsSUFBSSxDQUFDYSxJQUFJLENBQUNKLE9BQU8sQ0FBQ0ssTUFBTSxDQUFDO0lBRTlCM0IsVUFBVSxDQUFDLElBQUksQ0FBQ2EsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNUyxPQUFPLENBQUNLLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDO0lBRTlELElBQUksQ0FBQ0MsV0FBVyxHQUFHL0QsU0FBUyxDQUFDO01BQzNCZ0UsS0FBSyxFQUFFLElBQUksQ0FBQ2xCLEdBQUc7TUFDZm1CLE1BQU0sRUFBRSxJQUFJLENBQUNsQixJQUFJO01BQ2pCbUIsUUFBUSxFQUFFO0lBQ1osQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDQyx5QkFBeUIsQ0FBQyxDQUFDO0lBRWhDLElBQUksQ0FBQ0osV0FBVyxHQUFHeEQsWUFBWSxDQUM3QixJQUFJLENBQUN3RCxXQUFXLEVBQ2hCLFdBQVcsRUFDWCxDQUFDSyxJQUFZLEVBQUV2RCxRQUFrQixLQUFLO01BQ3BDLElBQUksQ0FBQ3dELFFBQVEsQ0FBQ0QsSUFBSSxDQUFDLENBQ2hCM0MsSUFBSSxDQUFFNkMsSUFBSSxJQUFLO1FBQ2R6RCxRQUFRLENBQUMsSUFBSSxFQUFFeUQsSUFBSSxDQUFDO01BQ3RCLENBQUMsQ0FBQyxDQUNEQyxLQUFLLENBQUVyRCxHQUFHLElBQUs7UUFDZEwsUUFBUSxDQUFDSyxHQUFHLENBQUM7TUFDZixDQUFDLENBQUM7SUFDTixDQUNGLENBQUM7SUFDRCxJQUFJLENBQUM2QyxXQUFXLEdBQUczQyxXQUFXLENBQUMsSUFBSSxDQUFDMkMsV0FBVyxFQUFFLE1BQU0sRUFBRXhDLFNBQVMsQ0FBQztJQUVuRSxJQUFJK0IsT0FBTyxDQUFDQyxXQUFXLEtBQUssS0FBSyxFQUFFO01BQ2pDLElBQUksQ0FBQ1EsV0FBVyxHQUFHM0MsV0FBVyxDQUM1QixJQUFJLENBQUMyQyxXQUFXLEVBQ2hCLE1BQU0sRUFDTnBDLGNBQWMsQ0FBQzJCLE9BQU8sQ0FBQzFCLFdBQVcsQ0FDcEMsQ0FBQztNQUNELElBQUksQ0FBQ21DLFdBQVcsR0FBRzNDLFdBQVcsQ0FBQyxJQUFJLENBQUMyQyxXQUFXLEVBQUUsTUFBTSxFQUFFLFlBQVk7UUFDbkVQLE9BQU8sQ0FBQ2dCLElBQUksQ0FBQyxDQUFDO01BQ2hCLENBQUMsQ0FBQztJQUNKO0lBQ0EsSUFBSSxDQUFDVCxXQUFXLENBQUNVLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTWpCLE9BQU8sQ0FBQ2dCLElBQUksQ0FBQyxDQUFDLENBQUM7SUFFakQsSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQyxJQUFJLENBQUNYLFdBQVcsQ0FBQ1ksT0FBTyxDQUFDO0lBRWpELElBQUlyQixPQUFPLENBQUNzQixVQUFVLEVBQUU7TUFDdEIsSUFBSSxDQUFDOUIsR0FBRyxDQUFDK0IsS0FBSyxDQUFDdkIsT0FBTyxDQUFDc0IsVUFBVSxHQUFHLElBQUksRUFBRSxPQUFPLENBQUM7SUFDcEQ7SUFFQSxPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7RUFDRVQseUJBQXlCQSxDQUFBLEVBQUc7SUFDMUIsTUFBTXpCLEdBQUcsR0FBRyxJQUFJLENBQUNHLElBQUk7SUFDckIsTUFBTXJDLFVBQVUsR0FBRyxJQUFJLENBQUN1RCxXQUFXO0lBQ25DLElBQUksQ0FBQ3ZELFVBQVUsRUFBRTtNQUNmO0lBQ0Y7SUFDQUEsVUFBVSxDQUFDc0UsYUFBYSxDQUFDLGFBQWEsRUFBRTtNQUN0Q0MsSUFBSSxFQUFFLGlEQUFpRDtNQUN2REMsTUFBTSxFQUFFLE1BQUFBLENBQUEsS0FBWTtRQUNsQixNQUFNdEMsR0FBRyxDQUFDdUMsZUFBZSxDQUFDLENBQUM7UUFDM0J6RSxVQUFVLENBQUMwRSxhQUFhLENBQUMsQ0FBQztNQUM1QjtJQUNGLENBQUMsQ0FBQztJQUNGMUUsVUFBVSxDQUFDc0UsYUFBYSxDQUFDLFNBQVMsRUFBRTtNQUNsQ0MsSUFBSSxFQUFFLGdDQUFnQztNQUN0Q0MsTUFBTSxFQUFFLE1BQUFBLENBQU8sR0FBR3BFLElBQWMsS0FBSztRQUNuQyxNQUFNLENBQUN1RSxJQUFJLEVBQUVDLFFBQVEsQ0FBQyxHQUFHeEUsSUFBSTtRQUM3QixNQUFNeUUsTUFBTSxHQUFHRCxRQUFRLEdBQ25CO1VBQUVFLFVBQVUsRUFBRUgsSUFBSTtVQUFFSSxRQUFRLEVBQUVKLElBQUk7VUFBRUMsUUFBUSxFQUFFQTtRQUFTLENBQUMsR0FDeEQ7VUFBRUUsVUFBVSxFQUFFSCxJQUFJO1VBQUVJLFFBQVEsRUFBRUo7UUFBSyxDQUFDO1FBQ3hDLElBQUk7VUFDRixNQUFNekMsR0FBRyxDQUFDOEMsT0FBTyxDQUFDSCxNQUFNLENBQUM7UUFDM0IsQ0FBQyxDQUFDLE9BQU9uRSxHQUFHLEVBQUU7VUFDWixJQUFJQSxHQUFHLFlBQVl1RSxLQUFLLEVBQUU7WUFDeEI1RCxPQUFPLENBQUNDLEtBQUssQ0FBQ1osR0FBRyxDQUFDd0UsT0FBTyxDQUFDO1VBQzVCO1FBQ0Y7UUFDQWxGLFVBQVUsQ0FBQzBFLGFBQWEsQ0FBQyxDQUFDO01BQzVCO0lBQ0YsQ0FBQyxDQUFDO0lBQ0YxRSxVQUFVLENBQUNzRSxhQUFhLENBQUMsWUFBWSxFQUFFO01BQ3JDQyxJQUFJLEVBQUUsa0RBQWtEO01BQ3hEQyxNQUFNLEVBQUdHLElBQUksSUFBSztRQUNoQnpDLEdBQUcsQ0FBQ2lELFVBQVUsQ0FBQ1IsSUFBSSxDQUFDO1FBQ3BCM0UsVUFBVSxDQUFDMEUsYUFBYSxDQUFDLENBQUM7TUFDNUI7SUFDRixDQUFDLENBQUM7SUFDRjFFLFVBQVUsQ0FBQ3NFLGFBQWEsQ0FBQyxLQUFLLEVBQUU7TUFDOUJDLElBQUksRUFBRSw4Q0FBOEM7TUFDcERDLE1BQU0sRUFBR1ksV0FBVyxJQUFLO1FBQ3ZCbEQsR0FBRyxDQUFDbUQsY0FBYyxDQUFDRCxXQUFXLENBQUM7UUFDL0JwRixVQUFVLENBQUMwRSxhQUFhLENBQUMsQ0FBQztNQUM1QjtJQUNGLENBQUMsQ0FBQztJQUNGMUUsVUFBVSxDQUFDc0UsYUFBYSxDQUFDLFdBQVcsRUFBRTtNQUNwQ0MsSUFBSSxFQUFFLHVEQUF1RDtNQUM3REMsTUFBTSxFQUFFLE1BQU9jLFVBQVUsSUFBSztRQUM1QixJQUFJO1VBQ0YsTUFBTXBELEdBQUcsQ0FBQ3FELFNBQVMsQ0FBQ0QsVUFBVSxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxPQUFPNUUsR0FBRyxFQUFFO1VBQ1osSUFBSUEsR0FBRyxZQUFZdUUsS0FBSyxFQUFFO1lBQ3hCNUQsT0FBTyxDQUFDQyxLQUFLLENBQUNaLEdBQUcsQ0FBQ3dFLE9BQU8sQ0FBQztVQUM1QjtRQUNGO1FBQ0FsRixVQUFVLENBQUMwRSxhQUFhLENBQUMsQ0FBQztNQUM1QjtJQUNGLENBQUMsQ0FBQztJQUNGMUUsVUFBVSxDQUFDc0UsYUFBYSxDQUFDLFVBQVUsRUFBRTtNQUNuQ0MsSUFBSSxFQUFFLG9DQUFvQztNQUMxQ0MsTUFBTSxFQUFFLE1BQUFBLENBQU8sR0FBR3BFLElBQWMsS0FBSztRQUNuQyxNQUFNLENBQ0prRixVQUFVLEVBQ1ZFLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxXQUFXLEVBQ1hDLFFBQVEsQ0FDVCxHQUFHdkYsSUFBSTtRQUNSLE1BQU13RixNQUFNLEdBQUc7VUFBRUosUUFBUTtVQUFFQyxZQUFZO1VBQUVDLFdBQVc7VUFBRUM7UUFBUyxDQUFDO1FBQ2hFLElBQUk7VUFDRixNQUFNekQsR0FBRyxDQUFDMkQsUUFBUSxDQUFDUCxVQUFVLEVBQUVNLE1BQU0sQ0FBQztRQUN4QyxDQUFDLENBQUMsT0FBT2xGLEdBQUcsRUFBRTtVQUNaLElBQUlBLEdBQUcsWUFBWXVFLEtBQUssRUFBRTtZQUN4QjVELE9BQU8sQ0FBQ0MsS0FBSyxDQUFDWixHQUFHLENBQUN3RSxPQUFPLENBQUM7VUFDNUI7UUFDRjtRQUNBbEYsVUFBVSxDQUFDMEUsYUFBYSxDQUFDLENBQUM7TUFDNUI7SUFDRixDQUFDLENBQUM7SUFDRjFFLFVBQVUsQ0FBQ3NFLGFBQWEsQ0FBQyxNQUFNLEVBQUU7TUFDL0JDLElBQUksRUFBRSx1REFBdUQ7TUFDN0RDLE1BQU0sRUFBR3NCLEdBQUcsSUFBSztRQUNmNUQsR0FBRyxDQUFDNkQsbUJBQW1CLENBQUNELEdBQUcsQ0FBQztRQUM1QjlGLFVBQVUsQ0FBQzBFLGFBQWEsQ0FBQyxDQUFDO01BQzVCO0lBQ0YsQ0FBQyxDQUFDO0VBQ0o7O0VBRUE7QUFDRjtBQUNBO0VBQ0VzQixLQUFLQSxDQUFBLEVBQUc7SUFDTixJQUFJLENBQUNyRCxPQUFPLEdBQUcsSUFBSTtJQUNuQixJQUFJSyxPQUFPLENBQUNDLEtBQUssQ0FBQ0UsVUFBVSxFQUFFO01BQzVCSCxPQUFPLENBQUNDLEtBQUssQ0FBQ0UsVUFBVSxDQUFDLEtBQUssQ0FBQztJQUNqQztFQUNGOztFQUVBO0FBQ0Y7QUFDQTtFQUNFRCxNQUFNQSxDQUFBLEVBQUc7SUFDUCxJQUFJLENBQUNQLE9BQU8sR0FBRyxLQUFLO0lBQ3BCSyxPQUFPLENBQUNDLEtBQUssQ0FBQ0MsTUFBTSxDQUFDLENBQUM7SUFDdEIsSUFBSUYsT0FBTyxDQUFDQyxLQUFLLENBQUNFLFVBQVUsRUFBRTtNQUM1QkgsT0FBTyxDQUFDQyxLQUFLLENBQUNFLFVBQVUsQ0FBQyxJQUFJLENBQUM7SUFDaEM7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7RUFDRSxNQUFNVSxRQUFRQSxDQUFDRCxJQUFZLEVBQUU7SUFDM0IsTUFBTXFDLE1BQU0sR0FBR3JDLElBQUksQ0FBQ3NDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUNDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDcEQsTUFBTSxDQUFDQyxPQUFPLEVBQUVDLE9BQU8sR0FBRyxFQUFFLENBQUMsR0FBR0osTUFBTTtJQUN0QyxJQUFJRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJSCxNQUFNLENBQUNLLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDN0MsSUFBSUMsVUFBb0IsR0FBRyxFQUFFO01BQzdCLElBQUlILE9BQU8sS0FBSyxVQUFVLElBQUlBLE9BQU8sS0FBSyxhQUFhLEVBQUU7UUFDdkRHLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQ2xFLElBQUksQ0FBQ21FLGtCQUFrQixDQUFDLENBQUM7TUFDbkQsQ0FBQyxNQUFNLElBQUlKLE9BQU8sS0FBSyxZQUFZLEVBQUU7UUFDbkNHLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQ2xFLElBQUksQ0FBQ29FLGNBQWMsQ0FBQyxDQUFDO01BQy9DLENBQUMsTUFBTSxJQUFJTCxPQUFPLEtBQUssTUFBTSxFQUFFO1FBQzdCRyxVQUFVLEdBQUcsQ0FBQyxZQUFZLEVBQUUsU0FBUyxDQUFDO01BQ3hDO01BQ0FBLFVBQVUsR0FBR0csdUJBQUEsQ0FBQUgsVUFBVSxFQUFBOUYsSUFBQSxDQUFWOEYsVUFBVSxFQUFTNUIsSUFBSSxJQUFLZ0Msd0JBQUEsQ0FBQWhDLElBQUksRUFBQWxFLElBQUEsQ0FBSmtFLElBQUksRUFBUzBCLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztNQUNyRSxPQUFPLENBQUNFLFVBQVUsRUFBRUYsT0FBTyxDQUFDO0lBQzlCO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDRW5DLGtCQUFrQkEsQ0FBQ0MsT0FBbUMsRUFBRTtJQUN0RCxNQUFNakMsR0FBRyxHQUFHLElBQUksQ0FBQ0csSUFBSTs7SUFFckI7SUFDQSxLQUFLLE1BQU11RSxHQUFHLElBQUlsSCxPQUFPLEVBQUU7TUFDekIsSUFDRW1ILE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxjQUFjLENBQUN0RyxJQUFJLENBQUNmLE9BQU8sRUFBRWtILEdBQUcsQ0FBQyxJQUNsRCxDQUFFSSxNQUFNLENBQVNKLEdBQUcsQ0FBQyxFQUNyQjtRQUNBekMsT0FBTyxDQUFDeUMsR0FBRyxDQUFDLEdBQUlsSCxPQUFPLENBQVNrSCxHQUFHLENBQUM7TUFDdEM7SUFDRjtJQUNBO0lBQ0F6QyxPQUFPLENBQUN6RSxPQUFPLEdBQUdBLE9BQU87SUFFekIsU0FBU3VILGVBQWVBLENBQUNyRixJQUFZLEVBQUU7TUFDckMsT0FBTyxDQUFDLEdBQUd4QixJQUFXLEtBQUs7UUFDekIsTUFBTThHLElBQUksR0FBR2hGLEdBQUcsQ0FBQ2lGLG9CQUFvQixDQUFDLENBQUM7UUFDdkMsT0FBUUQsSUFBSSxDQUFTdEYsSUFBSSxDQUFDLENBQUMsR0FBR3hCLElBQUksQ0FBQztNQUNyQyxDQUFDO0lBQ0g7SUFFQSxTQUFTZ0gsbUJBQW1CQSxDQUFDeEYsSUFBWSxFQUFFO01BQ3pDLE9BQU8sTUFBTTtRQUNYLE1BQU1zRixJQUFJLEdBQUdoRixHQUFHLENBQUNpRixvQkFBb0IsQ0FBQyxDQUFDO1FBQ3ZDLE9BQVFELElBQUksQ0FBU3RGLElBQUksQ0FBQztNQUM1QixDQUFDO0lBQ0g7SUFFQSxNQUFNc0YsSUFBSSxHQUFHaEYsR0FBRyxDQUFDaUYsb0JBQW9CLENBQUMsQ0FBQztJQUN2QztJQUNBLE1BQU1FLEtBQWtDLEdBQUcsQ0FBQyxDQUFDO0lBQzdDLElBQUlDLENBQVMsR0FBR0osSUFBSTtJQUNwQixPQUFPSSxDQUFDLElBQUlBLENBQUMsS0FBS2hJLFlBQVksQ0FBQ3dILFNBQVMsSUFBSVEsQ0FBQyxLQUFLVCxNQUFNLENBQUNDLFNBQVMsRUFBRTtNQUNsRSxLQUFLLE1BQU1TLENBQUMsSUFBSUMsMkJBQUEsQ0FBMkJGLENBQUMsQ0FBQyxFQUFFO1FBQzdDLElBQUlDLENBQUMsS0FBSyxhQUFhLEVBQUU7VUFDdkJGLEtBQUssQ0FBQ0UsQ0FBQyxDQUFDLEdBQUcsSUFBSTtRQUNqQjtNQUNGO01BQ0FELENBQUMsR0FBR0csc0JBQUEsQ0FBc0JILENBQUMsQ0FBQztJQUM5QjtJQUNBLEtBQUssTUFBTTFGLElBQUksSUFBSThGLFlBQUEsQ0FBWUwsS0FBSyxDQUFDLEVBQUU7TUFDckMsSUFBSSxPQUFRTCxNQUFNLENBQVNwRixJQUFJLENBQUMsS0FBSyxXQUFXLEVBQUU7UUFDaEQ7UUFDQTtNQUNGO01BQ0EsSUFBSStFLHdCQUFBLENBQUEvRSxJQUFJLEVBQUFuQixJQUFBLENBQUptQixJQUFJLEVBQVMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQzNCO1FBQ0E7TUFDRjtNQUNBLElBQUkvQixVQUFVLENBQUVxSCxJQUFJLENBQVN0RixJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQ25DdUMsT0FBTyxDQUFDdkMsSUFBSSxDQUFDLEdBQUdxRixlQUFlLENBQUNyRixJQUFJLENBQUM7TUFDdkMsQ0FBQyxNQUFNLElBQUk5QixRQUFRLENBQUVvSCxJQUFJLENBQVN0RixJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQ3hDRixVQUFVLENBQUN5QyxPQUFPLEVBQUV2QyxJQUFJLEVBQUV3RixtQkFBbUIsQ0FBQ3hGLElBQUksQ0FBQyxDQUFDO01BQ3REO0lBQ0Y7O0lBRUE7SUFDQUYsVUFBVSxDQUFDeUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNO01BQ2pDLE9BQU9qQyxHQUFHLENBQUNpRixvQkFBb0IsQ0FBQyxDQUFDO0lBQ25DLENBQUMsQ0FBQztFQUNKO0FBQ0Y7QUFFQSxlQUFlbkYsSUFBSSJ9