"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");
var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");
require("core-js/modules/es.array.iterator");
_Object$defineProperty(exports, "__esModule", {
  value: true
});
exports.getLogger = getLogger;
exports.Logger = exports.LogLevels = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime-corejs3/helpers/defineProperty"));
/**
 *
 */
const LogLevels = {
  DEBUG: 1,
  INFO: 2,
  WARN: 3,
  ERROR: 4,
  FATAL: 5,
  NONE: 6
};
exports.LogLevels = LogLevels;
const LogLevelLabels = ['', 'DEBUG', 'INFO', 'WARN', 'ERROR', 'FATAL', 'NONE'];
const globalLogLevelConfig = (() => {
  const globalLogLevelStr = process.env.JSFORCE_LOG_LEVEL || global.__JSFORCE_LOG_LEVEL__ || 'NONE';
  if (/^(DEBUG|INFO|WARN|ERROR|FATAL|NONE)$/i.test(globalLogLevelStr)) {
    return {
      '*': globalLogLevelStr
    };
  }
  try {
    return JSON.parse(globalLogLevelStr);
  } catch (e) {
    return {
      '*': 'NONE'
    };
  }
})();
function getModuleLogLevel(logLevelConfig, moduleName) {
  const logLevel = logLevelConfig[moduleName] || logLevelConfig['*'];
  return typeof logLevel === 'number' ? logLevel : LogLevels[logLevel] || LogLevels.NONE;
}

/**
 *
 */
class Logger {
  constructor(moduleName, logLevelConfig = globalLogLevelConfig) {
    (0, _defineProperty2.default)(this, "_moduleName", void 0);
    (0, _defineProperty2.default)(this, "_logLevel", void 0);
    this._moduleName = moduleName;
    this._logLevel = typeof logLevelConfig === 'number' ? logLevelConfig : typeof logLevelConfig === 'string' ? LogLevels[logLevelConfig] || LogLevels.NONE : getModuleLogLevel(logLevelConfig, moduleName);
  }
  createInstance(logLevelConfig = this._logLevel) {
    return new Logger(this._moduleName, logLevelConfig);
  }
  setLogLevel(logLevel) {
    if (typeof logLevel === 'string') {
      this._logLevel = LogLevels[logLevel] || LogLevels.NONE;
    } else {
      this._logLevel = logLevel;
    }
  }
  log(logLevel, ...messages) {
    if (this._logLevel <= logLevel) {
      const msgs = [`${LogLevelLabels[logLevel]}\t[${this._moduleName}] `, ...messages];
      if (logLevel < LogLevels.ERROR) {
        console.log(...msgs); // eslint-disable-line no-console
      } else {
        console.error(...msgs); // eslint-disable-line no-console
      }
    }
  }

  debug(...messages) {
    this.log(LogLevels.DEBUG, ...messages);
  }
  info(...messages) {
    this.log(LogLevels.INFO, ...messages);
  }
  warn(...messages) {
    this.log(LogLevels.WARN, ...messages);
  }
  error(...messages) {
    this.log(LogLevels.ERROR, ...messages);
  }
  fatal(...messages) {
    this.log(LogLevels.FATAL, ...messages);
  }
}
exports.Logger = Logger;
const loggers = {};

/**
 *
 */
function getLogger(moduleName) {
  const logger = loggers[moduleName] || new Logger(moduleName);
  loggers[moduleName] = logger;
  return logger;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMb2dMZXZlbHMiLCJERUJVRyIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJGQVRBTCIsIk5PTkUiLCJleHBvcnRzIiwiTG9nTGV2ZWxMYWJlbHMiLCJnbG9iYWxMb2dMZXZlbENvbmZpZyIsImdsb2JhbExvZ0xldmVsU3RyIiwicHJvY2VzcyIsImVudiIsIkpTRk9SQ0VfTE9HX0xFVkVMIiwiZ2xvYmFsIiwiX19KU0ZPUkNFX0xPR19MRVZFTF9fIiwidGVzdCIsIkpTT04iLCJwYXJzZSIsImUiLCJnZXRNb2R1bGVMb2dMZXZlbCIsImxvZ0xldmVsQ29uZmlnIiwibW9kdWxlTmFtZSIsImxvZ0xldmVsIiwiTG9nZ2VyIiwiY29uc3RydWN0b3IiLCJfZGVmaW5lUHJvcGVydHkyIiwiZGVmYXVsdCIsIl9tb2R1bGVOYW1lIiwiX2xvZ0xldmVsIiwiY3JlYXRlSW5zdGFuY2UiLCJzZXRMb2dMZXZlbCIsImxvZyIsIm1lc3NhZ2VzIiwibXNncyIsImNvbnNvbGUiLCJlcnJvciIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJmYXRhbCIsImxvZ2dlcnMiLCJnZXRMb2dnZXIiLCJsb2dnZXIiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbC9sb2dnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5leHBvcnQgY29uc3QgTG9nTGV2ZWxzOiB7IFtsZXZlbDogc3RyaW5nXTogbnVtYmVyIH0gPSB7XG4gIERFQlVHOiAxLFxuICBJTkZPOiAyLFxuICBXQVJOOiAzLFxuICBFUlJPUjogNCxcbiAgRkFUQUw6IDUsXG4gIE5PTkU6IDYsXG59O1xuXG5jb25zdCBMb2dMZXZlbExhYmVscyA9IFsnJywgJ0RFQlVHJywgJ0lORk8nLCAnV0FSTicsICdFUlJPUicsICdGQVRBTCcsICdOT05FJ107XG5cbmNvbnN0IGdsb2JhbExvZ0xldmVsQ29uZmlnID0gKCgpID0+IHtcbiAgY29uc3QgZ2xvYmFsTG9nTGV2ZWxTdHIgPVxuICAgIHByb2Nlc3MuZW52LkpTRk9SQ0VfTE9HX0xFVkVMIHx8XG4gICAgKGdsb2JhbCBhcyBhbnkpLl9fSlNGT1JDRV9MT0dfTEVWRUxfXyB8fFxuICAgICdOT05FJztcbiAgaWYgKC9eKERFQlVHfElORk98V0FSTnxFUlJPUnxGQVRBTHxOT05FKSQvaS50ZXN0KGdsb2JhbExvZ0xldmVsU3RyKSkge1xuICAgIHJldHVybiB7ICcqJzogZ2xvYmFsTG9nTGV2ZWxTdHIgfTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGdsb2JhbExvZ0xldmVsU3RyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7ICcqJzogJ05PTkUnIH07XG4gIH1cbn0pKCk7XG5cbmV4cG9ydCB0eXBlIExvZ0xldmVsQ29uZmlnID1cbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfTtcblxuZnVuY3Rpb24gZ2V0TW9kdWxlTG9nTGV2ZWwoXG4gIGxvZ0xldmVsQ29uZmlnOiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSxcbiAgbW9kdWxlTmFtZTogc3RyaW5nLFxuKSB7XG4gIGNvbnN0IGxvZ0xldmVsID0gbG9nTGV2ZWxDb25maWdbbW9kdWxlTmFtZV0gfHwgbG9nTGV2ZWxDb25maWdbJyonXTtcbiAgcmV0dXJuIHR5cGVvZiBsb2dMZXZlbCA9PT0gJ251bWJlcidcbiAgICA/IGxvZ0xldmVsXG4gICAgOiBMb2dMZXZlbHNbbG9nTGV2ZWxdIHx8IExvZ0xldmVscy5OT05FO1xufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBfbW9kdWxlTmFtZTogc3RyaW5nO1xuICBfbG9nTGV2ZWw6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBtb2R1bGVOYW1lOiBzdHJpbmcsXG4gICAgbG9nTGV2ZWxDb25maWc6IExvZ0xldmVsQ29uZmlnID0gZ2xvYmFsTG9nTGV2ZWxDb25maWcsXG4gICkge1xuICAgIHRoaXMuX21vZHVsZU5hbWUgPSBtb2R1bGVOYW1lO1xuICAgIHRoaXMuX2xvZ0xldmVsID1cbiAgICAgIHR5cGVvZiBsb2dMZXZlbENvbmZpZyA9PT0gJ251bWJlcidcbiAgICAgICAgPyBsb2dMZXZlbENvbmZpZ1xuICAgICAgICA6IHR5cGVvZiBsb2dMZXZlbENvbmZpZyA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBMb2dMZXZlbHNbbG9nTGV2ZWxDb25maWddIHx8IExvZ0xldmVscy5OT05FXG4gICAgICAgIDogZ2V0TW9kdWxlTG9nTGV2ZWwobG9nTGV2ZWxDb25maWcsIG1vZHVsZU5hbWUpO1xuICB9XG5cbiAgY3JlYXRlSW5zdGFuY2UobG9nTGV2ZWxDb25maWc6IExvZ0xldmVsQ29uZmlnID0gdGhpcy5fbG9nTGV2ZWwpIHtcbiAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLl9tb2R1bGVOYW1lLCBsb2dMZXZlbENvbmZpZyk7XG4gIH1cblxuICBzZXRMb2dMZXZlbChsb2dMZXZlbDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgaWYgKHR5cGVvZiBsb2dMZXZlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2xvZ0xldmVsID0gTG9nTGV2ZWxzW2xvZ0xldmVsXSB8fCBMb2dMZXZlbHMuTk9ORTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICB9XG4gIH1cblxuICBsb2cobG9nTGV2ZWw6IG51bWJlciwgLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gbG9nTGV2ZWwpIHtcbiAgICAgIGNvbnN0IG1zZ3MgPSBbXG4gICAgICAgIGAke0xvZ0xldmVsTGFiZWxzW2xvZ0xldmVsXX1cXHRbJHt0aGlzLl9tb2R1bGVOYW1lfV0gYCxcbiAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICBdO1xuICAgICAgaWYgKGxvZ0xldmVsIDwgTG9nTGV2ZWxzLkVSUk9SKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKC4uLm1zZ3MpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoLi4ubXNncyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlYnVnKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLkRFQlVHLCAuLi5tZXNzYWdlcyk7XG4gIH1cblxuICBpbmZvKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLklORk8sIC4uLm1lc3NhZ2VzKTtcbiAgfVxuXG4gIHdhcm4oLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbHMuV0FSTiwgLi4ubWVzc2FnZXMpO1xuICB9XG5cbiAgZXJyb3IoLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbHMuRVJST1IsIC4uLm1lc3NhZ2VzKTtcbiAgfVxuXG4gIGZhdGFsKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLkZBVEFMLCAuLi5tZXNzYWdlcyk7XG4gIH1cbn1cblxuY29uc3QgbG9nZ2VyczogeyBbbmFtZTogc3RyaW5nXTogTG9nZ2VyIH0gPSB7fTtcblxuLyoqXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG1vZHVsZU5hbWU6IHN0cmluZykge1xuICBjb25zdCBsb2dnZXIgPSBsb2dnZXJzW21vZHVsZU5hbWVdIHx8IG5ldyBMb2dnZXIobW9kdWxlTmFtZSk7XG4gIGxvZ2dlcnNbbW9kdWxlTmFtZV0gPSBsb2dnZXI7XG4gIHJldHVybiBsb2dnZXI7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ08sTUFBTUEsU0FBc0MsR0FBRztFQUNwREMsS0FBSyxFQUFFLENB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