import "core-js/modules/es.array.join";
import "core-js/modules/es.function.name";
import "core-js/modules/es.object.to-string";
import "core-js/modules/es.regexp.to-string";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _toConsumableArray from "@babel/runtime-corejs3/helpers/toConsumableArray";
import _regeneratorRuntime from "@babel/runtime-corejs3/regenerator";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import "regenerator-runtime/runtime";
import _asyncToGenerator from "@babel/runtime-corejs3/helpers/asyncToGenerator";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _mapInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/map";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
import _classCallCheck from "@babel/runtime-corejs3/helpers/classCallCheck";
import _createClass from "@babel/runtime-corejs3/helpers/createClass";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import { exec } from 'child_process';
import stripAnsi from 'strip-ansi';
import Connection from '../connection';
function isNotNullOrUndefined(v) {
  return v != null;
}

/**
 *
 */
export var SfdxRegistry = /*#__PURE__*/function () {
  function SfdxRegistry(_ref) {
    var cliPath = _ref.cliPath;
    _classCallCheck(this, SfdxRegistry);
    _defineProperty(this, "_cliPath", void 0);
    _defineProperty(this, "_orgList", void 0);
    _defineProperty(this, "_orgInfoMap", {});
    _defineProperty(this, "_defaultOrgInfo", void 0);
    this._cliPath = cliPath;
  }
  _createClass(SfdxRegistry, [{
    key: "_createCommand",
    value: function _createCommand(command) {
      var _context, _context2, _context3, _context4;
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
      return _concatInstanceProperty(_context = _concatInstanceProperty(_context2 = _concatInstanceProperty(_context3 = "".concat(this._cliPath ? this._cliPath + '/' : '', "sfdx ")).call(_context3, command, " ")).call(_context2, _mapInstanceProperty(_context4 = _Object$keys(options)).call(_context4, function (option) {
        var _context5, _context6;
        return _concatInstanceProperty(_context5 = _concatInstanceProperty(_context6 = "".concat(option.length > 1 ? '--' : '-')).call(_context6, option)).call(_context5, options[option] != null ? ' ' + options[option] : '');
      }).join(' '), " --json ")).call(_context, args.join(' '));
    }
  }, {
    key: "_execCommand",
    value: function () {
      var _execCommand2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(command) {
        var options,
          args,
          cmd,
          buf,
          body,
          ret,
          err,
          _args = arguments;
        return _regeneratorRuntime.wrap(function _callee$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};
                args = _args.length > 2 && _args[2] !== undefined ? _args[2] : [];
                cmd = this._createCommand(command, options, args);
                _context7.next = 5;
                return new _Promise(function (resolve, reject) {
                  exec(cmd, function (err, ret) {
                    if (err && !ret) {
                      reject(err);
                    } else {
                      resolve(ret);
                    }
                  });
                });
              case 5:
                buf = _context7.sent;
                body = stripAnsi(buf.toString());
                _context7.prev = 7;
                ret = JSON.parse(body);
                _context7.next = 14;
                break;
              case 11:
                _context7.prev = 11;
                _context7.t0 = _context7["catch"](7);
                throw new Error("Unexpectedd output from Sfdx cli: ".concat(body));
              case 14:
                if (!(ret.status === 0 && ret.result)) {
                  _context7.next = 18;
                  break;
                }
                return _context7.abrupt("return", ret.result);
              case 18:
                err = new Error(ret.message);
                err.name = ret.name;
                throw err;
              case 21:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee, this, [[7, 11]]);
      }));
      function _execCommand(_x) {
        return _execCommand2.apply(this, arguments);
      }
      return _execCommand;
    }()
  }, {
    key: "_getOrgList",
    value: function () {
      var _getOrgList2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {
        return _regeneratorRuntime.wrap(function _callee2$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                if (!this._orgList) {
                  this._orgList = this._execCommand('force:org:list');
                }
                return _context8.abrupt("return", this._orgList);
              case 2:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee2, this);
      }));
      function _getOrgList() {
        return _getOrgList2.apply(this, arguments);
      }
      return _getOrgList;
    }()
  }, {
    key: "getConnectionNames",
    value: function () {
      var _getConnectionNames = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {
        var _context9, _context10, _context11;
        var _yield$this$_getOrgLi, nonScratchOrgs, scratchOrgs;
        return _regeneratorRuntime.wrap(function _callee3$(_context12) {
          while (1) {
            switch (_context12.prev = _context12.next) {
              case 0:
                _context12.next = 2;
                return this._getOrgList();
              case 2:
                _yield$this$_getOrgLi = _context12.sent;
                nonScratchOrgs = _yield$this$_getOrgLi.nonScratchOrgs;
                scratchOrgs = _yield$this$_getOrgLi.scratchOrgs;
                return _context12.abrupt("return", _concatInstanceProperty(_context9 = []).call(_context9, _toConsumableArray(_filterInstanceProperty(_context10 = _mapInstanceProperty(nonScratchOrgs).call(nonScratchOrgs, function (o) {
                  return o.alias;
                })).call(_context10, isNotNullOrUndefined)), _toConsumableArray(_filterInstanceProperty(_context11 = _mapInstanceProperty(scratchOrgs).call(scratchOrgs, function (o) {
                  return o.alias;
                })).call(_context11, isNotNullOrUndefined)), _toConsumableArray(_mapInstanceProperty(nonScratchOrgs).call(nonScratchOrgs, function (o) {
                  return o.username;
                })), _toConsumableArray(_mapInstanceProperty(scratchOrgs).call(scratchOrgs, function (o) {
                  return o.username;
                }))));
              case 6:
              case "end":
                return _context12.stop();
            }
          }
        }, _callee3, this);
      }));
      function getConnectionNames() {
        return _getConnectionNames.apply(this, arguments);
      }
      return getConnectionNames;
    }()
  }, {
    key: "getConnection",
    value: function () {
      var _getConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name) {
        var config;
        return _regeneratorRuntime.wrap(function _callee4$(_context13) {
          while (1) {
            switch (_context13.prev = _context13.next) {
              case 0:
                _context13.next = 2;
                return this.getConnectionConfig(name);
              case 2:
                config = _context13.sent;
                return _context13.abrupt("return", config ? new Connection(config) : null);
              case 4:
              case "end":
                return _context13.stop();
            }
          }
        }, _callee4, this);
      }));
      function getConnection(_x2) {
        return _getConnection.apply(this, arguments);
      }
      return getConnection;
    }()
  }, {
    key: "_getOrgInfo",
    value: function () {
      var _getOrgInfo2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username) {
        var options, pOrgInfo, orgInfo;
        return _regeneratorRuntime.wrap(function _callee5$(_context14) {
          while (1) {
            switch (_context14.prev = _context14.next) {
              case 0:
                options = username ? {
                  u: username
                } : {};
                if (!username || !this._orgInfoMap[username]) {
                  pOrgInfo = this._execCommand('force:org:display', options);
                  this._memoOrgInfo(pOrgInfo, username);
                }
                orgInfo = username ? this._orgInfoMap[username] : this._defaultOrgInfo;
                if (orgInfo) {
                  _context14.next = 5;
                  break;
                }
                throw new Error('no orginfo found');
              case 5:
                return _context14.abrupt("return", orgInfo);
              case 6:
              case "end":
                return _context14.stop();
            }
          }
        }, _callee5, this);
      }));
      function _getOrgInfo(_x3) {
        return _getOrgInfo2.apply(this, arguments);
      }
      return _getOrgInfo;
    }()
  }, {
    key: "_memoOrgInfo",
    value: function _memoOrgInfo(pOrgInfo, username) {
      var _this = this;
      var pOrgInfo_ = pOrgInfo.then(function (orgInfo) {
        _this._orgInfoMap[orgInfo.username] = pOrgInfo_;
        if (orgInfo.alias) {
          _this._orgInfoMap[orgInfo.alias] = pOrgInfo_;
        }
        return orgInfo;
      });
      if (username) {
        this._orgInfoMap[username] = pOrgInfo_;
      } else {
        this._defaultOrgInfo = pOrgInfo_;
      }
    }
  }, {
    key: "getConnectionConfig",
    value: function () {
      var _getConnectionConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(name) {
        var orgInfo, accessToken, instanceUrl, loginUrl;
        return _regeneratorRuntime.wrap(function _callee6$(_context15) {
          while (1) {
            switch (_context15.prev = _context15.next) {
              case 0:
                _context15.next = 2;
                return this._getOrgInfo(name);
              case 2:
                orgInfo = _context15.sent;
                if (orgInfo) {
                  _context15.next = 5;
                  break;
                }
                return _context15.abrupt("return", null);
              case 5:
                accessToken = orgInfo.accessToken, instanceUrl = orgInfo.instanceUrl, loginUrl = orgInfo.loginUrl;
                return _context15.abrupt("return", {
                  accessToken: accessToken,
                  instanceUrl: instanceUrl,
                  loginUrl: loginUrl
                });
              case 7:
              case "end":
                return _context15.stop();
            }
          }
        }, _callee6, this);
      }));
      function getConnectionConfig(_x4) {
        return _getConnectionConfig.apply(this, arguments);
      }
      return getConnectionConfig;
    }()
  }, {
    key: "saveConnectionConfig",
    value: function () {
      var _saveConnectionConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_name, _connConfig) {
        return _regeneratorRuntime.wrap(function _callee7$(_context16) {
          while (1) {
            switch (_context16.prev = _context16.next) {
              case 0:
              case "end":
                return _context16.stop();
            }
          }
        }, _callee7);
      }));
      function saveConnectionConfig(_x5, _x6) {
        return _saveConnectionConfig.apply(this, arguments);
      }
      return saveConnectionConfig;
    }()
  }, {
    key: "setDefaultConnection",
    value: function () {
      var _setDefaultConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_name) {
        return _regeneratorRuntime.wrap(function _callee8$(_context17) {
          while (1) {
            switch (_context17.prev = _context17.next) {
              case 0:
              case "end":
                return _context17.stop();
            }
          }
        }, _callee8);
      }));
      function setDefaultConnection(_x7) {
        return _setDefaultConnection.apply(this, arguments);
      }
      return setDefaultConnection;
    }()
  }, {
    key: "removeConnectionConfig",
    value: function () {
      var _removeConnectionConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(name) {
        return _regeneratorRuntime.wrap(function _callee9$(_context18) {
          while (1) {
            switch (_context18.prev = _context18.next) {
              case 0:
                _context18.next = 2;
                return this._execCommand('force:org:delete', {
                  u: name
                });
              case 2:
              case "end":
                return _context18.stop();
            }
          }
        }, _callee9, this);
      }));
      function removeConnectionConfig(_x8) {
        return _removeConnectionConfig.apply(this, arguments);
      }
      return removeConnectionConfig;
    }()
  }, {
    key: "getClientConfig",
    value: function () {
      var _getClientConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_name) {
        return _regeneratorRuntime.wrap(function _callee10$(_context19) {
          while (1) {
            switch (_context19.prev = _context19.next) {
              case 0:
                return _context19.abrupt("return", null);
              case 1:
              case "end":
                return _context19.stop();
            }
          }
        }, _callee10);
      }));
      function getClientConfig(_x9) {
        return _getClientConfig.apply(this, arguments);
      }
      return getClientConfig;
    }()
  }, {
    key: "getClientNames",
    value: function () {
      var _getClientNames = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {
        return _regeneratorRuntime.wrap(function _callee11$(_context20) {
          while (1) {
            switch (_context20.prev = _context20.next) {
              case 0:
                return _context20.abrupt("return", []);
              case 1:
              case "end":
                return _context20.stop();
            }
          }
        }, _callee11);
      }));
      function getClientNames() {
        return _getClientNames.apply(this, arguments);
      }
      return getClientNames;
    }()
  }, {
    key: "registerClientConfig",
    value: function () {
      var _registerClientConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(_name, _clientConfig) {
        return _regeneratorRuntime.wrap(function _callee12$(_context21) {
          while (1) {
            switch (_context21.prev = _context21.next) {
              case 0:
              case "end":
                return _context21.stop();
            }
          }
        }, _callee12);
      }));
      function registerClientConfig(_x10, _x11) {
        return _registerClientConfig.apply(this, arguments);
      }
      return registerClientConfig;
    }()
  }]);
  return SfdxRegistry;
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjIiwic3RyaXBBbnNpIiwiQ29ubmVjdGlvbiIsImlzTm90TnVsbE9yVW5kZWZpbmVkIiwidiIsIlNmZHhSZWdpc3RyeSIsIl9yZWYiLCJjbGlQYXRoIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2RlZmluZVByb3BlcnR5IiwiX2NsaVBhdGgiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsIl9jcmVhdGVDb21tYW5kIiwiY29tbWFuZCIsIl9jb250ZXh0IiwiX2NvbnRleHQyIiwiX2NvbnRleHQzIiwiX2NvbnRleHQ0Iiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImFyZ3MiLCJfY29uY2F0SW5zdGFuY2VQcm9wZXJ0eSIsImNvbmNhdCIsImNhbGwiLCJfbWFwSW5zdGFuY2VQcm9wZXJ0eSIsIl9PYmplY3Qka2V5cyIsIm9wdGlvbiIsIl9jb250ZXh0NSIsIl9jb250ZXh0NiIsImpvaW4iLCJfZXhlY0NvbW1hbmQyIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJjbWQiLCJidWYiLCJib2R5IiwicmV0IiwiZXJyIiwiX2FyZ3MiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dDciLCJwcmV2IiwibmV4dCIsIl9Qcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInNlbnQiLCJ0b1N0cmluZyIsIkpTT04iLCJwYXJzZSIsInQwIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJhYnJ1cHQiLCJtZXNzYWdlIiwibmFtZSIsInN0b3AiLCJfZXhlY0NvbW1hbmQiLCJfeCIsImFwcGx5IiwiX2dldE9yZ0xpc3QyIiwiX2NhbGxlZTIiLCJfY2FsbGVlMiQiLCJfY29udGV4dDgiLCJfb3JnTGlzdCIsIl9nZXRPcmdMaXN0IiwiX2dldENvbm5lY3Rpb25OYW1lcyIsIl9jYWxsZWUzIiwiX2NvbnRleHQ5IiwiX2NvbnRleHQxMCIsIl9jb250ZXh0MTEiLCJfeWllbGQkdGhpcyRfZ2V0T3JnTGkiLCJub25TY3JhdGNoT3JncyIsInNjcmF0Y2hPcmdzIiwiX2NhbGxlZTMkIiwiX2NvbnRleHQxMiIsIl90b0NvbnN1bWFibGVBcnJheSIsIl9maWx0ZXJJbnN0YW5jZVByb3BlcnR5IiwibyIsImFsaWFzIiwidXNlcm5hbWUiLCJnZXRDb25uZWN0aW9uTmFtZXMiLCJfZ2V0Q29ubmVjdGlvbiIsIl9jYWxsZWU0IiwiY29uZmlnIiwiX2NhbGxlZTQkIiwiX2NvbnRleHQxMyIsImdldENvbm5lY3Rpb25Db25maWciLCJnZXRDb25uZWN0aW9uIiwiX3gyIiwiX2dldE9yZ0luZm8yIiwiX2NhbGxlZTUiLCJwT3JnSW5mbyIsIm9yZ0luZm8iLCJfY2FsbGVlNSQiLCJfY29udGV4dDE0IiwidSIsIl9vcmdJbmZvTWFwIiwiX21lbW9PcmdJbmZvIiwiX2RlZmF1bHRPcmdJbmZvIiwiX2dldE9yZ0luZm8iLCJfeDMiLCJfdGhpcyIsInBPcmdJbmZvXyIsInRoZW4iLCJfZ2V0Q29ubmVjdGlvbkNvbmZpZyIsIl9jYWxsZWU2IiwiYWNjZXNzVG9rZW4iLCJpbnN0YW5jZVVybCIsImxvZ2luVXJsIiwiX2NhbGxlZTYkIiwiX2NvbnRleHQxNSIsIl94NCIsIl9zYXZlQ29ubmVjdGlvbkNvbmZpZyIsIl9jYWxsZWU3IiwiX25hbWUiLCJfY29ubkNvbmZpZyIsIl9jYWxsZWU3JCIsIl9jb250ZXh0MTYiLCJzYXZlQ29ubmVjdGlvbkNvbmZpZyIsIl94NSIsIl94NiIsIl9zZXREZWZhdWx0Q29ubmVjdGlvbiIsIl9jYWxsZWU4IiwiX2NhbGxlZTgkIiwiX2NvbnRleHQxNyIsInNldERlZmF1bHRDb25uZWN0aW9uIiwiX3g3IiwiX3JlbW92ZUNvbm5lY3Rpb25Db25maWciLCJfY2FsbGVlOSIsIl9jYWxsZWU5JCIsIl9jb250ZXh0MTgiLCJyZW1vdmVDb25uZWN0aW9uQ29uZmlnIiwiX3g4IiwiX2dldENsaWVudENvbmZpZyIsIl9jYWxsZWUxMCIsIl9jYWxsZWUxMCQiLCJfY29udGV4dDE5IiwiZ2V0Q2xpZW50Q29uZmlnIiwiX3g5IiwiX2dldENsaWVudE5hbWVzIiwiX2NhbGxlZTExIiwiX2NhbGxlZTExJCIsIl9jb250ZXh0MjAiLCJnZXRDbGllbnROYW1lcyIsIl9yZWdpc3RlckNsaWVudENvbmZpZyIsIl9jYWxsZWUxMiIsIl9jbGllbnRDb25maWciLCJfY2FsbGVlMTIkIiwiX2NvbnRleHQyMSIsInJlZ2lzdGVyQ2xpZW50Q29uZmlnIiwiX3gxMCIsIl94MTEiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVnaXN0cnkvc2ZkeC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgc3RyaXBBbnNpIGZyb20gJ3N0cmlwLWFuc2knO1xuaW1wb3J0IENvbm5lY3Rpb24gZnJvbSAnLi4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBSZWdpc3RyeSwgQ29ubmVjdGlvbkNvbmZpZywgQ2xpZW50Q29uZmlnIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBTY2hlbWEgfSBmcm9tICcuLi90eXBlcyc7XG5cbnR5cGUgU2ZkeENvbW1hbmRPdXRwdXQgPSB7XG4gIHN0YXR1czogbnVtYmVyO1xuICBuYW1lPzogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICByZXN1bHQ/OiBhbnk7XG59O1xuXG50eXBlIFNmZHhPcmdMaXN0ID0ge1xuICBub25TY3JhdGNoT3JnczogU2ZkeE9yZ0luZm9bXTtcbiAgc2NyYXRjaE9yZ3M6IFNmZHhPcmdJbmZvW107XG59O1xuXG50eXBlIFNmZHhPcmdJbmZvID0ge1xuICBvcmdJZDogc3RyaW5nO1xuICBhY2Nlc3NUb2tlbjogc3RyaW5nO1xuICBpbnN0YW5jZVVybDogc3RyaW5nO1xuICBsb2dpblVybDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBjbGllbnRJZDogc3RyaW5nO1xuICBpc0Rldkh1YjogYm9vbGVhbjtcbiAgY29ubmVjdGVkU3RhdHVzOiBzdHJpbmc7XG4gIGxhc3RVc2VkOiBzdHJpbmc7XG4gIGFsaWFzPzogc3RyaW5nO1xufTtcblxuZnVuY3Rpb24gaXNOb3ROdWxsT3JVbmRlZmluZWQ8VD4odjogVCB8IG51bGwgfCB1bmRlZmluZWQpOiB2IGlzIFQge1xuICByZXR1cm4gdiAhPSBudWxsO1xufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBTZmR4UmVnaXN0cnkgaW1wbGVtZW50cyBSZWdpc3RyeSB7XG4gIF9jbGlQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIF9vcmdMaXN0OiBQcm9taXNlPFNmZHhPcmdMaXN0PiB8IHVuZGVmaW5lZDtcbiAgX29yZ0luZm9NYXA6IHsgW25hbWU6IHN0cmluZ106IFByb21pc2U8U2ZkeE9yZ0luZm8+IH0gPSB7fTtcbiAgX2RlZmF1bHRPcmdJbmZvOiBQcm9taXNlPFNmZHhPcmdJbmZvPiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih7IGNsaVBhdGggfTogeyBjbGlQYXRoPzogc3RyaW5nIH0pIHtcbiAgICB0aGlzLl9jbGlQYXRoID0gY2xpUGF0aDtcbiAgfVxuXG4gIF9jcmVhdGVDb21tYW5kKFxuICAgIGNvbW1hbmQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IFtvcHRpb246IHN0cmluZ106IGFueSB9ID0ge30sXG4gICAgYXJnczogc3RyaW5nW10gPSBbXSxcbiAgKSB7XG4gICAgcmV0dXJuIGAke1xuICAgICAgdGhpcy5fY2xpUGF0aCA/IHRoaXMuX2NsaVBhdGggKyAnLycgOiAnJ1xuICAgIH1zZmR4ICR7Y29tbWFuZH0gJHtPYmplY3Qua2V5cyhvcHRpb25zKVxuICAgICAgLm1hcChcbiAgICAgICAgKG9wdGlvbikgPT5cbiAgICAgICAgICBgJHtvcHRpb24ubGVuZ3RoID4gMSA/ICctLScgOiAnLSd9JHtvcHRpb259JHtcbiAgICAgICAgICAgIG9wdGlvbnNbb3B0aW9uXSAhPSBudWxsID8gJyAnICsgb3B0aW9uc1tvcHRpb25dIDogJydcbiAgICAgICAgICB9YCxcbiAgICAgIClcbiAgICAgIC5qb2luKCcgJyl9IC0tanNvbiAke2FyZ3Muam9pbignICcpfWA7XG4gIH1cblxuICBhc3luYyBfZXhlY0NvbW1hbmQ8VD4oXG4gICAgY29tbWFuZDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHsgW29wdGlvbjogc3RyaW5nXTogYW55IH0gPSB7fSxcbiAgICBhcmdzOiBzdHJpbmdbXSA9IFtdLFxuICApIHtcbiAgICBjb25zdCBjbWQgPSB0aGlzLl9jcmVhdGVDb21tYW5kKGNvbW1hbmQsIG9wdGlvbnMsIGFyZ3MpO1xuICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZXhlYyhjbWQsIChlcnIsIHJldCkgPT4ge1xuICAgICAgICBpZiAoZXJyICYmICFyZXQpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHJldCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGJvZHkgPSBzdHJpcEFuc2koYnVmLnRvU3RyaW5nKCkpO1xuICAgIGxldCByZXQ6IFNmZHhDb21tYW5kT3V0cHV0O1xuICAgIHRyeSB7XG4gICAgICByZXQgPSBKU09OLnBhcnNlKGJvZHkpIGFzIFNmZHhDb21tYW5kT3V0cHV0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZGQgb3V0cHV0IGZyb20gU2ZkeCBjbGk6ICR7Ym9keX1gKTtcbiAgICB9XG4gICAgaWYgKHJldC5zdGF0dXMgPT09IDAgJiYgcmV0LnJlc3VsdCkge1xuICAgICAgcmV0dXJuIHJldC5yZXN1bHQgYXMgVDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKHJldC5tZXNzYWdlIGFzIHN0cmluZyk7XG4gICAgICBlcnIubmFtZSA9IHJldC5uYW1lIGFzIHN0cmluZztcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfZ2V0T3JnTGlzdCgpIHtcbiAgICBpZiAoIXRoaXMuX29yZ0xpc3QpIHtcbiAgICAgIHRoaXMuX29yZ0xpc3QgPSB0aGlzLl9leGVjQ29tbWFuZDxTZmR4T3JnTGlzdD4oJ2ZvcmNlOm9yZzpsaXN0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vcmdMaXN0O1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29ubmVjdGlvbk5hbWVzKCkge1xuICAgIGNvbnN0IHsgbm9uU2NyYXRjaE9yZ3MsIHNjcmF0Y2hPcmdzIH0gPSBhd2FpdCB0aGlzLl9nZXRPcmdMaXN0KCk7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLm5vblNjcmF0Y2hPcmdzLm1hcCgobykgPT4gby5hbGlhcykuZmlsdGVyKGlzTm90TnVsbE9yVW5kZWZpbmVkKSxcbiAgICAgIC4uLnNjcmF0Y2hPcmdzLm1hcCgobykgPT4gby5hbGlhcykuZmlsdGVyKGlzTm90TnVsbE9yVW5kZWZpbmVkKSxcbiAgICAgIC4uLm5vblNjcmF0Y2hPcmdzLm1hcCgobykgPT4gby51c2VybmFtZSksXG4gICAgICAuLi5zY3JhdGNoT3Jncy5tYXAoKG8pID0+IG8udXNlcm5hbWUpLFxuICAgIF07XG4gIH1cblxuICBhc3luYyBnZXRDb25uZWN0aW9uPFMgZXh0ZW5kcyBTY2hlbWEgPSBTY2hlbWE+KG5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCB0aGlzLmdldENvbm5lY3Rpb25Db25maWcobmFtZSk7XG4gICAgcmV0dXJuIGNvbmZpZyA/IG5ldyBDb25uZWN0aW9uPFM+KGNvbmZpZykgOiBudWxsO1xuICB9XG5cbiAgYXN5bmMgX2dldE9yZ0luZm8odXNlcm5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdXNlcm5hbWUgPyB7IHU6IHVzZXJuYW1lIH0gOiB7fTtcbiAgICBpZiAoIXVzZXJuYW1lIHx8ICF0aGlzLl9vcmdJbmZvTWFwW3VzZXJuYW1lXSkge1xuICAgICAgY29uc3QgcE9yZ0luZm8gPSB0aGlzLl9leGVjQ29tbWFuZDxTZmR4T3JnSW5mbz4oXG4gICAgICAgICdmb3JjZTpvcmc6ZGlzcGxheScsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApO1xuICAgICAgdGhpcy5fbWVtb09yZ0luZm8ocE9yZ0luZm8sIHVzZXJuYW1lKTtcbiAgICB9XG4gICAgY29uc3Qgb3JnSW5mbyA9IHVzZXJuYW1lXG4gICAgICA/IHRoaXMuX29yZ0luZm9NYXBbdXNlcm5hbWVdXG4gICAgICA6IHRoaXMuX2RlZmF1bHRPcmdJbmZvO1xuICAgIGlmICghb3JnSW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBvcmdpbmZvIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBvcmdJbmZvO1xuICB9XG5cbiAgX21lbW9PcmdJbmZvKHBPcmdJbmZvOiBQcm9taXNlPFNmZHhPcmdJbmZvPiwgdXNlcm5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBwT3JnSW5mb18gPSBwT3JnSW5mby50aGVuKChvcmdJbmZvKSA9PiB7XG4gICAgICB0aGlzLl9vcmdJbmZvTWFwW29yZ0luZm8udXNlcm5hbWVdID0gcE9yZ0luZm9fO1xuICAgICAgaWYgKG9yZ0luZm8uYWxpYXMpIHtcbiAgICAgICAgdGhpcy5fb3JnSW5mb01hcFtvcmdJbmZvLmFsaWFzXSA9IHBPcmdJbmZvXztcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmdJbmZvO1xuICAgIH0pO1xuICAgIGlmICh1c2VybmFtZSkge1xuICAgICAgdGhpcy5fb3JnSW5mb01hcFt1c2VybmFtZV0gPSBwT3JnSW5mb187XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RlZmF1bHRPcmdJbmZvID0gcE9yZ0luZm9fO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvbm5lY3Rpb25Db25maWcobmFtZT86IHN0cmluZykge1xuICAgIGNvbnN0IG9yZ0luZm8gPSBhd2FpdCB0aGlzLl9nZXRPcmdJbmZvKG5hbWUpO1xuICAgIGlmICghb3JnSW5mbykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIGluc3RhbmNlVXJsLCBsb2dpblVybCB9ID0gb3JnSW5mbztcbiAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiwgaW5zdGFuY2VVcmwsIGxvZ2luVXJsIH07XG4gIH1cblxuICBhc3luYyBzYXZlQ29ubmVjdGlvbkNvbmZpZyhfbmFtZTogc3RyaW5nLCBfY29ubkNvbmZpZzogQ29ubmVjdGlvbkNvbmZpZykge1xuICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgfVxuXG4gIGFzeW5jIHNldERlZmF1bHRDb25uZWN0aW9uKF9uYW1lOiBzdHJpbmcpIHtcbiAgICAvLyBub3RoaW5nIHRvIGRvXG4gIH1cblxuICBhc3luYyByZW1vdmVDb25uZWN0aW9uQ29uZmlnKG5hbWU6IHN0cmluZykge1xuICAgIGF3YWl0IHRoaXMuX2V4ZWNDb21tYW5kKCdmb3JjZTpvcmc6ZGVsZXRlJywgeyB1OiBuYW1lIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2xpZW50Q29uZmlnKF9uYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldENsaWVudE5hbWVzKCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGFzeW5jIHJlZ2lzdGVyQ2xpZW50Q29uZmlnKF9uYW1lOiBzdHJpbmcsIF9jbGllbnRDb25maWc6IENsaWVudENvbmZpZykge1xuICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsU0FBU0EsSUFBSSxRQUFRLGVBQWU7QUFDcEMsT0FBT0MsU0FBUyxNQUFNLFlBQVk7QUFDbEMsT0FBT0MsVUFBVSxNQUFNLGVBQWU7QUE2QnRDLFNBQVNDLG9CQUFvQkEsQ0FBSUMsQ0FBdUIsRUFBVTtFQUNoRSxPQUFPQSxDQUFDLElBQUksSUFBSTtBQUNsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFhQyxZQUFZO0VBTXZC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