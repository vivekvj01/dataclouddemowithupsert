import _Reflect$construct from "@babel/runtime-corejs3/core-js-stable/reflect/construct";
import "core-js/modules/es.array.join";
import "core-js/modules/es.function.name";
import _wrapNativeSuper from "@babel/runtime-corejs3/helpers/wrapNativeSuper";
import _typeof from "@babel/runtime-corejs3/helpers/typeof";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _Object$keys2 from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _regeneratorRuntime from "@babel/runtime-corejs3/regenerator";
import _Date$now from "@babel/runtime-corejs3/core-js-stable/date/now";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
import "regenerator-runtime/runtime";
import _classCallCheck from "@babel/runtime-corejs3/helpers/classCallCheck";
import _createClass from "@babel/runtime-corejs3/helpers/createClass";
import _assertThisInitialized from "@babel/runtime-corejs3/helpers/assertThisInitialized";
import _inherits from "@babel/runtime-corejs3/helpers/inherits";
import _possibleConstructorReturn from "@babel/runtime-corejs3/helpers/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime-corejs3/helpers/getPrototypeOf";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import _asyncToGenerator from "@babel/runtime-corejs3/helpers/asyncToGenerator";
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(_Reflect$construct(Date, [], function () {})); return true; } catch (e) { return false; } }
/**
 *
 */
import { EventEmitter } from 'events';
import xml2js from 'xml2js';
import { getLogger } from './util/logger';
import { StreamPromise } from './util/promise';
import { parseCSV } from './csv';
import { createLazyStream } from './util/stream';

/** @private */
function parseJSON(str) {
  return JSON.parse(str);
}

/** @private */
function parseXML(_x) {
  return _parseXML.apply(this, arguments);
}
/** @private */
function _parseXML() {
  _parseXML = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(str) {
    return _regeneratorRuntime.wrap(function _callee5$(_context8) {
      while (1) {
        switch (_context8.prev = _context8.next) {
          case 0:
            return _context8.abrupt("return", xml2js.parseStringPromise(str, {
              explicitArray: false
            }));
          case 1:
          case "end":
            return _context8.stop();
        }
      }
    }, _callee5);
  }));
  return _parseXML.apply(this, arguments);
}
function parseText(str) {
  return str;
}

/**
 * HTTP based API class with authorization hook
 */
export var HttpApi = /*#__PURE__*/function (_EventEmitter) {
  _inherits(HttpApi, _EventEmitter);
  var _super = _createSuper(HttpApi);
  function HttpApi(conn, options) {
    var _this;
    _classCallCheck(this, HttpApi);
    _this = _super.call(this);
    _defineProperty(_assertThisInitialized(_this), "_conn", void 0);
    _defineProperty(_assertThisInitialized(_this), "_logger", void 0);
    _defineProperty(_assertThisInitialized(_this), "_transport", void 0);
    _defineProperty(_assertThisInitialized(_this), "_responseType", void 0);
    _defineProperty(_assertThisInitialized(_this), "_noContentResponse", void 0);
    _defineProperty(_assertThisInitialized(_this), "_options", void 0);
    _this._conn = conn;
    _this._logger = conn._logLevel ? HttpApi._logger.createInstance(conn._logLevel) : HttpApi._logger;
    _this._responseType = options.responseType;
    _this._transport = options.transport || conn._transport;
    _this._noContentResponse = options.noContentResponse;
    _this._options = options;
    return _this;
  }

  /**
   * Callout to API endpoint using http
   */
  _createClass(HttpApi, [{
    key: "request",
    value: function request(_request) {
      var _this2 = this;
      return StreamPromise.create(function () {
        var _createLazyStream = createLazyStream(),
          stream = _createLazyStream.stream,
          setStream = _createLazyStream.setStream;
        var promise = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
          var _context, _context2;
          var refreshDelegate, bodyPromise, _body2, requestTime, requestPromise, response, responseTime, err, body;
          return _regeneratorRuntime.wrap(function _callee$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  refreshDelegate = _this2.getRefreshDelegate();
                  /* TODO decide remove or not this section */
                  /*
                  // remember previous instance url in case it changes after a refresh
                  const lastInstanceUrl = conn.instanceUrl;
                   // check to see if the token refresh has changed the instance url
                  if(lastInstanceUrl !== conn.instanceUrl){
                    // if the instance url has changed
                    // then replace the current request urls instance url fragment
                    // with the updated instance url
                    request.url = request.url.replace(lastInstanceUrl,conn.instanceUrl);
                  }
                  */
                  if (!(refreshDelegate && refreshDelegate.isRefreshing())) {
                    _context3.next = 10;
                    break;
                  }
                  _context3.next = 4;
                  return refreshDelegate.waitRefresh();
                case 4:
                  bodyPromise = _this2.request(_request);
                  setStream(bodyPromise.stream());
                  _context3.next = 8;
                  return bodyPromise;
                case 8:
                  _body2 = _context3.sent;
                  return _context3.abrupt("return", _body2);
                case 10:
                  // hook before sending
                  _this2.beforeSend(_request);
                  _this2.emit('request', _request);
                  _this2._logger.debug(_concatInstanceProperty(_context = "<request> method=".concat(_request.method, ", url=")).call(_context, _request.url));
                  requestTime = _Date$now();
                  requestPromise = _this2._transport.httpRequest(_request, _this2._options);
                  setStream(requestPromise.stream());
                  _context3.prev = 16;
                  _context3.next = 19;
                  return requestPromise;
                case 19:
                  response = _context3.sent;
                  _context3.next = 26;
                  break;
                case 22:
                  _context3.prev = 22;
                  _context3.t0 = _context3["catch"](16);
                  _this2._logger.error(_context3.t0);
                  throw _context3.t0;
                case 26:
                  _context3.prev = 26;
                  responseTime = _Date$now();
                  _this2._logger.debug("elapsed time: ".concat(responseTime - requestTime, " msec"));
                  return _context3.finish(26);
                case 30:
                  if (response) {
                    _context3.next = 32;
                    break;
                  }
                  return _context3.abrupt("return");
                case 32:
                  _this2._logger.debug(_concatInstanceProperty(_context2 = "<response> status=".concat(String(response.statusCode), ", url=")).call(_context2, _request.url));
                  _this2.emit('response', response);
                  // Refresh token if session has been expired and requires authentication
                  // when session refresh delegate is available
                  if (!(_this2.isSessionExpired(response) && refreshDelegate)) {
                    _context3.next = 38;
                    break;
                  }
                  _context3.next = 37;
                  return refreshDelegate.refresh(requestTime);
                case 37:
                  return _context3.abrupt("return", _this2.request(_request));
                case 38:
                  if (!_this2.isErrorResponse(response)) {
                    _context3.next = 43;
                    break;
                  }
                  _context3.next = 41;
                  return _this2.getError(response);
                case 41:
                  err = _context3.sent;
                  throw err;
                case 43:
                  _context3.next = 45;
                  return _this2.getResponseBody(response);
                case 45:
                  body = _context3.sent;
                  return _context3.abrupt("return", body);
                case 47:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee, null, [[16, 22, 26, 30]]);
        }))();
        return {
          stream: stream,
          promise: promise
        };
      });
    }
    /**
     * @protected
     */
  }, {
    key: "getRefreshDelegate",
    value: function getRefreshDelegate() {
      return this._conn._refreshDelegate;
    }
    /**
     * @protected
     */
  }, {
    key: "beforeSend",
    value: function beforeSend(request) {
      /* eslint-disable no-param-reassign */
      var headers = request.headers || {};
      if (this._conn.accessToken) {
        headers.Authorization = "Bearer ".concat(this._conn.accessToken);
      }
      if (this._conn._callOptions) {
        var callOptions = [];
        for (var _i = 0, _Object$keys = _Object$keys2(this._conn._callOptions); _i < _Object$keys.length; _i++) {
          var _context4;
          var name = _Object$keys[_i];
          callOptions.push(_concatInstanceProperty(_context4 = "".concat(name, "=")).call(_context4, this._conn._callOptions[name]));
        }
        headers['Sforce-Call-Options'] = callOptions.join(', ');
      }
      request.headers = headers;
    }
    /**
     * Detect response content mime-type
     * @protected
     */
  }, {
    key: "getResponseContentType",
    value: function getResponseContentType(response) {
      return this._responseType || response.headers && response.headers['content-type'];
    }
    /**
     * @private
     */
  }, {
    key: "parseResponseBody",
    value: function () {
      var _parseResponseBody = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {
        var contentType, parseBody;
        return _regeneratorRuntime.wrap(function _callee2$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                contentType = this.getResponseContentType(response) || '';
                parseBody = /^(text|application)\/xml(;|$)/.test(contentType) ? parseXML : /^application\/json(;|$)/.test(contentType) ? parseJSON : /^text\/csv(;|$)/.test(contentType) ? parseCSV : parseText;
                _context5.prev = 2;
                return _context5.abrupt("return", parseBody(response.body));
              case 6:
                _context5.prev = 6;
                _context5.t0 = _context5["catch"](2);
                return _context5.abrupt("return", response.body);
              case 9:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee2, this, [[2, 6]]);
      }));
      function parseResponseBody(_x2) {
        return _parseResponseBody.apply(this, arguments);
      }
      return parseResponseBody;
    }()
    /**
     * Get response body
     * @protected
     */
  }, {
    key: "getResponseBody",
    value: function () {
      var _getResponseBody = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response) {
        var body, err;
        return _regeneratorRuntime.wrap(function _callee3$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                if (!(response.statusCode === 204)) {
                  _context6.next = 2;
                  break;
                }
                return _context6.abrupt("return", this._noContentResponse);
              case 2:
                _context6.next = 4;
                return this.parseResponseBody(response);
              case 4:
                body = _context6.sent;
                if (!this.hasErrorInResponseBody(body)) {
                  _context6.next = 10;
                  break;
                }
                _context6.next = 8;
                return this.getError(response, body);
              case 8:
                err = _context6.sent;
                throw err;
              case 10:
                if (!(response.statusCode === 300)) {
                  _context6.next = 12;
                  break;
                }
                throw new HttpApiError('Multiple records found', 'MULTIPLE_CHOICES', body);
              case 12:
                return _context6.abrupt("return", body);
              case 13:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee3, this);
      }));
      function getResponseBody(_x3) {
        return _getResponseBody.apply(this, arguments);
      }
      return getResponseBody;
    }()
    /**
     * Detect session expiry
     * @protected
     */
  }, {
    key: "isSessionExpired",
    value: function isSessionExpired(response) {
      return response.statusCode === 401;
    }
    /**
     * Detect error response
     * @protected
     */
  }, {
    key: "isErrorResponse",
    value: function isErrorResponse(response) {
      return response.statusCode >= 400;
    }
    /**
     * Detect error in response body
     * @protected
     */
  }, {
    key: "hasErrorInResponseBody",
    value: function hasErrorInResponseBody(_body) {
      return false;
    }
    /**
     * Parsing error message in response
     * @protected
     */
  }, {
    key: "parseError",
    value: function parseError(body) {
      var errors = body;
      return _Array$isArray(errors) ? errors[0] : errors;
    }
    /**
     * Get error message in response
     * @protected
     */
  }, {
    key: "getError",
    value: function () {
      var _getError = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(response, body) {
        var error;
        return _regeneratorRuntime.wrap(function _callee4$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                _context7.prev = 0;
                _context7.t0 = this;
                _context7.t1 = body;
                if (_context7.t1) {
                  _context7.next = 7;
                  break;
                }
                _context7.next = 6;
                return this.parseResponseBody(response);
              case 6:
                _context7.t1 = _context7.sent;
              case 7:
                _context7.t2 = _context7.t1;
                error = _context7.t0.parseError.call(_context7.t0, _context7.t2);
                _context7.next = 13;
                break;
              case 11:
                _context7.prev = 11;
                _context7.t3 = _context7["catch"](0);
              case 13:
                error = _typeof(error) === 'object' && error !== null && typeof error.message === 'string' ? error : {
                  errorCode: "ERROR_HTTP_".concat(response.statusCode),
                  message: response.body
                };
                if (!(response.headers['content-type'] === 'text/html')) {
                  _context7.next = 17;
                  break;
                }
                this._logger.debug("html response.body: ".concat(response.body));
                return _context7.abrupt("return", new HttpApiError("HTTP response contains html content.\nCheck that the org exists and can be reached.\nSee error.content for the full html response.", error.errorCode, error.message));
              case 17:
                return _context7.abrupt("return", new HttpApiError(error.message, error.errorCode));
              case 18:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee4, this, [[0, 11]]);
      }));
      function getError(_x4, _x5) {
        return _getError.apply(this, arguments);
      }
      return getError;
    }()
  }]);
  return HttpApi;
}(EventEmitter);

/**
 *
 */
_defineProperty(HttpApi, "_logger", getLogger('http-api'));
var HttpApiError = /*#__PURE__*/function (_Error) {
  _inherits(HttpApiError, _Error);
  var _super2 = _createSuper(HttpApiError);
  function HttpApiError(message, errorCode, content) {
    var _this3;
    _classCallCheck(this, HttpApiError);
    _this3 = _super2.call(this, message);
    _defineProperty(_assertThisInitialized(_this3), "errorCode", void 0);
    _defineProperty(_assertThisInitialized(_this3), "content", void 0);
    _this3.name = errorCode || _this3.name;
    _this3.errorCode = _this3.name;
    _this3.content = content;
    return _this3;
  }
  return HttpApiError;
}( /*#__PURE__*/_wrapNativeSuper(Error));
export default HttpApi;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJ4bWwyanMiLCJnZXRMb2dnZXIiLCJTdHJlYW1Qcm9taXNlIiwicGFyc2VDU1YiLCJjcmVhdGVMYXp5U3RyZWFtIiwicGFyc2VKU09OIiwic3RyIiwiSlNPTiIsInBhcnNlIiwicGFyc2VYTUwiLCJfeCIsIl9wYXJzZVhNTCIsImFwcGx5IiwiYXJndW1lbnRzIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWU1Iiwid3JhcCIsIl9jYWxsZWU1JCIsIl9jb250ZXh0OCIsInByZXYiLCJuZXh0IiwiYWJydXB0IiwicGFyc2VTdHJpbmdQcm9taXNlIiwiZXhwbGljaXRBcnJheSIsInN0b3AiLCJwYXJzZVRleHQiLCJIdHRwQXBpIiwiX0V2ZW50RW1pdHRlciIsIl9pbmhlcml0cyIsIl9zdXBlciIsIl9jcmVhdGVTdXBlciIsImNvbm4iLCJvcHRpb25zIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJjYWxsIiwiX2RlZmluZVByb3BlcnR5IiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsIl9jb25uIiwiX2xvZ2dlciIsIl9sb2dMZXZlbCIsImNyZWF0ZUluc3RhbmNlIiwiX3Jlc3BvbnNlVHlwZSIsInJlc3BvbnNlVHlwZSIsIl90cmFuc3BvcnQiLCJ0cmFuc3BvcnQiLCJfbm9Db250ZW50UmVzcG9uc2UiLCJub0NvbnRlbnRSZXNwb25zZSIsIl9vcHRpb25zIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJyZXF1ZXN0IiwiX3RoaXMyIiwiY3JlYXRlIiwiX2NyZWF0ZUxhenlTdHJlYW0iLCJzdHJlYW0iLCJzZXRTdHJlYW0iLCJwcm9taXNlIiwiX2NhbGxlZSIsIl9jb250ZXh0IiwiX2NvbnRleHQyIiwicmVmcmVzaERlbGVnYXRlIiwiYm9keVByb21pc2UiLCJfYm9keTIiLCJyZXF1ZXN0VGltZSIsInJlcXVlc3RQcm9taXNlIiwicmVzcG9uc2UiLCJyZXNwb25zZVRpbWUiLCJlcnIiLCJib2R5IiwiX2NhbGxlZSQiLCJfY29udGV4dDMiLCJnZXRSZWZyZXNoRGVsZWdhdGUiLCJpc1JlZnJlc2hpbmciLCJ3YWl0UmVmcmVzaCIsInNlbnQiLCJiZWZvcmVTZW5kIiwiZW1pdCIsImRlYnVnIiwiX2NvbmNhdEluc3RhbmNlUHJvcGVydHkiLCJjb25jYXQiLCJtZXRob2QiLCJ1cmwiLCJfRGF0ZSRub3ciLCJodHRwUmVxdWVzdCIsInQwIiwiZXJyb3IiLCJmaW5pc2giLCJTdHJpbmciLCJzdGF0dXNDb2RlIiwiaXNTZXNzaW9uRXhwaXJlZCIsInJlZnJlc2giLCJpc0Vycm9yUmVzcG9uc2UiLCJnZXRFcnJvciIsImdldFJlc3BvbnNlQm9keSIsIl9yZWZyZXNoRGVsZWdhdGUiLCJoZWFkZXJzIiwiYWNjZXNzVG9rZW4iLCJBdXRob3JpemF0aW9uIiwiX2NhbGxPcHRpb25zIiwiY2FsbE9wdGlvbnMiLCJfaSIsIl9PYmplY3Qka2V5cyIsIl9PYmplY3Qka2V5czIiLCJsZW5ndGgiLCJfY29udGV4dDQiLCJuYW1lIiwicHVzaCIsImpvaW4iLCJnZXRSZXNwb25zZUNvbnRlbnRUeXBlIiwiX3BhcnNlUmVzcG9uc2VCb2R5IiwiX2NhbGxlZTIiLCJjb250ZW50VHlwZSIsInBhcnNlQm9keSIsIl9jYWxsZWUyJCIsIl9jb250ZXh0NSIsInRlc3QiLCJwYXJzZVJlc3BvbnNlQm9keSIsIl94MiIsIl9nZXRSZXNwb25zZUJvZHkiLCJfY2FsbGVlMyIsIl9jYWxsZWUzJCIsIl9jb250ZXh0NiIsImhhc0Vycm9ySW5SZXNwb25zZUJvZHkiLCJIdHRwQXBpRXJyb3IiLCJfeDMiLCJfYm9keSIsInBhcnNlRXJyb3IiLCJlcnJvcnMiLCJfQXJyYXkkaXNBcnJheSIsIl9nZXRFcnJvciIsIl9jYWxsZWU0IiwiX2NhbGxlZTQkIiwiX2NvbnRleHQ3IiwidDEiLCJ0MiIsInQzIiwiX3R5cGVvZiIsIm1lc3NhZ2UiLCJlcnJvckNvZGUiLCJfeDQiLCJfeDUiLCJfRXJyb3IiLCJfc3VwZXIyIiwiY29udGVudCIsIl90aGlzMyIsIl93cmFwTmF0aXZlU3VwZXIiLCJFcnJvciJdLCJzb3VyY2VzIjpbIi4uL3NyYy9odHRwLWFwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKi9cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeG1sMmpzIGZyb20gJ3htbDJqcyc7XG5pbXBvcnQgeyBMb2dnZXIsIGdldExvZ2dlciB9IGZyb20gJy4vdXRpbC9sb2dnZXInO1xuaW1wb3J0IHsgU3RyZWFtUHJvbWlzZSB9IGZyb20gJy4vdXRpbC9wcm9taXNlJztcbmltcG9ydCBDb25uZWN0aW9uIGZyb20gJy4vY29ubmVjdGlvbic7XG5pbXBvcnQgVHJhbnNwb3J0IGZyb20gJy4vdHJhbnNwb3J0JztcbmltcG9ydCB7IHBhcnNlQ1NWIH0gZnJvbSAnLi9jc3YnO1xuaW1wb3J0IHtcbiAgSHR0cFJlcXVlc3QsXG4gIEh0dHBSZXF1ZXN0T3B0aW9ucyxcbiAgSHR0cFJlc3BvbnNlLFxuICBPcHRpb25hbCxcbiAgU2NoZW1hLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGNyZWF0ZUxhenlTdHJlYW0gfSBmcm9tICcuL3V0aWwvc3RyZWFtJztcblxuLyoqIEBwcml2YXRlICovXG5mdW5jdGlvbiBwYXJzZUpTT04oc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbn1cblxuLyoqIEBwcml2YXRlICovXG5hc3luYyBmdW5jdGlvbiBwYXJzZVhNTChzdHI6IHN0cmluZykge1xuICByZXR1cm4geG1sMmpzLnBhcnNlU3RyaW5nUHJvbWlzZShzdHIsIHsgZXhwbGljaXRBcnJheTogZmFsc2UgfSk7XG59XG5cbi8qKiBAcHJpdmF0ZSAqL1xuZnVuY3Rpb24gcGFyc2VUZXh0KHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBzdHI7XG59XG5cbi8qKlxuICogSFRUUCBiYXNlZCBBUEkgY2xhc3Mgd2l0aCBhdXRob3JpemF0aW9uIGhvb2tcbiAqL1xuZXhwb3J0IGNsYXNzIEh0dHBBcGk8UyBleHRlbmRzIFNjaGVtYT4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBzdGF0aWMgX2xvZ2dlciA9IGdldExvZ2dlcignaHR0cC1hcGknKTtcblxuICBfY29ubjogQ29ubmVjdGlvbjxTPjtcbiAgX2xvZ2dlcjogTG9nZ2VyO1xuICBfdHJhbnNwb3J0OiBUcmFuc3BvcnQ7XG4gIF9yZXNwb25zZVR5cGU6IHN0cmluZyB8IHZvaWQ7XG4gIF9ub0NvbnRlbnRSZXNwb25zZTogc3RyaW5nIHwgdm9pZDtcbiAgX29wdGlvbnM6IEh0dHBSZXF1ZXN0T3B0aW9ucztcblxuICBjb25zdHJ1Y3Rvcihjb25uOiBDb25uZWN0aW9uPFM+LCBvcHRpb25zOiBhbnkpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2Nvbm4gPSBjb25uO1xuICAgIHRoaXMuX2xvZ2dlciA9IGNvbm4uX2xvZ0xldmVsXG4gICAgICA/IEh0dHBBcGkuX2xvZ2dlci5jcmVhdGVJbnN0YW5jZShjb25uLl9sb2dMZXZlbClcbiAgICAgIDogSHR0cEFwaS5fbG9nZ2VyO1xuICAgIHRoaXMuX3Jlc3BvbnNlVHlwZSA9IG9wdGlvbnMucmVzcG9uc2VUeXBlO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0IHx8IGNvbm4uX3RyYW5zcG9ydDtcbiAgICB0aGlzLl9ub0NvbnRlbnRSZXNwb25zZSA9IG9wdGlvbnMubm9Db250ZW50UmVzcG9uc2U7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbG91dCB0byBBUEkgZW5kcG9pbnQgdXNpbmcgaHR0cFxuICAgKi9cbiAgcmVxdWVzdDxSID0gdW5rbm93bj4ocmVxdWVzdDogSHR0cFJlcXVlc3QpOiBTdHJlYW1Qcm9taXNlPFI+IHtcbiAgICByZXR1cm4gU3RyZWFtUHJvbWlzZS5jcmVhdGU8Uj4oKCkgPT4ge1xuICAgICAgY29uc3QgeyBzdHJlYW0sIHNldFN0cmVhbSB9ID0gY3JlYXRlTGF6eVN0cmVhbSgpO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hEZWxlZ2F0ZSA9IHRoaXMuZ2V0UmVmcmVzaERlbGVnYXRlKCk7XG4gICAgICAgIC8qIFRPRE8gZGVjaWRlIHJlbW92ZSBvciBub3QgdGhpcyBzZWN0aW9uICovXG4gICAgICAgIC8qXG4gICAgICAgIC8vIHJlbWVtYmVyIHByZXZpb3VzIGluc3RhbmNlIHVybCBpbiBjYXNlIGl0IGNoYW5nZXMgYWZ0ZXIgYSByZWZyZXNoXG4gICAgICAgIGNvbnN0IGxhc3RJbnN0YW5jZVVybCA9IGNvbm4uaW5zdGFuY2VVcmw7XG5cbiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSB0b2tlbiByZWZyZXNoIGhhcyBjaGFuZ2VkIHRoZSBpbnN0YW5jZSB1cmxcbiAgICAgICAgaWYobGFzdEluc3RhbmNlVXJsICE9PSBjb25uLmluc3RhbmNlVXJsKXtcbiAgICAgICAgICAvLyBpZiB0aGUgaW5zdGFuY2UgdXJsIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgLy8gdGhlbiByZXBsYWNlIHRoZSBjdXJyZW50IHJlcXVlc3QgdXJscyBpbnN0YW5jZSB1cmwgZnJhZ21lbnRcbiAgICAgICAgICAvLyB3aXRoIHRoZSB1cGRhdGVkIGluc3RhbmNlIHVybFxuICAgICAgICAgIHJlcXVlc3QudXJsID0gcmVxdWVzdC51cmwucmVwbGFjZShsYXN0SW5zdGFuY2VVcmwsY29ubi5pbnN0YW5jZVVybCk7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgaWYgKHJlZnJlc2hEZWxlZ2F0ZSAmJiByZWZyZXNoRGVsZWdhdGUuaXNSZWZyZXNoaW5nKCkpIHtcbiAgICAgICAgICBhd2FpdCByZWZyZXNoRGVsZWdhdGUud2FpdFJlZnJlc2goKTtcbiAgICAgICAgICBjb25zdCBib2R5UHJvbWlzZSA9IHRoaXMucmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICBzZXRTdHJlYW0oYm9keVByb21pc2Uuc3RyZWFtKCkpO1xuICAgICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCBib2R5UHJvbWlzZTtcbiAgICAgICAgICByZXR1cm4gYm9keTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhvb2sgYmVmb3JlIHNlbmRpbmdcbiAgICAgICAgdGhpcy5iZWZvcmVTZW5kKHJlcXVlc3QpO1xuXG4gICAgICAgIHRoaXMuZW1pdCgncmVxdWVzdCcsIHJlcXVlc3QpO1xuICAgICAgICB0aGlzLl9sb2dnZXIuZGVidWcoXG4gICAgICAgICAgYDxyZXF1ZXN0PiBtZXRob2Q9JHtyZXF1ZXN0Lm1ldGhvZH0sIHVybD0ke3JlcXVlc3QudXJsfWAsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdFByb21pc2UgPSB0aGlzLl90cmFuc3BvcnQuaHR0cFJlcXVlc3QoXG4gICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICB0aGlzLl9vcHRpb25zLFxuICAgICAgICApO1xuXG4gICAgICAgIHNldFN0cmVhbShyZXF1ZXN0UHJvbWlzZS5zdHJlYW0oKSk7XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlOiBIdHRwUmVzcG9uc2UgfCB2b2lkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFByb21pc2U7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIGBlbGFwc2VkIHRpbWU6ICR7cmVzcG9uc2VUaW1lIC0gcmVxdWVzdFRpbWV9IG1zZWNgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2dnZXIuZGVidWcoXG4gICAgICAgICAgYDxyZXNwb25zZT4gc3RhdHVzPSR7U3RyaW5nKHJlc3BvbnNlLnN0YXR1c0NvZGUpfSwgdXJsPSR7XG4gICAgICAgICAgICByZXF1ZXN0LnVybFxuICAgICAgICAgIH1gLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmVtaXQoJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICAvLyBSZWZyZXNoIHRva2VuIGlmIHNlc3Npb24gaGFzIGJlZW4gZXhwaXJlZCBhbmQgcmVxdWlyZXMgYXV0aGVudGljYXRpb25cbiAgICAgICAgLy8gd2hlbiBzZXNzaW9uIHJlZnJlc2ggZGVsZWdhdGUgaXMgYXZhaWxhYmxlXG4gICAgICAgIGlmICh0aGlzLmlzU2Vzc2lvbkV4cGlyZWQocmVzcG9uc2UpICYmIHJlZnJlc2hEZWxlZ2F0ZSkge1xuICAgICAgICAgIGF3YWl0IHJlZnJlc2hEZWxlZ2F0ZS5yZWZyZXNoKHJlcXVlc3RUaW1lKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzRXJyb3JSZXNwb25zZShyZXNwb25zZSkpIHtcbiAgICAgICAgICBjb25zdCBlcnIgPSBhd2FpdCB0aGlzLmdldEVycm9yKHJlc3BvbnNlKTtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMuZ2V0UmVzcG9uc2VCb2R5KHJlc3BvbnNlKTtcbiAgICAgICAgcmV0dXJuIGJvZHk7XG4gICAgICB9KSgpO1xuICAgICAgcmV0dXJuIHsgc3RyZWFtLCBwcm9taXNlIH07XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0UmVmcmVzaERlbGVnYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uLl9yZWZyZXNoRGVsZWdhdGU7XG4gIH1cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgYmVmb3JlU2VuZChyZXF1ZXN0OiBIdHRwUmVxdWVzdCkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4gICAgY29uc3QgaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVycyB8fCB7fTtcbiAgICBpZiAodGhpcy5fY29ubi5hY2Nlc3NUb2tlbikge1xuICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gYEJlYXJlciAke3RoaXMuX2Nvbm4uYWNjZXNzVG9rZW59YDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2Nvbm4uX2NhbGxPcHRpb25zKSB7XG4gICAgICBjb25zdCBjYWxsT3B0aW9ucyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKHRoaXMuX2Nvbm4uX2NhbGxPcHRpb25zKSkge1xuICAgICAgICBjYWxsT3B0aW9ucy5wdXNoKGAke25hbWV9PSR7dGhpcy5fY29ubi5fY2FsbE9wdGlvbnNbbmFtZV19YCk7XG4gICAgICB9XG4gICAgICBoZWFkZXJzWydTZm9yY2UtQ2FsbC1PcHRpb25zJ10gPSBjYWxsT3B0aW9ucy5qb2luKCcsICcpO1xuICAgIH1cbiAgICByZXF1ZXN0LmhlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCByZXNwb25zZSBjb250ZW50IG1pbWUtdHlwZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBnZXRSZXNwb25zZUNvbnRlbnRUeXBlKHJlc3BvbnNlOiBIdHRwUmVzcG9uc2UpOiBPcHRpb25hbDxzdHJpbmc+IHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fcmVzcG9uc2VUeXBlIHx8XG4gICAgICAocmVzcG9uc2UuaGVhZGVycyAmJiByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBwYXJzZVJlc3BvbnNlQm9keShyZXNwb25zZTogSHR0cFJlc3BvbnNlKSB7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSB0aGlzLmdldFJlc3BvbnNlQ29udGVudFR5cGUocmVzcG9uc2UpIHx8ICcnO1xuICAgIGNvbnN0IHBhcnNlQm9keSA9IC9eKHRleHR8YXBwbGljYXRpb24pXFwveG1sKDt8JCkvLnRlc3QoY29udGVudFR5cGUpXG4gICAgICA/IHBhcnNlWE1MXG4gICAgICA6IC9eYXBwbGljYXRpb25cXC9qc29uKDt8JCkvLnRlc3QoY29udGVudFR5cGUpXG4gICAgICA/IHBhcnNlSlNPTlxuICAgICAgOiAvXnRleHRcXC9jc3YoO3wkKS8udGVzdChjb250ZW50VHlwZSlcbiAgICAgID8gcGFyc2VDU1ZcbiAgICAgIDogcGFyc2VUZXh0O1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcGFyc2VCb2R5KHJlc3BvbnNlLmJvZHkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5ib2R5O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmVzcG9uc2UgYm9keVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBhc3luYyBnZXRSZXNwb25zZUJvZHkocmVzcG9uc2U6IEh0dHBSZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAyMDQpIHtcbiAgICAgIC8vIE5vIENvbnRlbnRcbiAgICAgIHJldHVybiB0aGlzLl9ub0NvbnRlbnRSZXNwb25zZTtcbiAgICB9XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMucGFyc2VSZXNwb25zZUJvZHkocmVzcG9uc2UpO1xuICAgIGxldCBlcnI7XG4gICAgaWYgKHRoaXMuaGFzRXJyb3JJblJlc3BvbnNlQm9keShib2R5KSkge1xuICAgICAgZXJyID0gYXdhaXQgdGhpcy5nZXRFcnJvcihyZXNwb25zZSwgYm9keSk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAzMDApIHtcbiAgICAgIC8vIE11bHRpcGxlIENob2ljZXNcbiAgICAgIHRocm93IG5ldyBIdHRwQXBpRXJyb3IoXG4gICAgICAgICdNdWx0aXBsZSByZWNvcmRzIGZvdW5kJyxcbiAgICAgICAgJ01VTFRJUExFX0NIT0lDRVMnLFxuICAgICAgICBib2R5LFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IHNlc3Npb24gZXhwaXJ5XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGlzU2Vzc2lvbkV4cGlyZWQocmVzcG9uc2U6IEh0dHBSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDE7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGVycm9yIHJlc3BvbnNlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGlzRXJyb3JSZXNwb25zZShyZXNwb25zZTogSHR0cFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gNDAwO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBlcnJvciBpbiByZXNwb25zZSBib2R5XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGhhc0Vycm9ySW5SZXNwb25zZUJvZHkoX2JvZHk6IE9wdGlvbmFsPHN0cmluZz4pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2luZyBlcnJvciBtZXNzYWdlIGluIHJlc3BvbnNlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHBhcnNlRXJyb3IoYm9keTogYW55KSB7XG4gICAgY29uc3QgZXJyb3JzID0gYm9keTtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlcnJvcnMpID8gZXJyb3JzWzBdIDogZXJyb3JzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlcnJvciBtZXNzYWdlIGluIHJlc3BvbnNlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGFzeW5jIGdldEVycm9yKHJlc3BvbnNlOiBIdHRwUmVzcG9uc2UsIGJvZHk/OiBhbnkpOiBQcm9taXNlPEVycm9yPiB7XG4gICAgbGV0IGVycm9yO1xuICAgIHRyeSB7XG4gICAgICBlcnJvciA9IHRoaXMucGFyc2VFcnJvcihib2R5IHx8IChhd2FpdCB0aGlzLnBhcnNlUmVzcG9uc2VCb2R5KHJlc3BvbnNlKSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5XG4gICAgfVxuICAgIGVycm9yID1cbiAgICAgIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBlcnJvclxuICAgICAgICA6IHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogYEVSUk9SX0hUVFBfJHtyZXNwb25zZS5zdGF0dXNDb2RlfWAsXG4gICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5ib2R5LFxuICAgICAgICAgIH07XG5cbiAgICBpZiAocmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10gPT09ICd0ZXh0L2h0bWwnKSB7XG4gICAgICB0aGlzLl9sb2dnZXIuZGVidWcoYGh0bWwgcmVzcG9uc2UuYm9keTogJHtyZXNwb25zZS5ib2R5fWApO1xuICAgICAgcmV0dXJuIG5ldyBIdHRwQXBpRXJyb3IoXG4gICAgICAgIGBIVFRQIHJlc3BvbnNlIGNvbnRhaW5zIGh0bWwgY29udGVudC5cbkNoZWNrIHRoYXQgdGhlIG9yZyBleGlzdHMgYW5kIGNhbiBiZSByZWFjaGVkLlxuU2VlIGVycm9yLmNvbnRlbnQgZm9yIHRoZSBmdWxsIGh0bWwgcmVzcG9uc2UuYCxcbiAgICAgICAgZXJyb3IuZXJyb3JDb2RlLFxuICAgICAgICBlcnJvci5tZXNzYWdlLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBIdHRwQXBpRXJyb3IoZXJyb3IubWVzc2FnZSwgZXJyb3IuZXJyb3JDb2RlKTtcbiAgfVxufVxuXG4vKipcbiAqXG4gKi9cbmNsYXNzIEh0dHBBcGlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgZXJyb3JDb2RlOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IGFueTtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBlcnJvckNvZGU/OiBzdHJpbmcgfCB1bmRlZmluZWQsIGNvbnRlbnQ/OiBhbnkpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBlcnJvckNvZGUgfHwgdGhpcy5uYW1lO1xuICAgIHRoaXMuZXJyb3JDb2RlID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSHR0cEFwaTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsU0FBU0EsWUFBWSxRQUFRLFFBQVE7QUFDckMsT0FBT0MsTUFBTSxNQUFNLFFBQVE7QUFDM0IsU0FBaUJDLFNBQVMsUUFBUSxlQUFlO0FBQ2pELFNBQVNDLGFBQWEsUUFBUSxnQkFBZ0I7QUFHOUMsU0FBU0MsUUFBUSxRQUFRLE9BQU87QUFRaEMsU0FBU0MsZ0JBQWdCLFFBQVEsZUFBZTs7QUFFaEQ7QUFDQSxTQUFTQyxTQUFTQSxDQUFDQyxHQUFXLEVBQUU7RUFDOUIsT0FBT0MsSUFBSSxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQztBQUN4Qjs7QUFFQTtBQUFBLFNBQ2VHLFFBQVFBLENBQUFDLEVBQUE7RUFBQSxPQUFBQyxTQUFBLENBQUFDLEtBQUEsT0FBQUMsU0FBQTtBQUFBO0FBSXZCO0FBQUEsU0FBQUYsVUFBQTtFQUFBQSxTQUFBLEdBQUFHLGlCQUFBLGVBQUFDLG1CQUFBLENBQUFDLElBQUEsQ0FKQSxTQUFBQyxTQUF3QlgsR0FBVztJQUFBLE9BQUFTLG1CQUFB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