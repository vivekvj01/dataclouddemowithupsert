"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");
var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");
require("core-js/modules/es.array.iterator");
require("core-js/modules/es.promise");
_Object$defineProperty(exports, "__esModule", {
  value: true
});
exports.SfdxRegistry = void 0;
var _filter = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/filter"));
var _promise = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/promise"));
var _keys = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/keys"));
var _map = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime-corejs3/helpers/defineProperty"));
var _child_process = require("child_process");
var _stripAnsi = _interopRequireDefault(require("strip-ansi"));
var _connection = _interopRequireDefault(require("../connection"));
function isNotNullOrUndefined(v) {
  return v != null;
}

/**
 *
 */
class SfdxRegistry {
  constructor({
    cliPath
  }) {
    (0, _defineProperty2.default)(this, "_cliPath", void 0);
    (0, _defineProperty2.default)(this, "_orgList", void 0);
    (0, _defineProperty2.default)(this, "_orgInfoMap", {});
    (0, _defineProperty2.default)(this, "_defaultOrgInfo", void 0);
    this._cliPath = cliPath;
  }
  _createCommand(command, options = {}, args = []) {
    var _context;
    return `${this._cliPath ? this._cliPath + '/' : ''}sfdx ${command} ${(0, _map.default)(_context = (0, _keys.default)(options)).call(_context, option => `${option.length > 1 ? '--' : '-'}${option}${options[option] != null ? ' ' + options[option] : ''}`).join(' ')} --json ${args.join(' ')}`;
  }
  async _execCommand(command, options = {}, args = []) {
    const cmd = this._createCommand(command, options, args);
    const buf = await new _promise.default((resolve, reject) => {
      (0, _child_process.exec)(cmd, (err, ret) => {
        if (err && !ret) {
          reject(err);
        } else {
          resolve(ret);
        }
      });
    });
    const body = (0, _stripAnsi.default)(buf.toString());
    let ret;
    try {
      ret = JSON.parse(body);
    } catch (e) {
      throw new Error(`Unexpectedd output from Sfdx cli: ${body}`);
    }
    if (ret.status === 0 && ret.result) {
      return ret.result;
    } else {
      const err = new Error(ret.message);
      err.name = ret.name;
      throw err;
    }
  }
  async _getOrgList() {
    if (!this._orgList) {
      this._orgList = this._execCommand('force:org:list');
    }
    return this._orgList;
  }
  async getConnectionNames() {
    var _context2, _context3;
    const {
      nonScratchOrgs,
      scratchOrgs
    } = await this._getOrgList();
    return [...(0, _filter.default)(_context2 = (0, _map.default)(nonScratchOrgs).call(nonScratchOrgs, o => o.alias)).call(_context2, isNotNullOrUndefined), ...(0, _filter.default)(_context3 = (0, _map.default)(scratchOrgs).call(scratchOrgs, o => o.alias)).call(_context3, isNotNullOrUndefined), ...(0, _map.default)(nonScratchOrgs).call(nonScratchOrgs, o => o.username), ...(0, _map.default)(scratchOrgs).call(scratchOrgs, o => o.username)];
  }
  async getConnection(name) {
    const config = await this.getConnectionConfig(name);
    return config ? new _connection.default(config) : null;
  }
  async _getOrgInfo(username) {
    const options = username ? {
      u: username
    } : {};
    if (!username || !this._orgInfoMap[username]) {
      const pOrgInfo = this._execCommand('force:org:display', options);
      this._memoOrgInfo(pOrgInfo, username);
    }
    const orgInfo = username ? this._orgInfoMap[username] : this._defaultOrgInfo;
    if (!orgInfo) {
      throw new Error('no orginfo found');
    }
    return orgInfo;
  }
  _memoOrgInfo(pOrgInfo, username) {
    const pOrgInfo_ = pOrgInfo.then(orgInfo => {
      this._orgInfoMap[orgInfo.username] = pOrgInfo_;
      if (orgInfo.alias) {
        this._orgInfoMap[orgInfo.alias] = pOrgInfo_;
      }
      return orgInfo;
    });
    if (username) {
      this._orgInfoMap[username] = pOrgInfo_;
    } else {
      this._defaultOrgInfo = pOrgInfo_;
    }
  }
  async getConnectionConfig(name) {
    const orgInfo = await this._getOrgInfo(name);
    if (!orgInfo) {
      return null;
    }
    const {
      accessToken,
      instanceUrl,
      loginUrl
    } = orgInfo;
    return {
      accessToken,
      instanceUrl,
      loginUrl
    };
  }
  async saveConnectionConfig(_name, _connConfig) {
    // nothing to do
  }
  async setDefaultConnection(_name) {
    // nothing to do
  }
  async removeConnectionConfig(name) {
    await this._execCommand('force:org:delete', {
      u: name
    });
  }
  async getClientConfig(_name) {
    return null;
  }
  async getClientNames() {
    return [];
  }
  async registerClientConfig(_name, _clientConfig) {
    // nothing to do
  }
}
exports.SfdxRegistry = SfdxRegistry;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hpbGRfcHJvY2VzcyIsInJlcXVpcmUiLCJfc3RyaXBBbnNpIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9jb25uZWN0aW9uIiwiaXNOb3ROdWxsT3JVbmRlZmluZWQiLCJ2IiwiU2ZkeFJlZ2lzdHJ5IiwiY29uc3RydWN0b3IiLCJjbGlQYXRoIiwiX2RlZmluZVByb3BlcnR5MiIsImRlZmF1bHQiLCJfY2xpUGF0aCIsIl9jcmVhdGVDb21tYW5kIiwiY29tbWFuZCIsIm9wdGlvbnMiLCJhcmdzIiwiX2NvbnRleHQiLCJfbWFwIiwiX2tleXMiLCJjYWxsIiwib3B0aW9uIiwibGVuZ3RoIiwiam9pbiIsIl9leGVjQ29tbWFuZCIsImNtZCIsImJ1ZiIsIl9wcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWMiLCJlcnIiLCJyZXQiLCJib2R5Iiwic3RyaXBBbnNpIiwidG9TdHJpbmciLCJKU09OIiwicGFyc2UiLCJlIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJtZXNzYWdlIiwibmFtZSIsIl9nZXRPcmdMaXN0IiwiX29yZ0xpc3QiLCJnZXRDb25uZWN0aW9uTmFtZXMiLCJfY29udGV4dDIiLCJfY29udGV4dDMiLCJub25TY3JhdGNoT3JncyIsInNjcmF0Y2hPcmdzIiwiX2ZpbHRlciIsIm8iLCJhbGlhcyIsInVzZXJuYW1lIiwiZ2V0Q29ubmVjdGlvbiIsImNvbmZpZyIsImdldENvbm5lY3Rpb25Db25maWciLCJDb25uZWN0aW9uIiwiX2dldE9yZ0luZm8iLCJ1IiwiX29yZ0luZm9NYXAiLCJwT3JnSW5mbyIsIl9tZW1vT3JnSW5mbyIsIm9yZ0luZm8iLCJfZGVmYXVsdE9yZ0luZm8iLCJwT3JnSW5mb18iLCJ0aGVuIiwiYWNjZXNzVG9rZW4iLCJpbnN0YW5jZVVybCIsImxvZ2luVXJsIiwic2F2ZUNvbm5lY3Rpb25Db25maWciLCJfbmFtZSIsIl9jb25uQ29uZmlnIiwic2V0RGVmYXVsdENvbm5lY3Rpb24iLCJyZW1vdmVDb25uZWN0aW9uQ29uZmlnIiwiZ2V0Q2xpZW50Q29uZmlnIiwiZ2V0Q2xpZW50TmFtZXMiLCJyZWdpc3RlckNsaWVudENvbmZpZyIsIl9jbGllbnRDb25maWciLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3JlZ2lzdHJ5L3NmZHgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHN0cmlwQW5zaSBmcm9tICdzdHJpcC1hbnNpJztcbmltcG9ydCBDb25uZWN0aW9uIGZyb20gJy4uL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUmVnaXN0cnksIENvbm5lY3Rpb25Db25maWcsIENsaWVudENvbmZpZyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG50eXBlIFNmZHhDb21tYW5kT3V0cHV0ID0ge1xuICBzdGF0dXM6IG51bWJlcjtcbiAgbmFtZT86IHN0cmluZztcbiAgbWVzc2FnZT86IHN0cmluZztcbiAgcmVzdWx0PzogYW55O1xufTtcblxudHlwZSBTZmR4T3JnTGlzdCA9IHtcbiAgbm9uU2NyYXRjaE9yZ3M6IFNmZHhPcmdJbmZvW107XG4gIHNjcmF0Y2hPcmdzOiBTZmR4T3JnSW5mb1tdO1xufTtcblxudHlwZSBTZmR4T3JnSW5mbyA9IHtcbiAgb3JnSWQ6IHN0cmluZztcbiAgYWNjZXNzVG9rZW46IHN0cmluZztcbiAgaW5zdGFuY2VVcmw6IHN0cmluZztcbiAgbG9naW5Vcmw6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgaXNEZXZIdWI6IGJvb2xlYW47XG4gIGNvbm5lY3RlZFN0YXR1czogc3RyaW5nO1xuICBsYXN0VXNlZDogc3RyaW5nO1xuICBhbGlhcz86IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIGlzTm90TnVsbE9yVW5kZWZpbmVkPFQ+KHY6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogdiBpcyBUIHtcbiAgcmV0dXJuIHYgIT0gbnVsbDtcbn1cblxuLyoqXG4gKlxuICovXG5leHBvcnQgY2xhc3MgU2ZkeFJlZ2lzdHJ5IGltcGxlbWVudHMgUmVnaXN0cnkge1xuICBfY2xpUGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBfb3JnTGlzdDogUHJvbWlzZTxTZmR4T3JnTGlzdD4gfCB1bmRlZmluZWQ7XG4gIF9vcmdJbmZvTWFwOiB7IFtuYW1lOiBzdHJpbmddOiBQcm9taXNlPFNmZHhPcmdJbmZvPiB9ID0ge307XG4gIF9kZWZhdWx0T3JnSW5mbzogUHJvbWlzZTxTZmR4T3JnSW5mbz4gfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoeyBjbGlQYXRoIH06IHsgY2xpUGF0aD86IHN0cmluZyB9KSB7XG4gICAgdGhpcy5fY2xpUGF0aCA9IGNsaVBhdGg7XG4gIH1cblxuICBfY3JlYXRlQ29tbWFuZChcbiAgICBjb21tYW5kOiBzdHJpbmcsXG4gICAgb3B0aW9uczogeyBbb3B0aW9uOiBzdHJpbmddOiBhbnkgfSA9IHt9LFxuICAgIGFyZ3M6IHN0cmluZ1tdID0gW10sXG4gICkge1xuICAgIHJldHVybiBgJHtcbiAgICAgIHRoaXMuX2NsaVBhdGggPyB0aGlzLl9jbGlQYXRoICsgJy8nIDogJydcbiAgICB9c2ZkeCAke2NvbW1hbmR9ICR7T2JqZWN0LmtleXMob3B0aW9ucylcbiAgICAgIC5tYXAoXG4gICAgICAgIChvcHRpb24pID0+XG4gICAgICAgICAgYCR7b3B0aW9uLmxlbmd0aCA+IDEgPyAnLS0nIDogJy0nfSR7b3B0aW9ufSR7XG4gICAgICAgICAgICBvcHRpb25zW29wdGlvbl0gIT0gbnVsbCA/ICcgJyArIG9wdGlvbnNbb3B0aW9uXSA6ICcnXG4gICAgICAgICAgfWAsXG4gICAgICApXG4gICAgICAuam9pbignICcpfSAtLWpzb24gJHthcmdzLmpvaW4oJyAnKX1gO1xuICB9XG5cbiAgYXN5bmMgX2V4ZWNDb21tYW5kPFQ+KFxuICAgIGNvbW1hbmQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IFtvcHRpb246IHN0cmluZ106IGFueSB9ID0ge30sXG4gICAgYXJnczogc3RyaW5nW10gPSBbXSxcbiAgKSB7XG4gICAgY29uc3QgY21kID0gdGhpcy5fY3JlYXRlQ29tbWFuZChjb21tYW5kLCBvcHRpb25zLCBhcmdzKTtcbiAgICBjb25zdCBidWYgPSBhd2FpdCBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGV4ZWMoY21kLCAoZXJyLCByZXQpID0+IHtcbiAgICAgICAgaWYgKGVyciAmJiAhcmV0KSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShyZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBjb25zdCBib2R5ID0gc3RyaXBBbnNpKGJ1Zi50b1N0cmluZygpKTtcbiAgICBsZXQgcmV0OiBTZmR4Q29tbWFuZE91dHB1dDtcbiAgICB0cnkge1xuICAgICAgcmV0ID0gSlNPTi5wYXJzZShib2R5KSBhcyBTZmR4Q29tbWFuZE91dHB1dDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWRkIG91dHB1dCBmcm9tIFNmZHggY2xpOiAke2JvZHl9YCk7XG4gICAgfVxuICAgIGlmIChyZXQuc3RhdHVzID09PSAwICYmIHJldC5yZXN1bHQpIHtcbiAgICAgIHJldHVybiByZXQucmVzdWx0IGFzIFQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihyZXQubWVzc2FnZSBhcyBzdHJpbmcpO1xuICAgICAgZXJyLm5hbWUgPSByZXQubmFtZSBhcyBzdHJpbmc7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2dldE9yZ0xpc3QoKSB7XG4gICAgaWYgKCF0aGlzLl9vcmdMaXN0KSB7XG4gICAgICB0aGlzLl9vcmdMaXN0ID0gdGhpcy5fZXhlY0NvbW1hbmQ8U2ZkeE9yZ0xpc3Q+KCdmb3JjZTpvcmc6bGlzdCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fb3JnTGlzdDtcbiAgfVxuXG4gIGFzeW5jIGdldENvbm5lY3Rpb25OYW1lcygpIHtcbiAgICBjb25zdCB7IG5vblNjcmF0Y2hPcmdzLCBzY3JhdGNoT3JncyB9ID0gYXdhaXQgdGhpcy5fZ2V0T3JnTGlzdCgpO1xuICAgIHJldHVybiBbXG4gICAgICAuLi5ub25TY3JhdGNoT3Jncy5tYXAoKG8pID0+IG8uYWxpYXMpLmZpbHRlcihpc05vdE51bGxPclVuZGVmaW5lZCksXG4gICAgICAuLi5zY3JhdGNoT3Jncy5tYXAoKG8pID0+IG8uYWxpYXMpLmZpbHRlcihpc05vdE51bGxPclVuZGVmaW5lZCksXG4gICAgICAuLi5ub25TY3JhdGNoT3Jncy5tYXAoKG8pID0+IG8udXNlcm5hbWUpLFxuICAgICAgLi4uc2NyYXRjaE9yZ3MubWFwKChvKSA9PiBvLnVzZXJuYW1lKSxcbiAgICBdO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29ubmVjdGlvbjxTIGV4dGVuZHMgU2NoZW1hID0gU2NoZW1hPihuYW1lPzogc3RyaW5nKSB7XG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0aW9uQ29uZmlnKG5hbWUpO1xuICAgIHJldHVybiBjb25maWcgPyBuZXcgQ29ubmVjdGlvbjxTPihjb25maWcpIDogbnVsbDtcbiAgfVxuXG4gIGFzeW5jIF9nZXRPcmdJbmZvKHVzZXJuYW1lPzogc3RyaW5nKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHVzZXJuYW1lID8geyB1OiB1c2VybmFtZSB9IDoge307XG4gICAgaWYgKCF1c2VybmFtZSB8fCAhdGhpcy5fb3JnSW5mb01hcFt1c2VybmFtZV0pIHtcbiAgICAgIGNvbnN0IHBPcmdJbmZvID0gdGhpcy5fZXhlY0NvbW1hbmQ8U2ZkeE9yZ0luZm8+KFxuICAgICAgICAnZm9yY2U6b3JnOmRpc3BsYXknLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICAgIHRoaXMuX21lbW9PcmdJbmZvKHBPcmdJbmZvLCB1c2VybmFtZSk7XG4gICAgfVxuICAgIGNvbnN0IG9yZ0luZm8gPSB1c2VybmFtZVxuICAgICAgPyB0aGlzLl9vcmdJbmZvTWFwW3VzZXJuYW1lXVxuICAgICAgOiB0aGlzLl9kZWZhdWx0T3JnSW5mbztcbiAgICBpZiAoIW9yZ0luZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm8gb3JnaW5mbyBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gb3JnSW5mbztcbiAgfVxuXG4gIF9tZW1vT3JnSW5mbyhwT3JnSW5mbzogUHJvbWlzZTxTZmR4T3JnSW5mbz4sIHVzZXJuYW1lPzogc3RyaW5nKSB7XG4gICAgY29uc3QgcE9yZ0luZm9fID0gcE9yZ0luZm8udGhlbigob3JnSW5mbykgPT4ge1xuICAgICAgdGhpcy5fb3JnSW5mb01hcFtvcmdJbmZvLnVzZXJuYW1lXSA9IHBPcmdJbmZvXztcbiAgICAgIGlmIChvcmdJbmZvLmFsaWFzKSB7XG4gICAgICAgIHRoaXMuX29yZ0luZm9NYXBbb3JnSW5mby5hbGlhc10gPSBwT3JnSW5mb187XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JnSW5mbztcbiAgICB9KTtcbiAgICBpZiAodXNlcm5hbWUpIHtcbiAgICAgIHRoaXMuX29yZ0luZm9NYXBbdXNlcm5hbWVdID0gcE9yZ0luZm9fO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kZWZhdWx0T3JnSW5mbyA9IHBPcmdJbmZvXztcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDb25uZWN0aW9uQ29uZmlnKG5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBvcmdJbmZvID0gYXdhaXQgdGhpcy5fZ2V0T3JnSW5mbyhuYW1lKTtcbiAgICBpZiAoIW9yZ0luZm8pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGFjY2Vzc1Rva2VuLCBpbnN0YW5jZVVybCwgbG9naW5VcmwgfSA9IG9yZ0luZm87XG4gICAgcmV0dXJuIHsgYWNjZXNzVG9rZW4sIGluc3RhbmNlVXJsLCBsb2dpblVybCB9O1xuICB9XG5cbiAgYXN5bmMgc2F2ZUNvbm5lY3Rpb25Db25maWcoX25hbWU6IHN0cmluZywgX2Nvbm5Db25maWc6IENvbm5lY3Rpb25Db25maWcpIHtcbiAgICAvLyBub3RoaW5nIHRvIGRvXG4gIH1cblxuICBhc3luYyBzZXREZWZhdWx0Q29ubmVjdGlvbihfbmFtZTogc3RyaW5nKSB7XG4gICAgLy8gbm90aGluZyB0byBkb1xuICB9XG5cbiAgYXN5bmMgcmVtb3ZlQ29ubmVjdGlvbkNvbmZpZyhuYW1lOiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLl9leGVjQ29tbWFuZCgnZm9yY2U6b3JnOmRlbGV0ZScsIHsgdTogbmFtZSB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldENsaWVudENvbmZpZyhfbmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRDbGllbnROYW1lcygpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyByZWdpc3RlckNsaWVudENvbmZpZyhfbmFtZTogc3RyaW5nLCBfY2xpZW50Q29uZmlnOiBDbGllbnRDb25maWcpIHtcbiAgICAvLyBub3RoaW5nIHRvIGRvXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsY0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBNkJBLFNBQVNJLG9CQUFvQkEsQ0FBSUMsQ0FBdUIsRUFBVTtFQUNoRSxPQUFPQSxDQUFDLElBQUksSUFBSTtBQUNsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxNQUFNQyxZQUFZLENBQXFCO0VBTTVDQyxXQUFXQSxDQUFDO0lBQUVDO0VBQThCLENBQUMsRUFBRTtJQUFBLElBQUFDLGdCQUFBLENBQUFDLE9BQUE7SUFBQSxJQUFBRCxnQkFBQSxDQUFBQyxPQUFB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