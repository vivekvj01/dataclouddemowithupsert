import "core-js/modules/es.array.iterator";
import "core-js/modules/es.promise";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _mapInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/map";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import { exec } from 'child_process';
import stripAnsi from 'strip-ansi';
import Connection from '../connection';
function isNotNullOrUndefined(v) {
  return v != null;
}

/**
 *
 */
export class SfdxRegistry {
  constructor({
    cliPath
  }) {
    _defineProperty(this, "_cliPath", void 0);
    _defineProperty(this, "_orgList", void 0);
    _defineProperty(this, "_orgInfoMap", {});
    _defineProperty(this, "_defaultOrgInfo", void 0);
    this._cliPath = cliPath;
  }
  _createCommand(command, options = {}, args = []) {
    var _context;
    return `${this._cliPath ? this._cliPath + '/' : ''}sfdx ${command} ${_mapInstanceProperty(_context = _Object$keys(options)).call(_context, option => `${option.length > 1 ? '--' : '-'}${option}${options[option] != null ? ' ' + options[option] : ''}`).join(' ')} --json ${args.join(' ')}`;
  }
  async _execCommand(command, options = {}, args = []) {
    const cmd = this._createCommand(command, options, args);
    const buf = await new _Promise((resolve, reject) => {
      exec(cmd, (err, ret) => {
        if (err && !ret) {
          reject(err);
        } else {
          resolve(ret);
        }
      });
    });
    const body = stripAnsi(buf.toString());
    let ret;
    try {
      ret = JSON.parse(body);
    } catch (e) {
      throw new Error(`Unexpectedd output from Sfdx cli: ${body}`);
    }
    if (ret.status === 0 && ret.result) {
      return ret.result;
    } else {
      const err = new Error(ret.message);
      err.name = ret.name;
      throw err;
    }
  }
  async _getOrgList() {
    if (!this._orgList) {
      this._orgList = this._execCommand('force:org:list');
    }
    return this._orgList;
  }
  async getConnectionNames() {
    var _context2, _context3;
    const {
      nonScratchOrgs,
      scratchOrgs
    } = await this._getOrgList();
    return [..._filterInstanceProperty(_context2 = _mapInstanceProperty(nonScratchOrgs).call(nonScratchOrgs, o => o.alias)).call(_context2, isNotNullOrUndefined), ..._filterInstanceProperty(_context3 = _mapInstanceProperty(scratchOrgs).call(scratchOrgs, o => o.alias)).call(_context3, isNotNullOrUndefined), ..._mapInstanceProperty(nonScratchOrgs).call(nonScratchOrgs, o => o.username), ..._mapInstanceProperty(scratchOrgs).call(scratchOrgs, o => o.username)];
  }
  async getConnection(name) {
    const config = await this.getConnectionConfig(name);
    return config ? new Connection(config) : null;
  }
  async _getOrgInfo(username) {
    const options = username ? {
      u: username
    } : {};
    if (!username || !this._orgInfoMap[username]) {
      const pOrgInfo = this._execCommand('force:org:display', options);
      this._memoOrgInfo(pOrgInfo, username);
    }
    const orgInfo = username ? this._orgInfoMap[username] : this._defaultOrgInfo;
    if (!orgInfo) {
      throw new Error('no orginfo found');
    }
    return orgInfo;
  }
  _memoOrgInfo(pOrgInfo, username) {
    const pOrgInfo_ = pOrgInfo.then(orgInfo => {
      this._orgInfoMap[orgInfo.username] = pOrgInfo_;
      if (orgInfo.alias) {
        this._orgInfoMap[orgInfo.alias] = pOrgInfo_;
      }
      return orgInfo;
    });
    if (username) {
      this._orgInfoMap[username] = pOrgInfo_;
    } else {
      this._defaultOrgInfo = pOrgInfo_;
    }
  }
  async getConnectionConfig(name) {
    const orgInfo = await this._getOrgInfo(name);
    if (!orgInfo) {
      return null;
    }
    const {
      accessToken,
      instanceUrl,
      loginUrl
    } = orgInfo;
    return {
      accessToken,
      instanceUrl,
      loginUrl
    };
  }
  async saveConnectionConfig(_name, _connConfig) {
    // nothing to do
  }
  async setDefaultConnection(_name) {
    // nothing to do
  }
  async removeConnectionConfig(name) {
    await this._execCommand('force:org:delete', {
      u: name
    });
  }
  async getClientConfig(_name) {
    return null;
  }
  async getClientNames() {
    return [];
  }
  async registerClientConfig(_name, _clientConfig) {
    // nothing to do
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjIiwic3RyaXBBbnNpIiwiQ29ubmVjdGlvbiIsImlzTm90TnVsbE9yVW5kZWZpbmVkIiwidiIsIlNmZHhSZWdpc3RyeSIsImNvbnN0cnVjdG9yIiwiY2xpUGF0aCIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9jbGlQYXRoIiwiX2NyZWF0ZUNvbW1hbmQiLCJjb21tYW5kIiwib3B0aW9ucyIsImFyZ3MiLCJfY29udGV4dCIsIl9tYXBJbnN0YW5jZVByb3BlcnR5IiwiX09iamVjdCRrZXlzIiwiY2FsbCIsIm9wdGlvbiIsImxlbmd0aCIsImpvaW4iLCJfZXhlY0NvbW1hbmQiLCJjbWQiLCJidWYiLCJfUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnIiLCJyZXQiLCJib2R5IiwidG9TdHJpbmciLCJKU09OIiwicGFyc2UiLCJlIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJtZXNzYWdlIiwibmFtZSIsIl9nZXRPcmdMaXN0IiwiX29yZ0xpc3QiLCJnZXRDb25uZWN0aW9uTmFtZXMiLCJfY29udGV4dDIiLCJfY29udGV4dDMiLCJub25TY3JhdGNoT3JncyIsInNjcmF0Y2hPcmdzIiwiX2ZpbHRlckluc3RhbmNlUHJvcGVydHkiLCJvIiwiYWxpYXMiLCJ1c2VybmFtZSIsImdldENvbm5lY3Rpb24iLCJjb25maWciLCJnZXRDb25uZWN0aW9uQ29uZmlnIiwiX2dldE9yZ0luZm8iLCJ1IiwiX29yZ0luZm9NYXAiLCJwT3JnSW5mbyIsIl9tZW1vT3JnSW5mbyIsIm9yZ0luZm8iLCJfZGVmYXVsdE9yZ0luZm8iLCJwT3JnSW5mb18iLCJ0aGVuIiwiYWNjZXNzVG9rZW4iLCJpbnN0YW5jZVVybCIsImxvZ2luVXJsIiwic2F2ZUNvbm5lY3Rpb25Db25maWciLCJfbmFtZSIsIl9jb25uQ29uZmlnIiwic2V0RGVmYXVsdENvbm5lY3Rpb24iLCJyZW1vdmVDb25uZWN0aW9uQ29uZmlnIiwiZ2V0Q2xpZW50Q29uZmlnIiwiZ2V0Q2xpZW50TmFtZXMiLCJyZWdpc3RlckNsaWVudENvbmZpZyIsIl9jbGllbnRDb25maWciXSwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVnaXN0cnkvc2ZkeC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgc3RyaXBBbnNpIGZyb20gJ3N0cmlwLWFuc2knO1xuaW1wb3J0IENvbm5lY3Rpb24gZnJvbSAnLi4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBSZWdpc3RyeSwgQ29ubmVjdGlvbkNvbmZpZywgQ2xpZW50Q29uZmlnIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBTY2hlbWEgfSBmcm9tICcuLi90eXBlcyc7XG5cbnR5cGUgU2ZkeENvbW1hbmRPdXRwdXQgPSB7XG4gIHN0YXR1czogbnVtYmVyO1xuICBuYW1lPzogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICByZXN1bHQ/OiBhbnk7XG59O1xuXG50eXBlIFNmZHhPcmdMaXN0ID0ge1xuICBub25TY3JhdGNoT3JnczogU2ZkeE9yZ0luZm9bXTtcbiAgc2NyYXRjaE9yZ3M6IFNmZHhPcmdJbmZvW107XG59O1xuXG50eXBlIFNmZHhPcmdJbmZvID0ge1xuICBvcmdJZDogc3RyaW5nO1xuICBhY2Nlc3NUb2tlbjogc3RyaW5nO1xuICBpbnN0YW5jZVVybDogc3RyaW5nO1xuICBsb2dpblVybDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBjbGllbnRJZDogc3RyaW5nO1xuICBpc0Rldkh1YjogYm9vbGVhbjtcbiAgY29ubmVjdGVkU3RhdHVzOiBzdHJpbmc7XG4gIGxhc3RVc2VkOiBzdHJpbmc7XG4gIGFsaWFzPzogc3RyaW5nO1xufTtcblxuZnVuY3Rpb24gaXNOb3ROdWxsT3JVbmRlZmluZWQ8VD4odjogVCB8IG51bGwgfCB1bmRlZmluZWQpOiB2IGlzIFQge1xuICByZXR1cm4gdiAhPSBudWxsO1xufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBTZmR4UmVnaXN0cnkgaW1wbGVtZW50cyBSZWdpc3RyeSB7XG4gIF9jbGlQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIF9vcmdMaXN0OiBQcm9taXNlPFNmZHhPcmdMaXN0PiB8IHVuZGVmaW5lZDtcbiAgX29yZ0luZm9NYXA6IHsgW25hbWU6IHN0cmluZ106IFByb21pc2U8U2ZkeE9yZ0luZm8+IH0gPSB7fTtcbiAgX2RlZmF1bHRPcmdJbmZvOiBQcm9taXNlPFNmZHhPcmdJbmZvPiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih7IGNsaVBhdGggfTogeyBjbGlQYXRoPzogc3RyaW5nIH0pIHtcbiAgICB0aGlzLl9jbGlQYXRoID0gY2xpUGF0aDtcbiAgfVxuXG4gIF9jcmVhdGVDb21tYW5kKFxuICAgIGNvbW1hbmQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IFtvcHRpb246IHN0cmluZ106IGFueSB9ID0ge30sXG4gICAgYXJnczogc3RyaW5nW10gPSBbXSxcbiAgKSB7XG4gICAgcmV0dXJuIGAke1xuICAgICAgdGhpcy5fY2xpUGF0aCA/IHRoaXMuX2NsaVBhdGggKyAnLycgOiAnJ1xuICAgIH1zZmR4ICR7Y29tbWFuZH0gJHtPYmplY3Qua2V5cyhvcHRpb25zKVxuICAgICAgLm1hcChcbiAgICAgICAgKG9wdGlvbikgPT5cbiAgICAgICAgICBgJHtvcHRpb24ubGVuZ3RoID4gMSA/ICctLScgOiAnLSd9JHtvcHRpb259JHtcbiAgICAgICAgICAgIG9wdGlvbnNbb3B0aW9uXSAhPSBudWxsID8gJyAnICsgb3B0aW9uc1tvcHRpb25dIDogJydcbiAgICAgICAgICB9YCxcbiAgICAgIClcbiAgICAgIC5qb2luKCcgJyl9IC0tanNvbiAke2FyZ3Muam9pbignICcpfWA7XG4gIH1cblxuICBhc3luYyBfZXhlY0NvbW1hbmQ8VD4oXG4gICAgY29tbWFuZDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHsgW29wdGlvbjogc3RyaW5nXTogYW55IH0gPSB7fSxcbiAgICBhcmdzOiBzdHJpbmdbXSA9IFtdLFxuICApIHtcbiAgICBjb25zdCBjbWQgPSB0aGlzLl9jcmVhdGVDb21tYW5kKGNvbW1hbmQsIG9wdGlvbnMsIGFyZ3MpO1xuICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZXhlYyhjbWQsIChlcnIsIHJldCkgPT4ge1xuICAgICAgICBpZiAoZXJyICYmICFyZXQpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHJldCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGJvZHkgPSBzdHJpcEFuc2koYnVmLnRvU3RyaW5nKCkpO1xuICAgIGxldCByZXQ6IFNmZHhDb21tYW5kT3V0cHV0O1xuICAgIHRyeSB7XG4gICAgICByZXQgPSBKU09OLnBhcnNlKGJvZHkpIGFzIFNmZHhDb21tYW5kT3V0cHV0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZGQgb3V0cHV0IGZyb20gU2ZkeCBjbGk6ICR7Ym9keX1gKTtcbiAgICB9XG4gICAgaWYgKHJldC5zdGF0dXMgPT09IDAgJiYgcmV0LnJlc3VsdCkge1xuICAgICAgcmV0dXJuIHJldC5yZXN1bHQgYXMgVDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKHJldC5tZXNzYWdlIGFzIHN0cmluZyk7XG4gICAgICBlcnIubmFtZSA9IHJldC5uYW1lIGFzIHN0cmluZztcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfZ2V0T3JnTGlzdCgpIHtcbiAgICBpZiAoIXRoaXMuX29yZ0xpc3QpIHtcbiAgICAgIHRoaXMuX29yZ0xpc3QgPSB0aGlzLl9leGVjQ29tbWFuZDxTZmR4T3JnTGlzdD4oJ2ZvcmNlOm9yZzpsaXN0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vcmdMaXN0O1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29ubmVjdGlvbk5hbWVzKCkge1xuICAgIGNvbnN0IHsgbm9uU2NyYXRjaE9yZ3MsIHNjcmF0Y2hPcmdzIH0gPSBhd2FpdCB0aGlzLl9nZXRPcmdMaXN0KCk7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLm5vblNjcmF0Y2hPcmdzLm1hcCgobykgPT4gby5hbGlhcykuZmlsdGVyKGlzTm90TnVsbE9yVW5kZWZpbmVkKSxcbiAgICAgIC4uLnNjcmF0Y2hPcmdzLm1hcCgobykgPT4gby5hbGlhcykuZmlsdGVyKGlzTm90TnVsbE9yVW5kZWZpbmVkKSxcbiAgICAgIC4uLm5vblNjcmF0Y2hPcmdzLm1hcCgobykgPT4gby51c2VybmFtZSksXG4gICAgICAuLi5zY3JhdGNoT3Jncy5tYXAoKG8pID0+IG8udXNlcm5hbWUpLFxuICAgIF07XG4gIH1cblxuICBhc3luYyBnZXRDb25uZWN0aW9uPFMgZXh0ZW5kcyBTY2hlbWEgPSBTY2hlbWE+KG5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCB0aGlzLmdldENvbm5lY3Rpb25Db25maWcobmFtZSk7XG4gICAgcmV0dXJuIGNvbmZpZyA/IG5ldyBDb25uZWN0aW9uPFM+KGNvbmZpZykgOiBudWxsO1xuICB9XG5cbiAgYXN5bmMgX2dldE9yZ0luZm8odXNlcm5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdXNlcm5hbWUgPyB7IHU6IHVzZXJuYW1lIH0gOiB7fTtcbiAgICBpZiAoIXVzZXJuYW1lIHx8ICF0aGlzLl9vcmdJbmZvTWFwW3VzZXJuYW1lXSkge1xuICAgICAgY29uc3QgcE9yZ0luZm8gPSB0aGlzLl9leGVjQ29tbWFuZDxTZmR4T3JnSW5mbz4oXG4gICAgICAgICdmb3JjZTpvcmc6ZGlzcGxheScsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApO1xuICAgICAgdGhpcy5fbWVtb09yZ0luZm8ocE9yZ0luZm8sIHVzZXJuYW1lKTtcbiAgICB9XG4gICAgY29uc3Qgb3JnSW5mbyA9IHVzZXJuYW1lXG4gICAgICA/IHRoaXMuX29yZ0luZm9NYXBbdXNlcm5hbWVdXG4gICAgICA6IHRoaXMuX2RlZmF1bHRPcmdJbmZvO1xuICAgIGlmICghb3JnSW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBvcmdpbmZvIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBvcmdJbmZvO1xuICB9XG5cbiAgX21lbW9PcmdJbmZvKHBPcmdJbmZvOiBQcm9taXNlPFNmZHhPcmdJbmZvPiwgdXNlcm5hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBwT3JnSW5mb18gPSBwT3JnSW5mby50aGVuKChvcmdJbmZvKSA9PiB7XG4gICAgICB0aGlzLl9vcmdJbmZvTWFwW29yZ0luZm8udXNlcm5hbWVdID0gcE9yZ0luZm9fO1xuICAgICAgaWYgKG9yZ0luZm8uYWxpYXMpIHtcbiAgICAgICAgdGhpcy5fb3JnSW5mb01hcFtvcmdJbmZvLmFsaWFzXSA9IHBPcmdJbmZvXztcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmdJbmZvO1xuICAgIH0pO1xuICAgIGlmICh1c2VybmFtZSkge1xuICAgICAgdGhpcy5fb3JnSW5mb01hcFt1c2VybmFtZV0gPSBwT3JnSW5mb187XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RlZmF1bHRPcmdJbmZvID0gcE9yZ0luZm9fO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvbm5lY3Rpb25Db25maWcobmFtZT86IHN0cmluZykge1xuICAgIGNvbnN0IG9yZ0luZm8gPSBhd2FpdCB0aGlzLl9nZXRPcmdJbmZvKG5hbWUpO1xuICAgIGlmICghb3JnSW5mbykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIGluc3RhbmNlVXJsLCBsb2dpblVybCB9ID0gb3JnSW5mbztcbiAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiwgaW5zdGFuY2VVcmwsIGxvZ2luVXJsIH07XG4gIH1cblxuICBhc3luYyBzYXZlQ29ubmVjdGlvbkNvbmZpZyhfbmFtZTogc3RyaW5nLCBfY29ubkNvbmZpZzogQ29ubmVjdGlvbkNvbmZpZykge1xuICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgfVxuXG4gIGFzeW5jIHNldERlZmF1bHRDb25uZWN0aW9uKF9uYW1lOiBzdHJpbmcpIHtcbiAgICAvLyBub3RoaW5nIHRvIGRvXG4gIH1cblxuICBhc3luYyByZW1vdmVDb25uZWN0aW9uQ29uZmlnKG5hbWU6IHN0cmluZykge1xuICAgIGF3YWl0IHRoaXMuX2V4ZWNDb21tYW5kKCdmb3JjZTpvcmc6ZGVsZXRlJywgeyB1OiBuYW1lIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2xpZW50Q29uZmlnKF9uYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldENsaWVudE5hbWVzKCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGFzeW5jIHJlZ2lzdGVyQ2xpZW50Q29uZmlnKF9uYW1lOiBzdHJpbmcsIF9jbGllbnRDb25maWc6IENsaWVudENvbmZpZykge1xuICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsU0FBU0EsSUFBSSxRQUFRLGVBQWU7QUFDcEMsT0FBT0MsU0FBUyxNQUFNLFlBQVk7QUFDbEMsT0FBT0MsVUFBVSxNQUFNLGVBQWU7QUE2QnRDLFNBQVNDLG9CQUFvQkEsQ0FBSUMsQ0FBdUIsRUFBVTtFQUNoRSxPQUFPQSxDQUFDLElBQUksSUFBSTtBQUNsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLE1BQU1DLFlBQVksQ0FBcUI7RUFNNUNDLFdBQVdBLENBQUM7SUFBRUM7RUFBOEIsQ0FBQyxFQUFFO0lBQUFDLGVBQUE7SUFBQUEsZUFBQTtJQUFBQSxlQUFBLHNCQUhTLENBQUMsQ0FBQztJQUFBQSxlQUFBO0lBSXhELElBQUksQ0FBQ0MsUUFBUSxHQUFHRixPQUFPO0VBQ3pCO0VBRUFHLGNBQWNBLENBQ1pDLE9BQWUsRUFDZkMsT0FBa0MsR0FBRyxDQUFD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